{
  "version": 3,
  "sources": ["../../@aws-amplify/auth/src/errors/types/validation.ts", "../../@aws-amplify/auth/src/common/AuthErrorStrings.ts", "../../@aws-amplify/auth/src/errors/AuthError.ts", "../../@aws-amplify/auth/src/errors/utils/assertValidationError.ts", "../../@aws-amplify/auth/src/foundation/parsers/regionParsers.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/apiHelpers.ts", "../../@aws-amplify/auth/src/providers/cognito/types/errors.ts", "../../@aws-amplify/auth/src/errors/constants.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/types.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/internal/getCurrentUser.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/getCurrentUser.ts", "../../@aws-amplify/auth/src/utils/getAuthUserAgentValue.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolSerializer.ts", "../../@aws-amplify/auth/src/errors/utils/assertServiceError.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createUserPoolDeserializer.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/handler/cognitoUserPoolTransferHandler.ts", "../../@aws-amplify/auth/src/foundation/constants.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/constants.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createInitiateAuthClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createRespondToAuthChallengeClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifySoftwareTokenClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createAssociateSoftwareTokenClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmDeviceClient.ts", "../../@aws-amplify/auth/src/foundation/cognitoUserPoolEndpointResolver.ts", "../../@aws-amplify/auth/src/providers/cognito/factories/createCognitoUserPoolEndpointResolver.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/signInStore.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/textEncoder/index.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/BigInteger/BigInteger.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/calculate/calculateS.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/constants.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getBytesFromHex.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getHexFromBytes.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getHashFromData.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getHashFromHex.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getPaddedHex.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/calculate/calculateU.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getHkdfKey.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getRandomBytes.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getRandomString.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/AuthenticationHelper/AuthenticationHelper.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/calculate/calculateA.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getAuthenticationHelper.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getNowString.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/srp/getSignatureString.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/userContextData.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/signInHelpers.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/refreshAuthTokens.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/types.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/errorHelpers.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/TokenStore.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/signInWithRedirectStore.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/oAuthStore.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/inflightPromise.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/TokenOrchestrator.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/CognitoUserPoolsTokenProvider.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/tokenProvider.ts", "../../@aws-amplify/auth/src/providers/cognito/tokenProvider/cacheTokens.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/dispatchSignedInHubEvent.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signInWithCustomAuth.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signInWithCustomSRPAuth.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signInWithSRP.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signInWithUserPassword.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signIn.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/autoSignIn.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/signUpHelpers.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createSignUpClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signUp.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createForgotPasswordClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/resetPassword.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmForgotPasswordClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/confirmResetPassword.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createResendConfirmationCodeClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/resendSignUpCode.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createConfirmSignUpClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/confirmSignUp.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/confirmSignIn.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createChangePasswordClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/updatePassword.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createVerifyUserAttributeClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/confirmUserAttribute.ts", "../../@aws-amplify/auth/src/Errors.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/createOAuthError.ts", "../../@aws-amplify/auth/src/types/Auth.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/validateState.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/completeOAuthFlow.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/getRedirectUrl.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/handleFailure.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/attemptCompleteOAuthFlow.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/enableOAuthListener.ts", "../../@aws-amplify/auth/src/providers/cognito/types/models.ts", "../../@aws-amplify/auth/src/utils/openAuthSession.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/generateCodeVerifier.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/generateState.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/cancelOAuthFlow.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signInWithRedirect.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/internal/fetchUserAttributes.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/fetchUserAttributes.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/completeOAuthSignOut.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/oAuthSignOutRedirect.ts", "../../@aws-amplify/auth/src/providers/cognito/utils/oauth/handleOAuthSignOut.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createRevokeTokenClient.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createGlobalSignOutClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/signOut.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createGetUserAttributeVerificationCodeClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/sendUserAttributeVerificationCode.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/shared/serde/createEmptyResponseDeserializer.ts", "../../@aws-amplify/auth/src/foundation/factories/serviceClients/cognitoIdentityProvider/createDeleteUserClient.ts", "../../@aws-amplify/auth/src/providers/cognito/apis/deleteUser.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/types.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/IdentityIdStore.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/utils.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/IdentityIdProvider.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/credentialsProvider.ts", "../../@aws-amplify/auth/src/providers/cognito/credentialsProvider/index.ts", "../../aws-amplify/src/initSingleton.ts"],
  "sourcesContent": ["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var AuthValidationErrorCode;\n(function (AuthValidationErrorCode) {\n    AuthValidationErrorCode[\"EmptySignInUsername\"] = \"EmptySignInUsername\";\n    AuthValidationErrorCode[\"EmptySignInPassword\"] = \"EmptySignInPassword\";\n    AuthValidationErrorCode[\"CustomAuthSignInPassword\"] = \"CustomAuthSignInPassword\";\n    AuthValidationErrorCode[\"EmptySignUpUsername\"] = \"EmptySignUpUsername\";\n    AuthValidationErrorCode[\"EmptySignUpPassword\"] = \"EmptySignUpPassword\";\n    AuthValidationErrorCode[\"EmptyConfirmSignUpUsername\"] = \"EmptyConfirmSignUpUsername\";\n    AuthValidationErrorCode[\"EmptyConfirmSignUpCode\"] = \"EmptyConfirmSignUpCode\";\n    AuthValidationErrorCode[\"EmptyResendSignUpCodeUsername\"] = \"EmptyresendSignUpCodeUsername\";\n    AuthValidationErrorCode[\"EmptyChallengeResponse\"] = \"EmptyChallengeResponse\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordUsername\"] = \"EmptyConfirmResetPasswordUsername\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordNewPassword\"] = \"EmptyConfirmResetPasswordNewPassword\";\n    AuthValidationErrorCode[\"EmptyConfirmResetPasswordConfirmationCode\"] = \"EmptyConfirmResetPasswordConfirmationCode\";\n    AuthValidationErrorCode[\"EmptyResetPasswordUsername\"] = \"EmptyResetPasswordUsername\";\n    AuthValidationErrorCode[\"EmptyVerifyTOTPSetupCode\"] = \"EmptyVerifyTOTPSetupCode\";\n    AuthValidationErrorCode[\"EmptyConfirmUserAttributeCode\"] = \"EmptyConfirmUserAttributeCode\";\n    AuthValidationErrorCode[\"IncorrectMFAMethod\"] = \"IncorrectMFAMethod\";\n    AuthValidationErrorCode[\"EmptyUpdatePassword\"] = \"EmptyUpdatePassword\";\n})(AuthValidationErrorCode || (AuthValidationErrorCode = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthValidationErrorCode } from '../errors/types/validation';\nexport const validationErrorMap = {\n    [AuthValidationErrorCode.EmptyChallengeResponse]: {\n        message: 'challengeResponse is required to confirmSignIn',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordUsername]: {\n        message: 'username is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmSignUpCode]: {\n        message: 'code is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyConfirmSignUpUsername]: {\n        message: 'username is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode]: {\n        message: 'confirmationCode is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword]: {\n        message: 'newPassword is required to confirmResetPassword',\n    },\n    [AuthValidationErrorCode.EmptyResendSignUpCodeUsername]: {\n        message: 'username is required to confirmSignUp',\n    },\n    [AuthValidationErrorCode.EmptyResetPasswordUsername]: {\n        message: 'username is required to resetPassword',\n    },\n    [AuthValidationErrorCode.EmptySignInPassword]: {\n        message: 'password is required to signIn',\n    },\n    [AuthValidationErrorCode.EmptySignInUsername]: {\n        message: 'username is required to signIn',\n    },\n    [AuthValidationErrorCode.EmptySignUpPassword]: {\n        message: 'password is required to signUp',\n    },\n    [AuthValidationErrorCode.EmptySignUpUsername]: {\n        message: 'username is required to signUp',\n    },\n    [AuthValidationErrorCode.CustomAuthSignInPassword]: {\n        message: 'A password is not needed when signing in with CUSTOM_WITHOUT_SRP',\n        recoverySuggestion: 'Do not include a password in your signIn call.',\n    },\n    [AuthValidationErrorCode.IncorrectMFAMethod]: {\n        message: 'Incorrect MFA method was chosen. It should be either SMS or TOTP',\n        recoverySuggestion: 'Try to pass TOTP or SMS as the challengeResponse',\n    },\n    [AuthValidationErrorCode.EmptyVerifyTOTPSetupCode]: {\n        message: 'code is required to verifyTotpSetup',\n    },\n    [AuthValidationErrorCode.EmptyUpdatePassword]: {\n        message: 'oldPassword and newPassword are required to changePassword',\n    },\n    [AuthValidationErrorCode.EmptyConfirmUserAttributeCode]: {\n        message: 'confirmation code is required to confirmUserAttribute',\n    },\n};\n// TODO: delete this code when the Auth class is removed.\nexport var AuthErrorStrings;\n(function (AuthErrorStrings) {\n    AuthErrorStrings[\"DEFAULT_MSG\"] = \"Authentication Error\";\n    AuthErrorStrings[\"EMPTY_EMAIL\"] = \"Email cannot be empty\";\n    AuthErrorStrings[\"EMPTY_PHONE\"] = \"Phone number cannot be empty\";\n    AuthErrorStrings[\"EMPTY_USERNAME\"] = \"Username cannot be empty\";\n    AuthErrorStrings[\"INVALID_USERNAME\"] = \"The username should either be a string or one of the sign in types\";\n    AuthErrorStrings[\"EMPTY_PASSWORD\"] = \"Password cannot be empty\";\n    AuthErrorStrings[\"EMPTY_CODE\"] = \"Confirmation code cannot be empty\";\n    AuthErrorStrings[\"SIGN_UP_ERROR\"] = \"Error creating account\";\n    AuthErrorStrings[\"NO_MFA\"] = \"No valid MFA method provided\";\n    AuthErrorStrings[\"INVALID_MFA\"] = \"Invalid MFA type\";\n    AuthErrorStrings[\"EMPTY_CHALLENGE\"] = \"Challenge response cannot be empty\";\n    AuthErrorStrings[\"NO_USER_SESSION\"] = \"Failed to get the session because the user is empty\";\n    AuthErrorStrings[\"NETWORK_ERROR\"] = \"Network Error\";\n    AuthErrorStrings[\"DEVICE_CONFIG\"] = \"Device tracking has not been configured in this User Pool\";\n    AuthErrorStrings[\"AUTOSIGNIN_ERROR\"] = \"Please use your credentials to sign in\";\n    AuthErrorStrings[\"OAUTH_ERROR\"] = \"Couldn't finish OAuth flow, check your User Pool HostedUI settings\";\n})(AuthErrorStrings || (AuthErrorStrings = {}));\nexport var AuthErrorCodes;\n(function (AuthErrorCodes) {\n    AuthErrorCodes[\"SignInException\"] = \"SignInException\";\n    AuthErrorCodes[\"OAuthSignInError\"] = \"OAuthSignInException\";\n})(AuthErrorCodes || (AuthErrorCodes = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError, } from '@aws-amplify/core/internals/utils';\nexport class AuthError extends AmplifyError {\n    constructor(params) {\n        super(params);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AuthError;\n        Object.setPrototypeOf(this, AuthError.prototype);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { validationErrorMap } from '../../common/AuthErrorStrings';\nimport { AuthError } from '../AuthError';\nexport function assertValidationError(assertion, name) {\n    const { message, recoverySuggestion } = validationErrorMap[name];\n    if (!assertion) {\n        throw new AuthError({ name, message, recoverySuggestion });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../errors/AuthError';\nexport function getRegionFromUserPoolId(userPoolId) {\n    const region = userPoolId?.split('_')[0];\n    if (!userPoolId ||\n        userPoolId.indexOf('_') < 0 ||\n        !region ||\n        typeof region !== 'string')\n        throw new AuthError({\n            name: 'InvalidUserPoolId',\n            message: 'Invalid user pool id provided.',\n        });\n    return region;\n}\nexport function getRegionFromIdentityPoolId(identityPoolId) {\n    if (!identityPoolId || !identityPoolId.includes(':')) {\n        throw new AuthError({\n            name: 'InvalidIdentityPoolIdException',\n            message: 'Invalid identity pool id provided.',\n            recoverySuggestion: 'Make sure a valid identityPoolId is given in the config.',\n        });\n    }\n    return identityPoolId.split(':')[0];\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * Transforms a user attributes object into an array of AttributeType objects.\n * @param attributes user attributes to be mapped to AttributeType objects.\n * @returns an array of AttributeType objects.\n */\nexport function toAttributeType(attributes) {\n    return Object.entries(attributes).map(([key, value]) => ({\n        Name: key,\n        Value: value,\n    }));\n}\n/**\n * Transforms an array of AttributeType objects into a user attributes object.\n *\n * @param attributes - an array of AttributeType objects.\n * @returns AuthUserAttributes object.\n */\nexport function toAuthUserAttribute(attributes) {\n    const userAttributes = {};\n    attributes?.forEach(attribute => {\n        if (attribute.Name)\n            userAttributes[attribute.Name] = attribute.Value;\n    });\n    return userAttributes;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var AssociateSoftwareTokenException;\n(function (AssociateSoftwareTokenException) {\n    AssociateSoftwareTokenException[\"ConcurrentModificationException\"] = \"ConcurrentModificationException\";\n    AssociateSoftwareTokenException[\"ForbiddenException\"] = \"ForbiddenException\";\n    AssociateSoftwareTokenException[\"InternalErrorException\"] = \"InternalErrorException\";\n    AssociateSoftwareTokenException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    AssociateSoftwareTokenException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    AssociateSoftwareTokenException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    AssociateSoftwareTokenException[\"SoftwareTokenMFANotFoundException\"] = \"SoftwareTokenMFANotFoundException\";\n})(AssociateSoftwareTokenException || (AssociateSoftwareTokenException = {}));\nexport var ChangePasswordException;\n(function (ChangePasswordException) {\n    ChangePasswordException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ChangePasswordException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ChangePasswordException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ChangePasswordException[\"InvalidPasswordException\"] = \"InvalidPasswordException\";\n    ChangePasswordException[\"LimitExceededException\"] = \"LimitExceededException\";\n    ChangePasswordException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ChangePasswordException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    ChangePasswordException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ChangePasswordException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ChangePasswordException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    ChangePasswordException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ChangePasswordException || (ChangePasswordException = {}));\nexport var ConfirmDeviceException;\n(function (ConfirmDeviceException) {\n    ConfirmDeviceException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ConfirmDeviceException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ConfirmDeviceException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    ConfirmDeviceException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ConfirmDeviceException[\"InvalidPasswordException\"] = \"InvalidPasswordException\";\n    ConfirmDeviceException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    ConfirmDeviceException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ConfirmDeviceException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    ConfirmDeviceException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ConfirmDeviceException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ConfirmDeviceException[\"UsernameExistsException\"] = \"UsernameExistsException\";\n    ConfirmDeviceException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    ConfirmDeviceException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ConfirmDeviceException || (ConfirmDeviceException = {}));\nexport var ConfirmForgotPasswordException;\n(function (ConfirmForgotPasswordException) {\n    ConfirmForgotPasswordException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    ConfirmForgotPasswordException[\"ExpiredCodeException\"] = \"ExpiredCodeException\";\n    ConfirmForgotPasswordException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ConfirmForgotPasswordException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ConfirmForgotPasswordException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    ConfirmForgotPasswordException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ConfirmForgotPasswordException[\"InvalidPasswordException\"] = \"InvalidPasswordException\";\n    ConfirmForgotPasswordException[\"LimitExceededException\"] = \"LimitExceededException\";\n    ConfirmForgotPasswordException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ConfirmForgotPasswordException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ConfirmForgotPasswordException[\"TooManyFailedAttemptsException\"] = \"TooManyFailedAttemptsException\";\n    ConfirmForgotPasswordException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ConfirmForgotPasswordException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    ConfirmForgotPasswordException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    ConfirmForgotPasswordException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    ConfirmForgotPasswordException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ConfirmForgotPasswordException || (ConfirmForgotPasswordException = {}));\nexport var ConfirmSignUpException;\n(function (ConfirmSignUpException) {\n    ConfirmSignUpException[\"AliasExistsException\"] = \"AliasExistsException\";\n    ConfirmSignUpException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    ConfirmSignUpException[\"ExpiredCodeException\"] = \"ExpiredCodeException\";\n    ConfirmSignUpException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ConfirmSignUpException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ConfirmSignUpException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    ConfirmSignUpException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ConfirmSignUpException[\"LimitExceededException\"] = \"LimitExceededException\";\n    ConfirmSignUpException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ConfirmSignUpException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ConfirmSignUpException[\"TooManyFailedAttemptsException\"] = \"TooManyFailedAttemptsException\";\n    ConfirmSignUpException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ConfirmSignUpException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    ConfirmSignUpException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    ConfirmSignUpException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ConfirmSignUpException || (ConfirmSignUpException = {}));\nexport var DeleteUserAttributesException;\n(function (DeleteUserAttributesException) {\n    DeleteUserAttributesException[\"ForbiddenException\"] = \"ForbiddenException\";\n    DeleteUserAttributesException[\"InternalErrorException\"] = \"InternalErrorException\";\n    DeleteUserAttributesException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    DeleteUserAttributesException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    DeleteUserAttributesException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    DeleteUserAttributesException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    DeleteUserAttributesException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    DeleteUserAttributesException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    DeleteUserAttributesException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(DeleteUserAttributesException || (DeleteUserAttributesException = {}));\nexport var DeleteUserException;\n(function (DeleteUserException) {\n    DeleteUserException[\"ForbiddenException\"] = \"ForbiddenException\";\n    DeleteUserException[\"InternalErrorException\"] = \"InternalErrorException\";\n    DeleteUserException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    DeleteUserException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    DeleteUserException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    DeleteUserException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    DeleteUserException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    DeleteUserException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    DeleteUserException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(DeleteUserException || (DeleteUserException = {}));\nexport var ForgetDeviceException;\n(function (ForgetDeviceException) {\n    ForgetDeviceException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ForgetDeviceException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ForgetDeviceException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ForgetDeviceException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    ForgetDeviceException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ForgetDeviceException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    ForgetDeviceException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ForgetDeviceException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ForgetDeviceException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    ForgetDeviceException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ForgetDeviceException || (ForgetDeviceException = {}));\nexport var ForgotPasswordException;\n(function (ForgotPasswordException) {\n    ForgotPasswordException[\"CodeDeliveryFailureException\"] = \"CodeDeliveryFailureException\";\n    ForgotPasswordException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ForgotPasswordException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ForgotPasswordException[\"InvalidEmailRoleAccessPolicyException\"] = \"InvalidEmailRoleAccessPolicyException\";\n    ForgotPasswordException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    ForgotPasswordException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ForgotPasswordException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    ForgotPasswordException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    ForgotPasswordException[\"LimitExceededException\"] = \"LimitExceededException\";\n    ForgotPasswordException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ForgotPasswordException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ForgotPasswordException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ForgotPasswordException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    ForgotPasswordException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    ForgotPasswordException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ForgotPasswordException || (ForgotPasswordException = {}));\nexport var GetUserException;\n(function (GetUserException) {\n    GetUserException[\"ForbiddenException\"] = \"ForbiddenException\";\n    GetUserException[\"InternalErrorException\"] = \"InternalErrorException\";\n    GetUserException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    GetUserException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    GetUserException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    GetUserException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    GetUserException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    GetUserException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    GetUserException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(GetUserException || (GetUserException = {}));\nexport var GetIdException;\n(function (GetIdException) {\n    GetIdException[\"ExternalServiceException\"] = \"ExternalServiceException\";\n    GetIdException[\"InternalErrorException\"] = \"InternalErrorException\";\n    GetIdException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    GetIdException[\"LimitExceededException\"] = \"LimitExceededException\";\n    GetIdException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    GetIdException[\"ResourceConflictException\"] = \"ResourceConflictException\";\n    GetIdException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    GetIdException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n})(GetIdException || (GetIdException = {}));\nexport var GetCredentialsForIdentityException;\n(function (GetCredentialsForIdentityException) {\n    GetCredentialsForIdentityException[\"ExternalServiceException\"] = \"ExternalServiceException\";\n    GetCredentialsForIdentityException[\"InternalErrorException\"] = \"InternalErrorException\";\n    GetCredentialsForIdentityException[\"InvalidIdentityPoolConfigurationException\"] = \"InvalidIdentityPoolConfigurationException\";\n    GetCredentialsForIdentityException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    GetCredentialsForIdentityException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    GetCredentialsForIdentityException[\"ResourceConflictException\"] = \"ResourceConflictException\";\n    GetCredentialsForIdentityException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    GetCredentialsForIdentityException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n})(GetCredentialsForIdentityException || (GetCredentialsForIdentityException = {}));\nexport var GetUserAttributeVerificationException;\n(function (GetUserAttributeVerificationException) {\n    GetUserAttributeVerificationException[\"CodeDeliveryFailureException\"] = \"CodeDeliveryFailureException\";\n    GetUserAttributeVerificationException[\"ForbiddenException\"] = \"ForbiddenException\";\n    GetUserAttributeVerificationException[\"InternalErrorException\"] = \"InternalErrorException\";\n    GetUserAttributeVerificationException[\"InvalidEmailRoleAccessPolicyException\"] = \"InvalidEmailRoleAccessPolicyException\";\n    GetUserAttributeVerificationException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    GetUserAttributeVerificationException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    GetUserAttributeVerificationException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    GetUserAttributeVerificationException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    GetUserAttributeVerificationException[\"LimitExceededException\"] = \"LimitExceededException\";\n    GetUserAttributeVerificationException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    GetUserAttributeVerificationException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    GetUserAttributeVerificationException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    GetUserAttributeVerificationException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    GetUserAttributeVerificationException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    GetUserAttributeVerificationException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    GetUserAttributeVerificationException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    GetUserAttributeVerificationException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(GetUserAttributeVerificationException || (GetUserAttributeVerificationException = {}));\nexport var GlobalSignOutException;\n(function (GlobalSignOutException) {\n    GlobalSignOutException[\"ForbiddenException\"] = \"ForbiddenException\";\n    GlobalSignOutException[\"InternalErrorException\"] = \"InternalErrorException\";\n    GlobalSignOutException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    GlobalSignOutException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    GlobalSignOutException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    GlobalSignOutException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    GlobalSignOutException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    GlobalSignOutException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n})(GlobalSignOutException || (GlobalSignOutException = {}));\nexport var InitiateAuthException;\n(function (InitiateAuthException) {\n    InitiateAuthException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    InitiateAuthException[\"ForbiddenException\"] = \"ForbiddenException\";\n    InitiateAuthException[\"InternalErrorException\"] = \"InternalErrorException\";\n    InitiateAuthException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    InitiateAuthException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    InitiateAuthException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    InitiateAuthException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    InitiateAuthException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    InitiateAuthException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    InitiateAuthException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    InitiateAuthException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    InitiateAuthException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    InitiateAuthException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    InitiateAuthException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    InitiateAuthException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(InitiateAuthException || (InitiateAuthException = {}));\nexport var ResendConfirmationException;\n(function (ResendConfirmationException) {\n    ResendConfirmationException[\"CodeDeliveryFailureException\"] = \"CodeDeliveryFailureException\";\n    ResendConfirmationException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ResendConfirmationException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ResendConfirmationException[\"InvalidEmailRoleAccessPolicyException\"] = \"InvalidEmailRoleAccessPolicyException\";\n    ResendConfirmationException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    ResendConfirmationException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ResendConfirmationException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    ResendConfirmationException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    ResendConfirmationException[\"LimitExceededException\"] = \"LimitExceededException\";\n    ResendConfirmationException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ResendConfirmationException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ResendConfirmationException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ResendConfirmationException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    ResendConfirmationException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    ResendConfirmationException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ResendConfirmationException || (ResendConfirmationException = {}));\nexport var RespondToAuthChallengeException;\n(function (RespondToAuthChallengeException) {\n    RespondToAuthChallengeException[\"AliasExistsException\"] = \"AliasExistsException\";\n    RespondToAuthChallengeException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    RespondToAuthChallengeException[\"ExpiredCodeException\"] = \"ExpiredCodeException\";\n    RespondToAuthChallengeException[\"ForbiddenException\"] = \"ForbiddenException\";\n    RespondToAuthChallengeException[\"InternalErrorException\"] = \"InternalErrorException\";\n    RespondToAuthChallengeException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    RespondToAuthChallengeException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    RespondToAuthChallengeException[\"InvalidPasswordException\"] = \"InvalidPasswordException\";\n    RespondToAuthChallengeException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    RespondToAuthChallengeException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    RespondToAuthChallengeException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    RespondToAuthChallengeException[\"MFAMethodNotFoundException\"] = \"MFAMethodNotFoundException\";\n    RespondToAuthChallengeException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    RespondToAuthChallengeException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    RespondToAuthChallengeException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    RespondToAuthChallengeException[\"SoftwareTokenMFANotFoundException\"] = \"SoftwareTokenMFANotFoundException\";\n    RespondToAuthChallengeException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    RespondToAuthChallengeException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    RespondToAuthChallengeException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    RespondToAuthChallengeException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    RespondToAuthChallengeException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(RespondToAuthChallengeException || (RespondToAuthChallengeException = {}));\nexport var SetUserMFAPreferenceException;\n(function (SetUserMFAPreferenceException) {\n    SetUserMFAPreferenceException[\"ForbiddenException\"] = \"ForbiddenException\";\n    SetUserMFAPreferenceException[\"InternalErrorException\"] = \"InternalErrorException\";\n    SetUserMFAPreferenceException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    SetUserMFAPreferenceException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    SetUserMFAPreferenceException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    SetUserMFAPreferenceException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    SetUserMFAPreferenceException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    SetUserMFAPreferenceException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(SetUserMFAPreferenceException || (SetUserMFAPreferenceException = {}));\nexport var SignUpException;\n(function (SignUpException) {\n    SignUpException[\"CodeDeliveryFailureException\"] = \"CodeDeliveryFailureException\";\n    SignUpException[\"InternalErrorException\"] = \"InternalErrorException\";\n    SignUpException[\"InvalidEmailRoleAccessPolicyException\"] = \"InvalidEmailRoleAccessPolicyException\";\n    SignUpException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    SignUpException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    SignUpException[\"InvalidPasswordException\"] = \"InvalidPasswordException\";\n    SignUpException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    SignUpException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    SignUpException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    SignUpException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    SignUpException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    SignUpException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    SignUpException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    SignUpException[\"UsernameExistsException\"] = \"UsernameExistsException\";\n})(SignUpException || (SignUpException = {}));\nexport var UpdateUserAttributesException;\n(function (UpdateUserAttributesException) {\n    UpdateUserAttributesException[\"AliasExistsException\"] = \"AliasExistsException\";\n    UpdateUserAttributesException[\"CodeDeliveryFailureException\"] = \"CodeDeliveryFailureException\";\n    UpdateUserAttributesException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    UpdateUserAttributesException[\"ExpiredCodeException\"] = \"ExpiredCodeException\";\n    UpdateUserAttributesException[\"ForbiddenException\"] = \"ForbiddenException\";\n    UpdateUserAttributesException[\"InternalErrorException\"] = \"InternalErrorException\";\n    UpdateUserAttributesException[\"InvalidEmailRoleAccessPolicyException\"] = \"InvalidEmailRoleAccessPolicyException\";\n    UpdateUserAttributesException[\"InvalidLambdaResponseException\"] = \"InvalidLambdaResponseException\";\n    UpdateUserAttributesException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    UpdateUserAttributesException[\"InvalidSmsRoleAccessPolicyException\"] = \"InvalidSmsRoleAccessPolicyException\";\n    UpdateUserAttributesException[\"InvalidSmsRoleTrustRelationshipException\"] = \"InvalidSmsRoleTrustRelationshipException\";\n    UpdateUserAttributesException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    UpdateUserAttributesException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    UpdateUserAttributesException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    UpdateUserAttributesException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    UpdateUserAttributesException[\"UnexpectedLambdaException\"] = \"UnexpectedLambdaException\";\n    UpdateUserAttributesException[\"UserLambdaValidationException\"] = \"UserLambdaValidationException\";\n    UpdateUserAttributesException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    UpdateUserAttributesException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(UpdateUserAttributesException || (UpdateUserAttributesException = {}));\nexport var VerifySoftwareTokenException;\n(function (VerifySoftwareTokenException) {\n    VerifySoftwareTokenException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    VerifySoftwareTokenException[\"EnableSoftwareTokenMFAException\"] = \"EnableSoftwareTokenMFAException\";\n    VerifySoftwareTokenException[\"ForbiddenException\"] = \"ForbiddenException\";\n    VerifySoftwareTokenException[\"InternalErrorException\"] = \"InternalErrorException\";\n    VerifySoftwareTokenException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    VerifySoftwareTokenException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    VerifySoftwareTokenException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    VerifySoftwareTokenException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    VerifySoftwareTokenException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    VerifySoftwareTokenException[\"SoftwareTokenMFANotFoundException\"] = \"SoftwareTokenMFANotFoundException\";\n    VerifySoftwareTokenException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    VerifySoftwareTokenException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    VerifySoftwareTokenException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(VerifySoftwareTokenException || (VerifySoftwareTokenException = {}));\nexport var VerifyUserAttributeException;\n(function (VerifyUserAttributeException) {\n    VerifyUserAttributeException[\"AliasExistsException\"] = \"AliasExistsException\";\n    VerifyUserAttributeException[\"CodeMismatchException\"] = \"CodeMismatchException\";\n    VerifyUserAttributeException[\"ExpiredCodeException\"] = \"ExpiredCodeException\";\n    VerifyUserAttributeException[\"ForbiddenException\"] = \"ForbiddenException\";\n    VerifyUserAttributeException[\"InternalErrorException\"] = \"InternalErrorException\";\n    VerifyUserAttributeException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    VerifyUserAttributeException[\"LimitExceededException\"] = \"LimitExceededException\";\n    VerifyUserAttributeException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    VerifyUserAttributeException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    VerifyUserAttributeException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    VerifyUserAttributeException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    VerifyUserAttributeException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    VerifyUserAttributeException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(VerifyUserAttributeException || (VerifyUserAttributeException = {}));\nexport var UpdateDeviceStatusException;\n(function (UpdateDeviceStatusException) {\n    UpdateDeviceStatusException[\"ForbiddenException\"] = \"ForbiddenException\";\n    UpdateDeviceStatusException[\"InternalErrorException\"] = \"InternalErrorException\";\n    UpdateDeviceStatusException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    UpdateDeviceStatusException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    UpdateDeviceStatusException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    UpdateDeviceStatusException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    UpdateDeviceStatusException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    UpdateDeviceStatusException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    UpdateDeviceStatusException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    UpdateDeviceStatusException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(UpdateDeviceStatusException || (UpdateDeviceStatusException = {}));\nexport var ListDevicesException;\n(function (ListDevicesException) {\n    ListDevicesException[\"ForbiddenException\"] = \"ForbiddenException\";\n    ListDevicesException[\"InternalErrorException\"] = \"InternalErrorException\";\n    ListDevicesException[\"InvalidParameterException\"] = \"InvalidParameterException\";\n    ListDevicesException[\"InvalidUserPoolConfigurationException\"] = \"InvalidUserPoolConfigurationException\";\n    ListDevicesException[\"NotAuthorizedException\"] = \"NotAuthorizedException\";\n    ListDevicesException[\"PasswordResetRequiredException\"] = \"PasswordResetRequiredException\";\n    ListDevicesException[\"ResourceNotFoundException\"] = \"ResourceNotFoundException\";\n    ListDevicesException[\"TooManyRequestsException\"] = \"TooManyRequestsException\";\n    ListDevicesException[\"UserNotConfirmedException\"] = \"UserNotConfirmedException\";\n    ListDevicesException[\"UserNotFoundException\"] = \"UserNotFoundException\";\n})(ListDevicesException || (ListDevicesException = {}));\nexport const SETUP_TOTP_EXCEPTION = 'SetUpTOTPException';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from './AuthError';\nexport const USER_UNAUTHENTICATED_EXCEPTION = 'UserUnAuthenticatedException';\nexport const USER_ALREADY_AUTHENTICATED_EXCEPTION = 'UserAlreadyAuthenticatedException';\nexport const DEVICE_METADATA_NOT_FOUND_EXCEPTION = 'DeviceMetadataNotFoundException';\nexport const AUTO_SIGN_IN_EXCEPTION = 'AutoSignInException';\nexport const INVALID_REDIRECT_EXCEPTION = 'InvalidRedirectException';\nexport const INVALID_APP_SCHEME_EXCEPTION = 'InvalidAppSchemeException';\nexport const INVALID_PREFERRED_REDIRECT_EXCEPTION = 'InvalidPreferredRedirectUrlException';\nexport const invalidRedirectException = new AuthError({\n    name: INVALID_REDIRECT_EXCEPTION,\n    message: 'signInRedirect or signOutRedirect had an invalid format or was not found.',\n    recoverySuggestion: 'Please make sure the signIn/Out redirect in your oauth config is valid.',\n});\nexport const invalidAppSchemeException = new AuthError({\n    name: INVALID_APP_SCHEME_EXCEPTION,\n    message: 'A valid non-http app scheme was not found in the config.',\n    recoverySuggestion: 'Please make sure a valid custom app scheme is present in the config.',\n});\nexport const invalidPreferredRedirectUrlException = new AuthError({\n    name: INVALID_PREFERRED_REDIRECT_EXCEPTION,\n    message: 'The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.',\n    recoverySuggestion: 'Please make sure a matching preferredRedirectUrl is provided.',\n});\nexport const INVALID_ORIGIN_EXCEPTION = 'InvalidOriginException';\nexport const invalidOriginException = new AuthError({\n    name: INVALID_ORIGIN_EXCEPTION,\n    message: 'redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin',\n    recoverySuggestion: 'Please call signInWithRedirect from the same origin.',\n});\nexport const OAUTH_SIGNOUT_EXCEPTION = 'OAuthSignOutException';\nexport const TOKEN_REFRESH_EXCEPTION = 'TokenRefreshException';\nexport const UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION = 'UnexpectedSignInInterruptionException';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../errors/AuthError';\nimport { DEVICE_METADATA_NOT_FOUND_EXCEPTION, TOKEN_REFRESH_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, } from '../../../errors/constants';\nexport function isTypeUserPoolConfig(authConfig) {\n    if (authConfig &&\n        authConfig.Cognito.userPoolId &&\n        authConfig.Cognito.userPoolClientId) {\n        return true;\n    }\n    return false;\n}\nexport function assertAuthTokens(tokens) {\n    if (!tokens || !tokens.accessToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nexport function assertIdTokenInAuthTokens(tokens) {\n    if (!tokens || !tokens.idToken) {\n        throw new AuthError({\n            name: USER_UNAUTHENTICATED_EXCEPTION,\n            message: 'User needs to be authenticated to call this API.',\n            recoverySuggestion: 'Sign in before calling this API again.',\n        });\n    }\n}\nexport const oAuthTokenRefreshException = new AuthError({\n    name: TOKEN_REFRESH_EXCEPTION,\n    message: `Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. \n\tPlease change your oauth configuration to use 'code grant' flow.`,\n    recoverySuggestion: `Please logout and change your Amplify configuration to use \"code grant\" flow. \n\tE.g { responseType: 'code' }`,\n});\nexport const tokenRefreshException = new AuthError({\n    name: USER_UNAUTHENTICATED_EXCEPTION,\n    message: 'User needs to be authenticated to call this API.',\n    recoverySuggestion: 'Sign in before calling this API again.',\n});\nexport function assertAuthTokensWithRefreshToken(tokens) {\n    if (isAuthenticatedWithImplicitOauthFlow(tokens)) {\n        throw oAuthTokenRefreshException;\n    }\n    if (!isAuthenticatedWithRefreshToken(tokens)) {\n        throw tokenRefreshException;\n    }\n}\nexport function assertDeviceMetadata(deviceMetadata) {\n    if (!deviceMetadata ||\n        !deviceMetadata.deviceKey ||\n        !deviceMetadata.deviceGroupKey ||\n        !deviceMetadata.randomPassword) {\n        throw new AuthError({\n            name: DEVICE_METADATA_NOT_FOUND_EXCEPTION,\n            message: 'Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.',\n            recoverySuggestion: 'Make sure to not clear storage after calling the signIn API.',\n        });\n    }\n}\nexport const OAuthStorageKeys = {\n    inflightOAuth: 'inflightOAuth',\n    oauthSignIn: 'oauthSignIn',\n    oauthPKCE: 'oauthPKCE',\n    oauthState: 'oauthState',\n};\nfunction isAuthenticated(tokens) {\n    return tokens?.accessToken || tokens?.idToken;\n}\nfunction isAuthenticatedWithRefreshToken(tokens) {\n    return isAuthenticated(tokens) && tokens?.refreshToken;\n}\nfunction isAuthenticatedWithImplicitOauthFlow(tokens) {\n    return isAuthenticated(tokens) && !tokens?.refreshToken;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../../utils/types';\nexport const getCurrentUser = async (amplify) => {\n    const authConfig = amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const tokens = await amplify.Auth.getTokens({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const { 'cognito:username': username, sub } = tokens.idToken?.payload ?? {};\n    const authUser = {\n        username: username,\n        userId: sub,\n    };\n    const signInDetails = getSignInDetailsFromTokens(tokens);\n    if (signInDetails) {\n        authUser.signInDetails = signInDetails;\n    }\n    return authUser;\n};\nfunction getSignInDetailsFromTokens(tokens) {\n    return tokens?.signInDetails;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { getCurrentUser as getCurrentUserInternal } from './internal/getCurrentUser';\n/**\n * Gets the current user from the idToken.\n *\n * @param input -  The GetCurrentUserInput object.\n * @returns GetCurrentUserOutput\n * @throws - {@link InitiateAuthException} - Thrown when the service fails to refresh the tokens.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport const getCurrentUser = async () => {\n    return getCurrentUserInternal(Amplify);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Category, getAmplifyUserAgent, } from '@aws-amplify/core/internals/utils';\nexport const getAuthUserAgentValue = (action, customUserAgentDetails) => getAmplifyUserAgent({\n    category: Category.Auth,\n    action,\n    ...customUserAgentDetails,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const createUserPoolSerializer = (operation) => (input, endpoint) => {\n    const headers = getSharedHeaders(operation);\n    const body = JSON.stringify(input);\n    return buildHttpRpcRequest(endpoint, headers, body);\n};\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityProviderService.${operation}`,\n});\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyErrorCode, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../AuthError';\nexport function assertServiceError(error) {\n    if (!error ||\n        error.name === 'Error' ||\n        error instanceof TypeError) {\n        throw new AuthError({\n            name: AmplifyErrorCode.Unknown,\n            message: 'An unknown error has occurred.',\n            underlyingError: error,\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseJsonBody, parseJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { assertServiceError } from '../../../../../../errors/utils/assertServiceError';\nimport { AuthError } from '../../../../../../errors/AuthError';\nexport const createUserPoolDeserializer = () => async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        assertServiceError(error);\n        throw new AuthError({ name: error.name, message: error.message });\n    }\n    return parseJsonBody(response);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeTransferHandler } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { unauthenticatedHandler, } from '@aws-amplify/core/internals/aws-client-utils';\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => (next, _) => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nexport const cognitoUserPoolTransferHandler = composeTransferHandler(unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nexport const COGNITO_IDP_SERVICE_NAME = 'cognito-idp';\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getRetryDecider, jitteredBackoff, parseJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { getAmplifyUserAgent } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from '../../../constants';\nexport const DEFAULT_SERVICE_CLIENT_API_CONFIG = {\n    service: COGNITO_IDP_SERVICE_NAME,\n    retryDecider: getRetryDecider(parseJsonError),\n    computeDelay: jitteredBackoff,\n    userAgentValue: getAmplifyUserAgent(),\n    cache: 'no-store',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createInitiateAuthClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('InitiateAuth'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createRespondToAuthChallengeClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('RespondToAuthChallenge'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createVerifySoftwareTokenClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('VerifySoftwareToken'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createAssociateSoftwareTokenClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('AssociateSoftwareToken'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createConfirmDeviceClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ConfirmDevice'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getDnsSuffix, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { COGNITO_IDP_SERVICE_NAME } from './constants';\nexport const cognitoUserPoolEndpointResolver = ({ region, }) => ({\n    url: new AmplifyUrl(`https://${COGNITO_IDP_SERVICE_NAME}.${region}.${getDnsSuffix(region)}`),\n});\n", "import { AmplifyUrl } from '@aws-amplify/core/internals/utils';\nimport { cognitoUserPoolEndpointResolver } from '../../../foundation/cognitoUserPoolEndpointResolver';\nexport const createCognitoUserPoolEndpointResolver = ({ endpointOverride }) => (input) => {\n    if (endpointOverride) {\n        return { url: new AmplifyUrl(endpointOverride) };\n    }\n    return cognitoUserPoolEndpointResolver(input);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst signInReducer = (state, action) => {\n    switch (action.type) {\n        case 'SET_SIGN_IN_SESSION':\n            return {\n                ...state,\n                signInSession: action.value,\n            };\n        case 'SET_SIGN_IN_STATE':\n            return {\n                ...action.value,\n            };\n        case 'SET_CHALLENGE_NAME':\n            return {\n                ...state,\n                challengeName: action.value,\n            };\n        case 'SET_USERNAME':\n            return {\n                ...state,\n                username: action.value,\n            };\n        case 'SET_INITIAL_STATE':\n            return defaultState();\n        default:\n            return state;\n    }\n};\nfunction defaultState() {\n    return {\n        username: undefined,\n        challengeName: undefined,\n        signInSession: undefined,\n    };\n}\nconst createStore = reducer => {\n    let currentState = reducer(defaultState(), { type: 'SET_INITIAL_STATE' });\n    return {\n        getState: () => currentState,\n        dispatch: action => {\n            currentState = reducer(currentState, action);\n        },\n    };\n};\nexport const signInStore = createStore(signInReducer);\nexport function setActiveSignInState(state) {\n    signInStore.dispatch({\n        type: 'SET_SIGN_IN_STATE',\n        value: state,\n    });\n}\nexport function cleanActiveSignInState() {\n    signInStore.dispatch({ type: 'SET_INITIAL_STATE' });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const textEncoder = {\n    convert(input) {\n        return new TextEncoder().encode(input);\n    },\n};\n", "/* eslint-disable */\n// @ts-nocheck -> BigInteger is already a vended utility\n// A small implementation of BigInteger based on http://www-cs-students.stanford.edu/~tjw/jsbn/\n//\n// All public methods have been removed except the following:\n//   new BigInteger(a, b) (only radix 2, 4, 8, 16 and 32 supported)\n//   toString (only radix 2, 4, 8, 16 and 32 supported)\n//   negate\n//   abs\n//   compareTo\n//   bitLength\n//   mod\n//   equals\n//   add\n//   subtract\n//   multiply\n//   divide\n//   modPow\nexport default BigInteger;\n/*\n * Copyright (c) 2003-2005  Tom Wu\n * All Rights Reserved.\n *\n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS-IS\" AND WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY\n * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.\n *\n * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,\n * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER\n * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF\n * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT\n * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n *\n * In addition, the following condition applies:\n *\n * All redistributions must retain an intact copy of this copyright notice\n * and disclaimer.\n */\n// (public) Constructor\nfunction BigInteger(a, b) {\n    if (a != null)\n        this.fromString(a, b);\n}\n// return new, unset BigInteger\nfunction nbi() {\n    return new BigInteger(null, null);\n}\n// Bits per digit\nlet dbits;\n// JavaScript engine analysis\nconst canary = 0xdeadbeefcafe;\nconst j_lm = (canary & 0xffffff) === 0xefcafe;\n// am: Compute w_j += (x*this_i), propagate carries,\n// c is initial carry, returns final carry.\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\n// We need to select the fastest one that works in this environment.\n// am1: use a single mult and divide to get the high bits,\n// max digit bits should be 26 because\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\nfunction am1(i, x, w, j, c, n) {\n    while (--n >= 0) {\n        const v = x * this[i++] + w[j] + c;\n        c = Math.floor(v / 0x4000000);\n        w[j++] = v & 0x3ffffff;\n    }\n    return c;\n}\n// am2 avoids a big mult-and-extract completely.\n// Max digit bits should be <= 30 because we do bitwise ops\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\nfunction am2(i, x, w, j, c, n) {\n    const xl = x & 0x7fff;\n    const xh = x >> 15;\n    while (--n >= 0) {\n        let l = this[i] & 0x7fff;\n        const h = this[i++] >> 15;\n        const m = xh * l + h * xl;\n        l = xl * l + ((m & 0x7fff) << 15) + w[j] + (c & 0x3fffffff);\n        c = (l >>> 30) + (m >>> 15) + xh * h + (c >>> 30);\n        w[j++] = l & 0x3fffffff;\n    }\n    return c;\n}\n// Alternately, set max digit bits to 28 since some\n// browsers slow down when dealing with 32-bit numbers.\nfunction am3(i, x, w, j, c, n) {\n    const xl = x & 0x3fff;\n    const xh = x >> 14;\n    while (--n >= 0) {\n        let l = this[i] & 0x3fff;\n        const h = this[i++] >> 14;\n        const m = xh * l + h * xl;\n        l = xl * l + ((m & 0x3fff) << 14) + w[j] + c;\n        c = (l >> 28) + (m >> 14) + xh * h;\n        w[j++] = l & 0xfffffff;\n    }\n    return c;\n}\nconst inBrowser = typeof navigator !== 'undefined';\nif (inBrowser && j_lm && navigator.appName === 'Microsoft Internet Explorer') {\n    BigInteger.prototype.am = am2;\n    dbits = 30;\n}\nelse if (inBrowser && j_lm && navigator.appName !== 'Netscape') {\n    BigInteger.prototype.am = am1;\n    dbits = 26;\n}\nelse {\n    // Mozilla/Netscape seems to prefer am3\n    BigInteger.prototype.am = am3;\n    dbits = 28;\n}\nBigInteger.prototype.DB = dbits;\nBigInteger.prototype.DM = (1 << dbits) - 1;\nBigInteger.prototype.DV = 1 << dbits;\nconst BI_FP = 52;\nBigInteger.prototype.FV = Math.pow(2, BI_FP);\nBigInteger.prototype.F1 = BI_FP - dbits;\nBigInteger.prototype.F2 = 2 * dbits - BI_FP;\n// Digit conversions\nconst BI_RM = '0123456789abcdefghijklmnopqrstuvwxyz';\nconst BI_RC = [];\nlet rr, vv;\nrr = '0'.charCodeAt(0);\nfor (vv = 0; vv <= 9; ++vv)\n    BI_RC[rr++] = vv;\nrr = 'a'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv)\n    BI_RC[rr++] = vv;\nrr = 'A'.charCodeAt(0);\nfor (vv = 10; vv < 36; ++vv)\n    BI_RC[rr++] = vv;\nfunction int2char(n) {\n    return BI_RM.charAt(n);\n}\nfunction intAt(s, i) {\n    const c = BI_RC[s.charCodeAt(i)];\n    return c == null ? -1 : c;\n}\n// (protected) copy this to r\nfunction bnpCopyTo(r) {\n    for (let i = this.t - 1; i >= 0; --i)\n        r[i] = this[i];\n    r.t = this.t;\n    r.s = this.s;\n}\n// (protected) set from integer value x, -DV <= x < DV\nfunction bnpFromInt(x) {\n    this.t = 1;\n    this.s = x < 0 ? -1 : 0;\n    if (x > 0)\n        this[0] = x;\n    else if (x < -1)\n        this[0] = x + this.DV;\n    else\n        this.t = 0;\n}\n// return bigint initialized to value\nfunction nbv(i) {\n    const r = nbi();\n    r.fromInt(i);\n    return r;\n}\n// (protected) set from string and radix\nfunction bnpFromString(s, b) {\n    let k;\n    if (b === 16)\n        k = 4;\n    else if (b === 8)\n        k = 3;\n    else if (b === 2)\n        k = 1;\n    else if (b === 32)\n        k = 5;\n    else if (b === 4)\n        k = 2;\n    else\n        throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n    this.t = 0;\n    this.s = 0;\n    let i = s.length;\n    let mi = false;\n    let sh = 0;\n    while (--i >= 0) {\n        const x = intAt(s, i);\n        if (x < 0) {\n            if (s.charAt(i) === '-')\n                mi = true;\n            continue;\n        }\n        mi = false;\n        if (sh === 0)\n            this[this.t++] = x;\n        else if (sh + k > this.DB) {\n            this[this.t - 1] |= (x & ((1 << (this.DB - sh)) - 1)) << sh;\n            this[this.t++] = x >> (this.DB - sh);\n        }\n        else\n            this[this.t - 1] |= x << sh;\n        sh += k;\n        if (sh >= this.DB)\n            sh -= this.DB;\n    }\n    this.clamp();\n    if (mi)\n        BigInteger.ZERO.subTo(this, this);\n}\n// (protected) clamp off excess high words\nfunction bnpClamp() {\n    const c = this.s & this.DM;\n    while (this.t > 0 && this[this.t - 1] == c)\n        --this.t;\n}\n// (public) return string representation in given radix\nfunction bnToString(b) {\n    if (this.s < 0)\n        return '-' + this.negate().toString(b);\n    let k;\n    if (b == 16)\n        k = 4;\n    else if (b === 8)\n        k = 3;\n    else if (b === 2)\n        k = 1;\n    else if (b === 32)\n        k = 5;\n    else if (b === 4)\n        k = 2;\n    else\n        throw new Error('Only radix 2, 4, 8, 16, 32 are supported');\n    const km = (1 << k) - 1;\n    let d;\n    let m = false;\n    let r = '';\n    let i = this.t;\n    let p = this.DB - ((i * this.DB) % k);\n    if (i-- > 0) {\n        if (p < this.DB && (d = this[i] >> p) > 0) {\n            m = true;\n            r = int2char(d);\n        }\n        while (i >= 0) {\n            if (p < k) {\n                d = (this[i] & ((1 << p) - 1)) << (k - p);\n                d |= this[--i] >> (p += this.DB - k);\n            }\n            else {\n                d = (this[i] >> (p -= k)) & km;\n                if (p <= 0) {\n                    p += this.DB;\n                    --i;\n                }\n            }\n            if (d > 0)\n                m = true;\n            if (m)\n                r += int2char(d);\n        }\n    }\n    return m ? r : '0';\n}\n// (public) -this\nfunction bnNegate() {\n    const r = nbi();\n    BigInteger.ZERO.subTo(this, r);\n    return r;\n}\n// (public) |this|\nfunction bnAbs() {\n    return this.s < 0 ? this.negate() : this;\n}\n// (public) return + if this > a, - if this < a, 0 if equal\nfunction bnCompareTo(a) {\n    let r = this.s - a.s;\n    if (r != 0)\n        return r;\n    let i = this.t;\n    r = i - a.t;\n    if (r != 0)\n        return this.s < 0 ? -r : r;\n    while (--i >= 0)\n        if ((r = this[i] - a[i]) != 0)\n            return r;\n    return 0;\n}\n// returns bit length of the integer x\nfunction nbits(x) {\n    let r = 1;\n    let t;\n    if ((t = x >>> 16) !== 0) {\n        x = t;\n        r += 16;\n    }\n    if ((t = x >> 8) !== 0) {\n        x = t;\n        r += 8;\n    }\n    if ((t = x >> 4) !== 0) {\n        x = t;\n        r += 4;\n    }\n    if ((t = x >> 2) !== 0) {\n        x = t;\n        r += 2;\n    }\n    if ((t = x >> 1) !== 0) {\n        x = t;\n        r += 1;\n    }\n    return r;\n}\n// (public) return the number of bits in \"this\"\nfunction bnBitLength() {\n    if (this.t <= 0)\n        return 0;\n    return this.DB * (this.t - 1) + nbits(this[this.t - 1] ^ (this.s & this.DM));\n}\n// (protected) r = this << n*DB\nfunction bnpDLShiftTo(n, r) {\n    let i;\n    for (i = this.t - 1; i >= 0; --i)\n        r[i + n] = this[i];\n    for (i = n - 1; i >= 0; --i)\n        r[i] = 0;\n    r.t = this.t + n;\n    r.s = this.s;\n}\n// (protected) r = this >> n*DB\nfunction bnpDRShiftTo(n, r) {\n    for (let i = n; i < this.t; ++i)\n        r[i - n] = this[i];\n    r.t = Math.max(this.t - n, 0);\n    r.s = this.s;\n}\n// (protected) r = this << n\nfunction bnpLShiftTo(n, r) {\n    const bs = n % this.DB;\n    const cbs = this.DB - bs;\n    const bm = (1 << cbs) - 1;\n    const ds = Math.floor(n / this.DB);\n    let c = (this.s << bs) & this.DM;\n    let i;\n    for (i = this.t - 1; i >= 0; --i) {\n        r[i + ds + 1] = (this[i] >> cbs) | c;\n        c = (this[i] & bm) << bs;\n    }\n    for (i = ds - 1; i >= 0; --i)\n        r[i] = 0;\n    r[ds] = c;\n    r.t = this.t + ds + 1;\n    r.s = this.s;\n    r.clamp();\n}\n// (protected) r = this >> n\nfunction bnpRShiftTo(n, r) {\n    r.s = this.s;\n    const ds = Math.floor(n / this.DB);\n    if (ds >= this.t) {\n        r.t = 0;\n        return;\n    }\n    const bs = n % this.DB;\n    const cbs = this.DB - bs;\n    const bm = (1 << bs) - 1;\n    r[0] = this[ds] >> bs;\n    for (let i = ds + 1; i < this.t; ++i) {\n        r[i - ds - 1] |= (this[i] & bm) << cbs;\n        r[i - ds] = this[i] >> bs;\n    }\n    if (bs > 0)\n        r[this.t - ds - 1] |= (this.s & bm) << cbs;\n    r.t = this.t - ds;\n    r.clamp();\n}\n// (protected) r = this - a\nfunction bnpSubTo(a, r) {\n    let i = 0;\n    let c = 0;\n    const m = Math.min(a.t, this.t);\n    while (i < m) {\n        c += this[i] - a[i];\n        r[i++] = c & this.DM;\n        c >>= this.DB;\n    }\n    if (a.t < this.t) {\n        c -= a.s;\n        while (i < this.t) {\n            c += this[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += this.s;\n    }\n    else {\n        c += this.s;\n        while (i < a.t) {\n            c -= a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c -= a.s;\n    }\n    r.s = c < 0 ? -1 : 0;\n    if (c < -1)\n        r[i++] = this.DV + c;\n    else if (c > 0)\n        r[i++] = c;\n    r.t = i;\n    r.clamp();\n}\n// (protected) r = this * a, r != this,a (HAC 14.12)\n// \"this\" should be the larger one if appropriate.\nfunction bnpMultiplyTo(a, r) {\n    const x = this.abs();\n    const y = a.abs();\n    let i = x.t;\n    r.t = i + y.t;\n    while (--i >= 0)\n        r[i] = 0;\n    for (i = 0; i < y.t; ++i)\n        r[i + x.t] = x.am(0, y[i], r, i, 0, x.t);\n    r.s = 0;\n    r.clamp();\n    if (this.s !== a.s)\n        BigInteger.ZERO.subTo(r, r);\n}\n// (protected) r = this^2, r != this (HAC 14.16)\nfunction bnpSquareTo(r) {\n    const x = this.abs();\n    let i = (r.t = 2 * x.t);\n    while (--i >= 0)\n        r[i] = 0;\n    for (i = 0; i < x.t - 1; ++i) {\n        const c = x.am(i, x[i], r, 2 * i, 0, 1);\n        if ((r[i + x.t] += x.am(i + 1, 2 * x[i], r, 2 * i + 1, c, x.t - i - 1)) >=\n            x.DV) {\n            r[i + x.t] -= x.DV;\n            r[i + x.t + 1] = 1;\n        }\n    }\n    if (r.t > 0)\n        r[r.t - 1] += x.am(i, x[i], r, 2 * i, 0, 1);\n    r.s = 0;\n    r.clamp();\n}\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\n// r != q, this != m.  q or r may be null.\nfunction bnpDivRemTo(m, q, r) {\n    const pm = m.abs();\n    if (pm.t <= 0)\n        return;\n    const pt = this.abs();\n    if (pt.t < pm.t) {\n        if (q != null)\n            q.fromInt(0);\n        if (r != null)\n            this.copyTo(r);\n        return;\n    }\n    if (r === null)\n        r = nbi();\n    const y = nbi();\n    const ts = this.s;\n    const ms = m.s;\n    const nsh = this.DB - nbits(pm[pm.t - 1]);\n    // normalize modulus\n    if (nsh > 0) {\n        pm.lShiftTo(nsh, y);\n        pt.lShiftTo(nsh, r);\n    }\n    else {\n        pm.copyTo(y);\n        pt.copyTo(r);\n    }\n    const ys = y.t;\n    const y0 = y[ys - 1];\n    if (y0 === 0)\n        return;\n    const yt = y0 * (1 << this.F1) + (ys > 1 ? y[ys - 2] >> this.F2 : 0);\n    const d1 = this.FV / yt;\n    const d2 = (1 << this.F1) / yt;\n    const e = 1 << this.F2;\n    let i = r.t;\n    let j = i - ys;\n    const t = q === null ? nbi() : q;\n    y.dlShiftTo(j, t);\n    if (r.compareTo(t) >= 0) {\n        r[r.t++] = 1;\n        r.subTo(t, r);\n    }\n    BigInteger.ONE.dlShiftTo(ys, t);\n    t.subTo(y, y);\n    // \"negative\" y so we can replace sub with am later\n    while (y.t < ys)\n        y[y.t++] = 0;\n    while (--j >= 0) {\n        // Estimate quotient digit\n        let qd = r[--i] === y0 ? this.DM : Math.floor(r[i] * d1 + (r[i - 1] + e) * d2);\n        if ((r[i] += y.am(0, qd, r, j, 0, ys)) < qd) {\n            // Try it out\n            y.dlShiftTo(j, t);\n            r.subTo(t, r);\n            while (r[i] < --qd)\n                r.subTo(t, r);\n        }\n    }\n    if (q !== null) {\n        r.drShiftTo(ys, q);\n        if (ts !== ms)\n            BigInteger.ZERO.subTo(q, q);\n    }\n    r.t = ys;\n    r.clamp();\n    if (nsh > 0)\n        r.rShiftTo(nsh, r);\n    // Denormalize remainder\n    if (ts < 0)\n        BigInteger.ZERO.subTo(r, r);\n}\n// (public) this mod a\nfunction bnMod(a) {\n    const r = nbi();\n    this.abs().divRemTo(a, null, r);\n    if (this.s < 0 && r.compareTo(BigInteger.ZERO) > 0)\n        a.subTo(r, r);\n    return r;\n}\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\n// justification:\n//         xy == 1 (mod m)\n//         xy =  1+km\n//   xy(2-xy) = (1+km)(1-km)\n// x[y(2-xy)] = 1-k^2m^2\n// x[y(2-xy)] == 1 (mod m^2)\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\nfunction bnpInvDigit() {\n    if (this.t < 1)\n        return 0;\n    const x = this[0];\n    if ((x & 1) === 0)\n        return 0;\n    let y = x & 3;\n    // y == 1/x mod 2^2\n    y = (y * (2 - (x & 0xf) * y)) & 0xf;\n    // y == 1/x mod 2^4\n    y = (y * (2 - (x & 0xff) * y)) & 0xff;\n    // y == 1/x mod 2^8\n    y = (y * (2 - (((x & 0xffff) * y) & 0xffff))) & 0xffff;\n    // y == 1/x mod 2^16\n    // last step - calculate inverse mod DV directly;\n    // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\n    y = (y * (2 - ((x * y) % this.DV))) % this.DV;\n    // y == 1/x mod 2^dbits\n    // we really want the negative inverse, and -DV < y < DV\n    return y > 0 ? this.DV - y : -y;\n}\nfunction bnEquals(a) {\n    return this.compareTo(a) === 0;\n}\n// (protected) r = this + a\nfunction bnpAddTo(a, r) {\n    let i = 0;\n    let c = 0;\n    const m = Math.min(a.t, this.t);\n    while (i < m) {\n        c += this[i] + a[i];\n        r[i++] = c & this.DM;\n        c >>= this.DB;\n    }\n    if (a.t < this.t) {\n        c += a.s;\n        while (i < this.t) {\n            c += this[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += this.s;\n    }\n    else {\n        c += this.s;\n        while (i < a.t) {\n            c += a[i];\n            r[i++] = c & this.DM;\n            c >>= this.DB;\n        }\n        c += a.s;\n    }\n    r.s = c < 0 ? -1 : 0;\n    if (c > 0)\n        r[i++] = c;\n    else if (c < -1)\n        r[i++] = this.DV + c;\n    r.t = i;\n    r.clamp();\n}\n// (public) this + a\nfunction bnAdd(a) {\n    const r = nbi();\n    this.addTo(a, r);\n    return r;\n}\n// (public) this - a\nfunction bnSubtract(a) {\n    const r = nbi();\n    this.subTo(a, r);\n    return r;\n}\n// (public) this * a\nfunction bnMultiply(a) {\n    const r = nbi();\n    this.multiplyTo(a, r);\n    return r;\n}\n// (public) this / a\nfunction bnDivide(a) {\n    const r = nbi();\n    this.divRemTo(a, r, null);\n    return r;\n}\n// Montgomery reduction\nfunction Montgomery(m) {\n    this.m = m;\n    this.mp = m.invDigit();\n    this.mpl = this.mp & 0x7fff;\n    this.mph = this.mp >> 15;\n    this.um = (1 << (m.DB - 15)) - 1;\n    this.mt2 = 2 * m.t;\n}\n// xR mod m\nfunction montConvert(x) {\n    const r = nbi();\n    x.abs().dlShiftTo(this.m.t, r);\n    r.divRemTo(this.m, null, r);\n    if (x.s < 0 && r.compareTo(BigInteger.ZERO) > 0)\n        this.m.subTo(r, r);\n    return r;\n}\n// x/R mod m\nfunction montRevert(x) {\n    const r = nbi();\n    x.copyTo(r);\n    this.reduce(r);\n    return r;\n}\n// x = x/R mod m (HAC 14.32)\nfunction montReduce(x) {\n    while (x.t <= this.mt2)\n        // pad x so am has enough room later\n        x[x.t++] = 0;\n    for (let i = 0; i < this.m.t; ++i) {\n        // faster way of calculating u0 = x[i]*mp mod DV\n        let j = x[i] & 0x7fff;\n        const u0 = (j * this.mpl +\n            (((j * this.mph + (x[i] >> 15) * this.mpl) & this.um) << 15)) &\n            x.DM;\n        // use am to combine the multiply-shift-add into one call\n        j = i + this.m.t;\n        x[j] += this.m.am(0, u0, x, i, 0, this.m.t);\n        // propagate carry\n        while (x[j] >= x.DV) {\n            x[j] -= x.DV;\n            x[++j]++;\n        }\n    }\n    x.clamp();\n    x.drShiftTo(this.m.t, x);\n    if (x.compareTo(this.m) >= 0)\n        x.subTo(this.m, x);\n}\n// r = \"x^2/R mod m\"; x != r\nfunction montSqrTo(x, r) {\n    x.squareTo(r);\n    this.reduce(r);\n}\n// r = \"xy/R mod m\"; x,y != r\nfunction montMulTo(x, y, r) {\n    x.multiplyTo(y, r);\n    this.reduce(r);\n}\nMontgomery.prototype.convert = montConvert;\nMontgomery.prototype.revert = montRevert;\nMontgomery.prototype.reduce = montReduce;\nMontgomery.prototype.mulTo = montMulTo;\nMontgomery.prototype.sqrTo = montSqrTo;\n// (public) this^e % m (HAC 14.85)\nfunction bnModPow(e, m, callback) {\n    let i = e.bitLength();\n    let k;\n    let r = nbv(1);\n    const z = new Montgomery(m);\n    if (i <= 0)\n        return r;\n    else if (i < 18)\n        k = 1;\n    else if (i < 48)\n        k = 3;\n    else if (i < 144)\n        k = 4;\n    else if (i < 768)\n        k = 5;\n    else\n        k = 6;\n    // precomputation\n    const g = [];\n    let n = 3;\n    const k1 = k - 1;\n    const km = (1 << k) - 1;\n    g[1] = z.convert(this);\n    if (k > 1) {\n        const g2 = nbi();\n        z.sqrTo(g[1], g2);\n        while (n <= km) {\n            g[n] = nbi();\n            z.mulTo(g2, g[n - 2], g[n]);\n            n += 2;\n        }\n    }\n    let j = e.t - 1;\n    let w;\n    let is1 = true;\n    let r2 = nbi();\n    let t;\n    i = nbits(e[j]) - 1;\n    while (j >= 0) {\n        if (i >= k1)\n            w = (e[j] >> (i - k1)) & km;\n        else {\n            w = (e[j] & ((1 << (i + 1)) - 1)) << (k1 - i);\n            if (j > 0)\n                w |= e[j - 1] >> (this.DB + i - k1);\n        }\n        n = k;\n        while ((w & 1) === 0) {\n            w >>= 1;\n            --n;\n        }\n        if ((i -= n) < 0) {\n            i += this.DB;\n            --j;\n        }\n        if (is1) {\n            // ret == 1, don't bother squaring or multiplying it\n            g[w].copyTo(r);\n            is1 = false;\n        }\n        else {\n            while (n > 1) {\n                z.sqrTo(r, r2);\n                z.sqrTo(r2, r);\n                n -= 2;\n            }\n            if (n > 0)\n                z.sqrTo(r, r2);\n            else {\n                t = r;\n                r = r2;\n                r2 = t;\n            }\n            z.mulTo(r2, g[w], r);\n        }\n        while (j >= 0 && (e[j] & (1 << i)) === 0) {\n            z.sqrTo(r, r2);\n            t = r;\n            r = r2;\n            r2 = t;\n            if (--i < 0) {\n                i = this.DB - 1;\n                --j;\n            }\n        }\n    }\n    const result = z.revert(r);\n    callback(null, result);\n    return result;\n}\n// protected\nBigInteger.prototype.copyTo = bnpCopyTo;\nBigInteger.prototype.fromInt = bnpFromInt;\nBigInteger.prototype.fromString = bnpFromString;\nBigInteger.prototype.clamp = bnpClamp;\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\nBigInteger.prototype.subTo = bnpSubTo;\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\nBigInteger.prototype.squareTo = bnpSquareTo;\nBigInteger.prototype.divRemTo = bnpDivRemTo;\nBigInteger.prototype.invDigit = bnpInvDigit;\nBigInteger.prototype.addTo = bnpAddTo;\n// public\nBigInteger.prototype.toString = bnToString;\nBigInteger.prototype.negate = bnNegate;\nBigInteger.prototype.abs = bnAbs;\nBigInteger.prototype.compareTo = bnCompareTo;\nBigInteger.prototype.bitLength = bnBitLength;\nBigInteger.prototype.mod = bnMod;\nBigInteger.prototype.equals = bnEquals;\nBigInteger.prototype.add = bnAdd;\nBigInteger.prototype.subtract = bnSubtract;\nBigInteger.prototype.multiply = bnMultiply;\nBigInteger.prototype.divide = bnDivide;\nBigInteger.prototype.modPow = bnModPow;\n// \"constants\"\nBigInteger.ZERO = nbv(0);\nBigInteger.ONE = nbv(1);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n/**\n * @internal\n */\nexport const calculateS = async ({ a, g, k, x, B, N, U, }) => {\n    return new Promise((resolve, reject) => {\n        g.modPow(x, N, (outerErr, outerResult) => {\n            if (outerErr) {\n                reject(outerErr);\n                return;\n            }\n            B.subtract(k.multiply(outerResult)).modPow(a.add(U.multiply(x)), N, (innerErr, innerResult) => {\n                if (innerErr) {\n                    reject(innerErr);\n                    return;\n                }\n                resolve(innerResult.mod(N));\n            });\n        });\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const INIT_N = 'FFFFFFFFFFFFFFFFC90FDAA22168C234C4C6628B80DC1CD1' +\n    '29024E088A67CC74020BBEA63B139B22514A08798E3404DD' +\n    'EF9519B3CD3A431B302B0A6DF25F14374FE1356D6D51C245' +\n    'E485B576625E7EC6F44C42E9A637ED6B0BFF5CB6F406B7ED' +\n    'EE386BFB5A899FA5AE9F24117C4B1FE649286651ECE45B3D' +\n    'C2007CB8A163BF0598DA48361C55D39A69163FA8FD24CF5F' +\n    '83655D23DCA3AD961C62F356208552BB9ED529077096966D' +\n    '670C354E4ABC9804F1746C08CA18217C32905E462E36CE3B' +\n    'E39E772C180E86039B2783A2EC07A28FB5C55DF06F4C52C9' +\n    'DE2BCBF6955817183995497CEA956AE515D2261898FA0510' +\n    '15728E5A8AAAC42DAD33170D04507A33A85521ABDF1CBA64' +\n    'ECFB850458DBEF0A8AEA71575D060C7DB3970F85A6E1E4C7' +\n    'ABF5AE8CDB0933D71E8C94E04A25619DCEE3D2261AD2EE6B' +\n    'F12FFA06D98A0864D87602733EC86A64521F2B18177B200C' +\n    'BBE117577A615D6C770988C0BAD946E208E24FA074E5AB31' +\n    '43DB5BFCE0FD108E4B82D120A93AD2CAFFFFFFFFFFFFFFFF';\nexport const SHORT_TO_HEX = {};\nexport const HEX_TO_SHORT = {};\nfor (let i = 0; i < 256; i++) {\n    let encodedByte = i.toString(16).toLowerCase();\n    if (encodedByte.length === 1) {\n        encodedByte = `0${encodedByte}`;\n    }\n    SHORT_TO_HEX[i] = encodedByte;\n    HEX_TO_SHORT[encodedByte] = i;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { HEX_TO_SHORT } from './constants';\n/**\n * Converts a hexadecimal encoded string to a Uint8Array of bytes.\n *\n * @param encoded The hexadecimal encoded string\n */\nexport const getBytesFromHex = (encoded) => {\n    if (encoded.length % 2 !== 0) {\n        throw new Error('Hex encoded strings must have an even number length');\n    }\n    const out = new Uint8Array(encoded.length / 2);\n    for (let i = 0; i < encoded.length; i += 2) {\n        const encodedByte = encoded.slice(i, i + 2).toLowerCase();\n        if (encodedByte in HEX_TO_SHORT) {\n            out[i / 2] = HEX_TO_SHORT[encodedByte];\n        }\n        else {\n            throw new Error(`Cannot decode unrecognized sequence ${encodedByte} as hexadecimal`);\n        }\n    }\n    return out;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { SHORT_TO_HEX } from './constants';\n/**\n * Converts a Uint8Array of binary data to a hexadecimal encoded string.\n *\n * @param bytes The binary data to encode\n */\nexport const getHexFromBytes = (bytes) => {\n    let out = '';\n    for (let i = 0; i < bytes.byteLength; i++) {\n        out += SHORT_TO_HEX[bytes[i]];\n    }\n    return out;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Sha256 } from '@aws-crypto/sha256-js';\nimport { getHexFromBytes } from './getHexFromBytes';\n/**\n * Calculate a hash from a `SourceData`\n * @param {SourceData} data Value to hash.\n * @returns {string} Hex-encoded hash.\n * @private\n */\nexport const getHashFromData = (data) => {\n    const sha256 = new Sha256();\n    sha256.update(data);\n    const hashedData = sha256.digestSync();\n    const hashHexFromUint8 = getHexFromBytes(hashedData);\n    return new Array(64 - hashHexFromUint8.length).join('0') + hashHexFromUint8;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { getBytesFromHex } from './getBytesFromHex';\nimport { getHashFromData } from './getHashFromData';\n/**\n * Calculate a hash from a hex string\n * @param {string} hexStr Value to hash.\n * @returns {string} Hex-encoded hash.\n * @private\n */\nexport const getHashFromHex = (hexStr) => getHashFromData(getBytesFromHex(hexStr));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { BigInteger } from './BigInteger';\n/**\n * Tests if a hex string has it most significant bit set (case-insensitive regex)\n */\nconst HEX_MSB_REGEX = /^[89a-f]/i;\n/**\n * Returns an unambiguous, even-length hex string of the two's complement encoding of an integer.\n *\n * It is compatible with the hex encoding of Java's BigInteger's toByteArray(), wich returns a\n * byte array containing the two's-complement representation of a BigInteger. The array contains\n * the minimum number of bytes required to represent the BigInteger, including at least one sign bit.\n *\n * Examples showing how ambiguity is avoided by left padding with:\n * \t\"00\" (for positive values where the most-significant-bit is set)\n *  \"FF\" (for negative values where the most-significant-bit is set)\n *\n * padHex(bigInteger.fromInt(-236))  === \"FF14\"\n * padHex(bigInteger.fromInt(20))    === \"14\"\n *\n * padHex(bigInteger.fromInt(-200))  === \"FF38\"\n * padHex(bigInteger.fromInt(56))    === \"38\"\n *\n * padHex(bigInteger.fromInt(-20))   === \"EC\"\n * padHex(bigInteger.fromInt(236))   === \"00EC\"\n *\n * padHex(bigInteger.fromInt(-56))   === \"C8\"\n * padHex(bigInteger.fromInt(200))   === \"00C8\"\n *\n * @param {AuthBigInteger} bigInt Number to encode.\n * @returns {String} even-length hex string of the two's complement encoding.\n */\nexport const getPaddedHex = (bigInt) => {\n    if (!(bigInt instanceof BigInteger)) {\n        throw new Error('Not a BigInteger');\n    }\n    const isNegative = bigInt.compareTo(BigInteger.ZERO) < 0;\n    /* Get a hex string for abs(bigInt) */\n    let hexStr = bigInt.abs().toString(16);\n    /* Pad hex to even length if needed */\n    hexStr = hexStr.length % 2 !== 0 ? `0${hexStr}` : hexStr;\n    /* Prepend \"00\" if the most significant bit is set */\n    hexStr = HEX_MSB_REGEX.test(hexStr) ? `00${hexStr}` : hexStr;\n    if (isNegative) {\n        /* Flip the bits of the representation */\n        const invertedNibbles = hexStr\n            .split('')\n            .map((x) => {\n            const invertedNibble = ~parseInt(x, 16) & 0xf;\n            return '0123456789ABCDEF'.charAt(invertedNibble);\n        })\n            .join('');\n        /* After flipping the bits, add one to get the 2's complement representation */\n        const flippedBitsBI = new BigInteger(invertedNibbles, 16).add(BigInteger.ONE);\n        hexStr = flippedBitsBI.toString(16);\n        /*\n        For hex strings starting with 'FF8', 'FF' can be dropped, e.g. 0xFFFF80=0xFF80=0x80=-128\n\n        Any sequence of '1' bits on the left can always be substituted with a single '1' bit\n        without changing the represented value.\n\n        This only happens in the case when the input is 80...00\n        */\n        if (hexStr.toUpperCase().startsWith('FF8')) {\n            hexStr = hexStr.substring(2);\n        }\n    }\n    return hexStr;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { BigInteger } from '../BigInteger';\nimport { getHashFromHex } from '../getHashFromHex';\nimport { getPaddedHex } from '../getPaddedHex';\n/**\n * @internal\n */\nexport const calculateU = ({ A, B, }) => {\n    const U = new BigInteger(getHashFromHex(getPaddedHex(A) + getPaddedHex(B)), 16);\n    if (U.equals(BigInteger.ZERO)) {\n        throw new Error('U cannot be zero.');\n    }\n    return U;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Sha256 } from '@aws-crypto/sha256-js';\n/**\n * Standard HKDF algorithm.\n *\n * @param {Uint8Array} ikm Input key material.\n * @param {Uint8Array} salt Salt value.\n * @param {Uint8Array} info Context and application specific info.\n *\n * @returns {Uint8Array} Strong key material.\n *\n * @internal\n */\nexport const getHkdfKey = (ikm, salt, info) => {\n    const awsCryptoHash = new Sha256(salt);\n    awsCryptoHash.update(ikm);\n    const resultFromAWSCryptoPrk = awsCryptoHash.digestSync();\n    const awsCryptoHashHmac = new Sha256(resultFromAWSCryptoPrk);\n    awsCryptoHashHmac.update(info);\n    const resultFromAWSCryptoHmac = awsCryptoHashHmac.digestSync();\n    const hashHexFromAWSCrypto = resultFromAWSCryptoHmac;\n    return hashHexFromAWSCrypto.slice(0, 16);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { WordArray } from '@aws-amplify/core/internals/utils';\nimport { getBytesFromHex } from './getBytesFromHex';\n/**\n * Returns a Uint8Array with a sequence of random nBytes\n *\n * @param {number} nBytes\n * @returns {Uint8Array} fixed-length sequence of random bytes\n */\nexport const getRandomBytes = (nBytes) => {\n    const str = new WordArray().random(nBytes).toString();\n    return getBytesFromHex(str);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { base64Encoder } from '@aws-amplify/core/internals/utils';\nimport { getRandomBytes } from './getRandomBytes';\n/**\n * Helper function to generate a random string\n * @returns {string} a random value.\n *\n * @internal\n */\nexport const getRandomString = () => base64Encoder.convert(getRandomBytes(40));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../../../errors/AuthError';\nimport { textEncoder } from '../../textEncoder';\nimport { BigInteger } from '../BigInteger';\nimport { calculateS, calculateU } from '../calculate';\nimport { getBytesFromHex } from '../getBytesFromHex';\nimport { getHashFromData } from '../getHashFromData';\nimport { getHashFromHex } from '../getHashFromHex';\nimport { getHexFromBytes } from '../getHexFromBytes';\nimport { getHkdfKey } from '../getHkdfKey';\nimport { getPaddedHex } from '../getPaddedHex';\nimport { getRandomBytes } from '../getRandomBytes';\nimport { getRandomString } from '../getRandomString';\n/** @class */\nexport default class AuthenticationHelper {\n    constructor({ userPoolName, a, g, A, N, }) {\n        this.encoder = textEncoder;\n        this.userPoolName = userPoolName;\n        this.a = a;\n        this.g = g;\n        this.A = A;\n        this.N = N;\n        this.k = new BigInteger(getHashFromHex(`${getPaddedHex(N)}${getPaddedHex(g)}`), 16);\n    }\n    /**\n     * @returns {string} Generated random value included in password hash.\n     */\n    getRandomPassword() {\n        if (!this.randomPassword) {\n            throw new AuthError({\n                name: 'EmptyBigIntegerRandomPassword',\n                message: 'random password is empty',\n            });\n        }\n        return this.randomPassword;\n    }\n    /**\n     * @returns {string} Generated random value included in devices hash.\n     */\n    getSaltToHashDevices() {\n        if (!this.saltToHashDevices) {\n            throw new AuthError({\n                name: 'EmptyBigIntegersaltToHashDevices',\n                message: 'saltToHashDevices is empty',\n            });\n        }\n        return this.saltToHashDevices;\n    }\n    /**\n     * @returns {string} Value used to verify devices.\n     */\n    getVerifierDevices() {\n        if (!this.verifierDevices) {\n            throw new AuthError({\n                name: 'EmptyBigIntegerVerifierDevices',\n                message: 'verifyDevices is empty',\n            });\n        }\n        return this.verifierDevices;\n    }\n    /**\n     * Generate salts and compute verifier.\n     *\n     * @param {string} deviceGroupKey Devices to generate verifier for.\n     * @param {string} username User to generate verifier for.\n     *\n     * @returns {Promise<void>}\n     */\n    async generateHashDevice(deviceGroupKey, username) {\n        this.randomPassword = getRandomString();\n        const combinedString = `${deviceGroupKey}${username}:${this.randomPassword}`;\n        const hashedString = getHashFromData(combinedString);\n        const hexRandom = getHexFromBytes(getRandomBytes(16));\n        // The random hex will be unambiguously represented as a postive integer\n        this.saltToHashDevices = getPaddedHex(new BigInteger(hexRandom, 16));\n        return new Promise((resolve, reject) => {\n            this.g.modPow(new BigInteger(getHashFromHex(this.saltToHashDevices + hashedString), 16), this.N, (err, result) => {\n                if (err) {\n                    reject(err);\n                    return;\n                }\n                this.verifierDevices = getPaddedHex(result);\n                resolve();\n            });\n        });\n    }\n    /**\n     * Calculates the final HKDF key based on computed S value, computed U value and the key\n     *\n     * @param {String} username Username.\n     * @param {String} password Password.\n     * @param {AuthBigInteger} B Server B value.\n     * @param {AuthBigInteger} salt Generated salt.\n     */\n    async getPasswordAuthenticationKey({ username, password, serverBValue, salt, }) {\n        if (serverBValue.mod(this.N).equals(BigInteger.ZERO)) {\n            throw new Error('B cannot be zero.');\n        }\n        const U = calculateU({\n            A: this.A,\n            B: serverBValue,\n        });\n        const usernamePassword = `${this.userPoolName}${username}:${password}`;\n        const usernamePasswordHash = getHashFromData(usernamePassword);\n        const x = new BigInteger(getHashFromHex(getPaddedHex(salt) + usernamePasswordHash), 16);\n        const S = await calculateS({\n            a: this.a,\n            g: this.g,\n            k: this.k,\n            x,\n            B: serverBValue,\n            N: this.N,\n            U,\n        });\n        const context = this.encoder.convert('Caldera Derived Key');\n        const spacer = this.encoder.convert(String.fromCharCode(1));\n        const info = new Uint8Array(context.byteLength + spacer.byteLength);\n        info.set(context, 0);\n        info.set(spacer, context.byteLength);\n        const hkdfKey = getHkdfKey(getBytesFromHex(getPaddedHex(S)), getBytesFromHex(getPaddedHex(U)), info);\n        return hkdfKey;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { BigInteger } from '../BigInteger';\n/**\n * @internal\n */\nexport const calculateA = async ({ a, g, N, }) => {\n    return new Promise((resolve, reject) => {\n        g.modPow(a, N, (err, A) => {\n            if (err) {\n                reject(err);\n                return;\n            }\n            if (A.mod(N).equals(BigInteger.ZERO)) {\n                reject(new Error('Illegal parameter. A mod N cannot be 0.'));\n                return;\n            }\n            resolve(A);\n        });\n    });\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthenticationHelper } from './AuthenticationHelper';\nimport { BigInteger } from './BigInteger';\nimport { calculateA } from './calculate';\nimport { INIT_N } from './constants';\nimport { getHexFromBytes } from './getHexFromBytes';\nimport { getRandomBytes } from './getRandomBytes';\n/**\n * Returns a new {@link AuthenticationHelper} instance with randomly generated BigInteger seed\n *\n * @param userPoolName Cognito user pool name.\n * @returns An {@link AuthenticationHelper} instance.\n *\n * @internal\n */\nexport const getAuthenticationHelper = async (userPoolName) => {\n    const N = new BigInteger(INIT_N, 16);\n    const g = new BigInteger('2', 16);\n    const a = generateRandomBigInteger();\n    const A = await calculateA({ a, g, N });\n    return new AuthenticationHelper({ userPoolName, a, g, A, N });\n};\n/**\n * Generates a random BigInteger.\n *\n * @returns {BigInteger} a random value.\n */\nconst generateRandomBigInteger = () => {\n    // This will be interpreted as a postive 128-bit integer\n    const hexRandom = getHexFromBytes(getRandomBytes(128));\n    // There is no need to do randomBigInt.mod(this.N - 1) as N (3072-bit) is > 128 bytes (1024-bit)\n    return new BigInteger(hexRandom, 16);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst MONTH_NAMES = [\n    'Jan',\n    'Feb',\n    'Mar',\n    'Apr',\n    'May',\n    'Jun',\n    'Jul',\n    'Aug',\n    'Sep',\n    'Oct',\n    'Nov',\n    'Dec',\n];\nconst WEEK_NAMES = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nexport const getNowString = () => {\n    const now = new Date();\n    const weekDay = WEEK_NAMES[now.getUTCDay()];\n    const month = MONTH_NAMES[now.getUTCMonth()];\n    const day = now.getUTCDate();\n    let hours = now.getUTCHours();\n    if (hours < 10) {\n        hours = `0${hours}`;\n    }\n    let minutes = now.getUTCMinutes();\n    if (minutes < 10) {\n        minutes = `0${minutes}`;\n    }\n    let seconds = now.getUTCSeconds();\n    if (seconds < 10) {\n        seconds = `0${seconds}`;\n    }\n    const year = now.getUTCFullYear();\n    // ddd MMM D HH:mm:ss UTC YYYY\n    const dateNow = `${weekDay} ${month} ${day} ${hours}:${minutes}:${seconds} UTC ${year}`;\n    return dateNow;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Sha256 } from '@aws-crypto/sha256-js';\nimport { base64Decoder, base64Encoder, } from '@aws-amplify/core/internals/utils';\nimport { textEncoder } from '../textEncoder';\nexport const getSignatureString = ({ userPoolName, username, challengeParameters, dateNow, hkdf, }) => {\n    const bufUPIDaToB = textEncoder.convert(userPoolName);\n    const bufUNaToB = textEncoder.convert(username);\n    const bufSBaToB = urlB64ToUint8Array(challengeParameters.SECRET_BLOCK);\n    const bufDNaToB = textEncoder.convert(dateNow);\n    const bufConcat = new Uint8Array(bufUPIDaToB.byteLength +\n        bufUNaToB.byteLength +\n        bufSBaToB.byteLength +\n        bufDNaToB.byteLength);\n    bufConcat.set(bufUPIDaToB, 0);\n    bufConcat.set(bufUNaToB, bufUPIDaToB.byteLength);\n    bufConcat.set(bufSBaToB, bufUPIDaToB.byteLength + bufUNaToB.byteLength);\n    bufConcat.set(bufDNaToB, bufUPIDaToB.byteLength + bufUNaToB.byteLength + bufSBaToB.byteLength);\n    const awsCryptoHash = new Sha256(hkdf);\n    awsCryptoHash.update(bufConcat);\n    const resultFromAWSCrypto = awsCryptoHash.digestSync();\n    const signatureString = base64Encoder.convert(resultFromAWSCrypto);\n    return signatureString;\n};\nconst urlB64ToUint8Array = (base64String) => {\n    const padding = '='.repeat((4 - (base64String.length % 4)) % 4);\n    const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');\n    const rawData = base64Decoder.convert(base64);\n    const outputArray = new Uint8Array(rawData.length);\n    for (let i = 0; i < rawData.length; ++i) {\n        outputArray[i] = rawData.charCodeAt(i);\n    }\n    return outputArray;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport function getUserContextData({ username, userPoolId, userPoolClientId, }) {\n    if (typeof window === 'undefined') {\n        return undefined;\n    }\n    const amazonCognitoAdvancedSecurityData = window\n        .AmazonCognitoAdvancedSecurityData;\n    if (typeof amazonCognitoAdvancedSecurityData === 'undefined') {\n        return undefined;\n    }\n    const advancedSecurityData = amazonCognitoAdvancedSecurityData.getData(username, userPoolId, userPoolClientId);\n    if (advancedSecurityData) {\n        const userContextData = {\n            EncodedData: advancedSecurityData,\n        };\n        return userContextData;\n    }\n    return {};\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AmplifyUrl, AuthAction, assertTokenProviderConfig, base64Encoder, getDeviceName, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { InitiateAuthException } from '../types/errors';\nimport { AuthErrorCodes } from '../../../common/AuthErrorStrings';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { USER_ALREADY_AUTHENTICATED_EXCEPTION } from '../../../errors/constants';\nimport { getCurrentUser } from '../apis/getCurrentUser';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createAssociateSoftwareTokenClient, createConfirmDeviceClient, createInitiateAuthClient, createRespondToAuthChallengeClient, createVerifySoftwareTokenClient, } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { signInStore } from './signInStore';\nimport { assertDeviceMetadata } from './types';\nimport { getAuthenticationHelper, getBytesFromHex, getNowString, getSignatureString, } from './srp';\nimport { BigInteger } from './srp/BigInteger';\nimport { getUserContextData } from './userContextData';\nconst USER_ATTRIBUTES = 'userAttributes.';\nexport async function handleCustomChallenge({ challengeResponse, clientMetadata, session, username, config, tokenOrchestrator, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const challengeResponses = {\n        USERNAME: username,\n        ANSWER: challengeResponse,\n    };\n    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);\n    if (deviceMetadata && deviceMetadata.deviceKey) {\n        challengeResponses.DEVICE_KEY = deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        ChallengeName: 'CUSTOM_CHALLENGE',\n        ChallengeResponses: challengeResponses,\n        Session: session,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const response = await respondToAuthChallenge({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, jsonReq);\n    if (response.ChallengeName === 'DEVICE_SRP_AUTH') {\n        return handleDeviceSRPAuth({\n            username,\n            config,\n            clientMetadata,\n            session: response.Session,\n            tokenOrchestrator,\n        });\n    }\n    return response;\n}\nexport async function handleMFASetupChallenge({ challengeResponse, username, clientMetadata, session, deviceName, config, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const challengeResponses = {\n        USERNAME: username,\n    };\n    const verifySoftwareToken = createVerifySoftwareTokenClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { Session } = await verifySoftwareToken({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, {\n        UserCode: challengeResponse,\n        Session: session,\n        FriendlyDeviceName: deviceName,\n    });\n    signInStore.dispatch({\n        type: 'SET_SIGN_IN_SESSION',\n        value: Session,\n    });\n    const jsonReq = {\n        ChallengeName: 'MFA_SETUP',\n        ChallengeResponses: challengeResponses,\n        Session,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({ region: getRegionFromUserPoolId(userPoolId) }, jsonReq);\n}\nexport async function handleSelectMFATypeChallenge({ challengeResponse, username, clientMetadata, session, config, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    assertValidationError(challengeResponse === 'TOTP' || challengeResponse === 'SMS', AuthValidationErrorCode.IncorrectMFAMethod);\n    const challengeResponses = {\n        USERNAME: username,\n        ANSWER: mapMfaType(challengeResponse),\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        ChallengeName: 'SELECT_MFA_TYPE',\n        ChallengeResponses: challengeResponses,\n        Session: session,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, jsonReq);\n}\nexport async function handleSMSMFAChallenge({ challengeResponse, clientMetadata, session, username, config, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const challengeResponses = {\n        USERNAME: username,\n        SMS_MFA_CODE: challengeResponse,\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        ChallengeName: 'SMS_MFA',\n        ChallengeResponses: challengeResponses,\n        Session: session,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, jsonReq);\n}\nexport async function handleSoftwareTokenMFAChallenge({ challengeResponse, clientMetadata, session, username, config, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const challengeResponses = {\n        USERNAME: username,\n        SOFTWARE_TOKEN_MFA_CODE: challengeResponse,\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        ChallengeName: 'SOFTWARE_TOKEN_MFA',\n        ChallengeResponses: challengeResponses,\n        Session: session,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, jsonReq);\n}\nexport async function handleCompleteNewPasswordChallenge({ challengeResponse, clientMetadata, session, username, requiredAttributes, config, }) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const challengeResponses = {\n        ...createAttributes(requiredAttributes),\n        NEW_PASSWORD: challengeResponse,\n        USERNAME: username,\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        ChallengeName: 'NEW_PASSWORD_REQUIRED',\n        ChallengeResponses: challengeResponses,\n        ClientMetadata: clientMetadata,\n        Session: session,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignIn),\n    }, jsonReq);\n}\nexport async function handleUserPasswordAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {\n    const { userPoolClientId, userPoolId, userPoolEndpoint } = config;\n    const authParameters = {\n        USERNAME: username,\n        PASSWORD: password,\n    };\n    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);\n    if (deviceMetadata && deviceMetadata.deviceKey) {\n        authParameters.DEVICE_KEY = deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        AuthFlow: 'USER_PASSWORD_AUTH',\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const response = await initiateAuth({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SignIn),\n    }, jsonReq);\n    const activeUsername = response.ChallengeParameters?.USERNAME ??\n        response.ChallengeParameters?.USER_ID_FOR_SRP ??\n        username;\n    setActiveSignInUsername(activeUsername);\n    if (response.ChallengeName === 'DEVICE_SRP_AUTH')\n        return handleDeviceSRPAuth({\n            username: activeUsername,\n            config,\n            clientMetadata,\n            session: response.Session,\n            tokenOrchestrator,\n        });\n    return response;\n}\nexport async function handleUserSRPAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const userPoolName = userPoolId?.split('_')[1] || '';\n    const authenticationHelper = await getAuthenticationHelper(userPoolName);\n    const authParameters = {\n        USERNAME: username,\n        SRP_A: authenticationHelper.A.toString(16),\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        AuthFlow: 'USER_SRP_AUTH',\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const resp = await initiateAuth({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SignIn),\n    }, jsonReq);\n    const { ChallengeParameters: challengeParameters, Session: session } = resp;\n    const activeUsername = challengeParameters?.USERNAME ?? username;\n    setActiveSignInUsername(activeUsername);\n    return retryOnResourceNotFoundException(handlePasswordVerifierChallenge, [\n        password,\n        challengeParameters,\n        clientMetadata,\n        session,\n        authenticationHelper,\n        config,\n        tokenOrchestrator,\n    ], activeUsername, tokenOrchestrator);\n}\nexport async function handleCustomAuthFlowWithoutSRP(username, clientMetadata, config, tokenOrchestrator) {\n    const { userPoolClientId, userPoolId, userPoolEndpoint } = config;\n    const authParameters = {\n        USERNAME: username,\n    };\n    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);\n    if (deviceMetadata && deviceMetadata.deviceKey) {\n        authParameters.DEVICE_KEY = deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        AuthFlow: 'CUSTOM_AUTH',\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const response = await initiateAuth({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SignIn),\n    }, jsonReq);\n    const activeUsername = response.ChallengeParameters?.USERNAME ?? username;\n    setActiveSignInUsername(activeUsername);\n    if (response.ChallengeName === 'DEVICE_SRP_AUTH')\n        return handleDeviceSRPAuth({\n            username: activeUsername,\n            config,\n            clientMetadata,\n            session: response.Session,\n            tokenOrchestrator,\n        });\n    return response;\n}\nexport async function handleCustomSRPAuthFlow(username, password, clientMetadata, config, tokenOrchestrator) {\n    assertTokenProviderConfig(config);\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const userPoolName = userPoolId?.split('_')[1] || '';\n    const authenticationHelper = await getAuthenticationHelper(userPoolName);\n    const authParameters = {\n        USERNAME: username,\n        SRP_A: authenticationHelper.A.toString(16),\n        CHALLENGE_NAME: 'SRP_A',\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReq = {\n        AuthFlow: 'CUSTOM_AUTH',\n        AuthParameters: authParameters,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { ChallengeParameters: challengeParameters, Session: session } = await initiateAuth({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SignIn),\n    }, jsonReq);\n    const activeUsername = challengeParameters?.USERNAME ?? username;\n    setActiveSignInUsername(activeUsername);\n    return retryOnResourceNotFoundException(handlePasswordVerifierChallenge, [\n        password,\n        challengeParameters,\n        clientMetadata,\n        session,\n        authenticationHelper,\n        config,\n        tokenOrchestrator,\n    ], activeUsername, tokenOrchestrator);\n}\nasync function handleDeviceSRPAuth({ username, config, clientMetadata, session, tokenOrchestrator, }) {\n    const { userPoolId, userPoolEndpoint } = config;\n    const clientId = config.userPoolClientId;\n    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);\n    assertDeviceMetadata(deviceMetadata);\n    const authenticationHelper = await getAuthenticationHelper(deviceMetadata.deviceGroupKey);\n    const challengeResponses = {\n        USERNAME: username,\n        SRP_A: authenticationHelper.A.toString(16),\n        DEVICE_KEY: deviceMetadata.deviceKey,\n    };\n    const jsonReqResponseChallenge = {\n        ChallengeName: 'DEVICE_SRP_AUTH',\n        ClientId: clientId,\n        ChallengeResponses: challengeResponses,\n        ClientMetadata: clientMetadata,\n        Session: session,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { ChallengeParameters: respondedChallengeParameters, Session } = await respondToAuthChallenge({ region: getRegionFromUserPoolId(userPoolId) }, jsonReqResponseChallenge);\n    return handleDevicePasswordVerifier(username, respondedChallengeParameters, clientMetadata, Session, authenticationHelper, config, tokenOrchestrator);\n}\nasync function handleDevicePasswordVerifier(username, challengeParameters, clientMetadata, session, authenticationHelper, { userPoolId, userPoolClientId, userPoolEndpoint }, tokenOrchestrator) {\n    const deviceMetadata = await tokenOrchestrator?.getDeviceMetadata(username);\n    assertDeviceMetadata(deviceMetadata);\n    const serverBValue = new BigInteger(challengeParameters?.SRP_B, 16);\n    const salt = new BigInteger(challengeParameters?.SALT, 16);\n    const { deviceKey } = deviceMetadata;\n    const { deviceGroupKey } = deviceMetadata;\n    const hkdf = await authenticationHelper.getPasswordAuthenticationKey({\n        username: deviceMetadata.deviceKey,\n        password: deviceMetadata.randomPassword,\n        serverBValue,\n        salt,\n    });\n    const dateNow = getNowString();\n    const challengeResponses = {\n        USERNAME: challengeParameters?.USERNAME ?? username,\n        PASSWORD_CLAIM_SECRET_BLOCK: challengeParameters?.SECRET_BLOCK,\n        TIMESTAMP: dateNow,\n        PASSWORD_CLAIM_SIGNATURE: getSignatureString({\n            username: deviceKey,\n            userPoolName: deviceGroupKey,\n            challengeParameters,\n            dateNow,\n            hkdf,\n        }),\n        DEVICE_KEY: deviceKey,\n    };\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReqResponseChallenge = {\n        ChallengeName: 'DEVICE_PASSWORD_VERIFIER',\n        ClientId: userPoolClientId,\n        ChallengeResponses: challengeResponses,\n        Session: session,\n        ClientMetadata: clientMetadata,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    return respondToAuthChallenge({ region: getRegionFromUserPoolId(userPoolId) }, jsonReqResponseChallenge);\n}\nexport async function handlePasswordVerifierChallenge(password, challengeParameters, clientMetadata, session, authenticationHelper, config, tokenOrchestrator) {\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = config;\n    const userPoolName = userPoolId?.split('_')[1] || '';\n    const serverBValue = new BigInteger(challengeParameters?.SRP_B, 16);\n    const salt = new BigInteger(challengeParameters?.SALT, 16);\n    const username = challengeParameters?.USER_ID_FOR_SRP;\n    if (!username)\n        throw new AuthError({\n            name: 'EmptyUserIdForSRPException',\n            message: 'USER_ID_FOR_SRP was not found in challengeParameters',\n        });\n    const hkdf = await authenticationHelper.getPasswordAuthenticationKey({\n        username,\n        password,\n        serverBValue,\n        salt,\n    });\n    const dateNow = getNowString();\n    const challengeResponses = {\n        USERNAME: username,\n        PASSWORD_CLAIM_SECRET_BLOCK: challengeParameters?.SECRET_BLOCK,\n        TIMESTAMP: dateNow,\n        PASSWORD_CLAIM_SIGNATURE: getSignatureString({\n            username,\n            userPoolName,\n            challengeParameters,\n            dateNow,\n            hkdf,\n        }),\n    };\n    const deviceMetadata = await tokenOrchestrator.getDeviceMetadata(username);\n    if (deviceMetadata && deviceMetadata.deviceKey) {\n        challengeResponses.DEVICE_KEY = deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const jsonReqResponseChallenge = {\n        ChallengeName: 'PASSWORD_VERIFIER',\n        ChallengeResponses: challengeResponses,\n        ClientMetadata: clientMetadata,\n        Session: session,\n        ClientId: userPoolClientId,\n        UserContextData,\n    };\n    const respondToAuthChallenge = createRespondToAuthChallengeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const response = await respondToAuthChallenge({ region: getRegionFromUserPoolId(userPoolId) }, jsonReqResponseChallenge);\n    if (response.ChallengeName === 'DEVICE_SRP_AUTH')\n        return handleDeviceSRPAuth({\n            username,\n            config,\n            clientMetadata,\n            session: response.Session,\n            tokenOrchestrator,\n        });\n    return response;\n}\nexport async function getSignInResult(params) {\n    const { challengeName, challengeParameters } = params;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    switch (challengeName) {\n        case 'CUSTOM_CHALLENGE':\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONFIRM_SIGN_IN_WITH_CUSTOM_CHALLENGE',\n                    additionalInfo: challengeParameters,\n                },\n            };\n        case 'MFA_SETUP': {\n            const { signInSession, username } = signInStore.getState();\n            if (!isMFATypeEnabled(challengeParameters, 'TOTP'))\n                throw new AuthError({\n                    name: AuthErrorCodes.SignInException,\n                    message: `Cannot initiate MFA setup from available types: ${getMFATypes(parseMFATypes(challengeParameters.MFAS_CAN_SETUP))}`,\n                });\n            const associateSoftwareToken = createAssociateSoftwareTokenClient({\n                endpointResolver: createCognitoUserPoolEndpointResolver({\n                    endpointOverride: authConfig.userPoolEndpoint,\n                }),\n            });\n            const { Session, SecretCode: secretCode } = await associateSoftwareToken({ region: getRegionFromUserPoolId(authConfig.userPoolId) }, {\n                Session: signInSession,\n            });\n            signInStore.dispatch({\n                type: 'SET_SIGN_IN_SESSION',\n                value: Session,\n            });\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONTINUE_SIGN_IN_WITH_TOTP_SETUP',\n                    totpSetupDetails: getTOTPSetupDetails(secretCode, username),\n                },\n            };\n        }\n        case 'NEW_PASSWORD_REQUIRED':\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONFIRM_SIGN_IN_WITH_NEW_PASSWORD_REQUIRED',\n                    missingAttributes: parseAttributes(challengeParameters.requiredAttributes),\n                },\n            };\n        case 'SELECT_MFA_TYPE':\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONTINUE_SIGN_IN_WITH_MFA_SELECTION',\n                    allowedMFATypes: getMFATypes(parseMFATypes(challengeParameters.MFAS_CAN_CHOOSE)),\n                },\n            };\n        case 'SMS_MFA':\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONFIRM_SIGN_IN_WITH_SMS_CODE',\n                    codeDeliveryDetails: {\n                        deliveryMedium: challengeParameters.CODE_DELIVERY_DELIVERY_MEDIUM,\n                        destination: challengeParameters.CODE_DELIVERY_DESTINATION,\n                    },\n                },\n            };\n        case 'SOFTWARE_TOKEN_MFA':\n            return {\n                isSignedIn: false,\n                nextStep: {\n                    signInStep: 'CONFIRM_SIGN_IN_WITH_TOTP_CODE',\n                },\n            };\n        case 'ADMIN_NO_SRP_AUTH':\n            break;\n        case 'DEVICE_PASSWORD_VERIFIER':\n            break;\n        case 'DEVICE_SRP_AUTH':\n            break;\n        case 'PASSWORD_VERIFIER':\n            break;\n    }\n    // TODO: remove this error message for production apps\n    throw new AuthError({\n        name: AuthErrorCodes.SignInException,\n        message: 'An error occurred during the sign in process. ' +\n            `${challengeName} challengeName returned by the underlying service was not addressed.`,\n    });\n}\nexport function getTOTPSetupDetails(secretCode, username) {\n    return {\n        sharedSecret: secretCode,\n        getSetupUri: (appName, accountName) => {\n            const totpUri = `otpauth://totp/${appName}:${accountName ?? username}?secret=${secretCode}&issuer=${appName}`;\n            return new AmplifyUrl(totpUri);\n        },\n    };\n}\nexport function getSignInResultFromError(errorName) {\n    if (errorName === InitiateAuthException.PasswordResetRequiredException) {\n        return {\n            isSignedIn: false,\n            nextStep: { signInStep: 'RESET_PASSWORD' },\n        };\n    }\n    else if (errorName === InitiateAuthException.UserNotConfirmedException) {\n        return {\n            isSignedIn: false,\n            nextStep: { signInStep: 'CONFIRM_SIGN_UP' },\n        };\n    }\n}\nexport function parseAttributes(attributes) {\n    if (!attributes)\n        return [];\n    const parsedAttributes = JSON.parse(attributes).map(att => att.includes(USER_ATTRIBUTES) ? att.replace(USER_ATTRIBUTES, '') : att);\n    return parsedAttributes;\n}\nexport function createAttributes(attributes) {\n    if (!attributes)\n        return {};\n    const newAttributes = {};\n    Object.entries(attributes).forEach(([key, value]) => {\n        if (value)\n            newAttributes[`${USER_ATTRIBUTES}${key}`] = value;\n    });\n    return newAttributes;\n}\nexport async function handleChallengeName(username, challengeName, session, challengeResponse, config, tokenOrchestrator, clientMetadata, options) {\n    const userAttributes = options?.userAttributes;\n    const deviceName = options?.friendlyDeviceName;\n    switch (challengeName) {\n        case 'SMS_MFA':\n            return handleSMSMFAChallenge({\n                challengeResponse,\n                clientMetadata,\n                session,\n                username,\n                config,\n            });\n        case 'SELECT_MFA_TYPE':\n            return handleSelectMFATypeChallenge({\n                challengeResponse,\n                clientMetadata,\n                session,\n                username,\n                config,\n            });\n        case 'MFA_SETUP':\n            return handleMFASetupChallenge({\n                challengeResponse,\n                clientMetadata,\n                session,\n                username,\n                deviceName,\n                config,\n            });\n        case 'NEW_PASSWORD_REQUIRED':\n            return handleCompleteNewPasswordChallenge({\n                challengeResponse,\n                clientMetadata,\n                session,\n                username,\n                requiredAttributes: userAttributes,\n                config,\n            });\n        case 'CUSTOM_CHALLENGE':\n            return retryOnResourceNotFoundException(handleCustomChallenge, [\n                {\n                    challengeResponse,\n                    clientMetadata,\n                    session,\n                    username,\n                    config,\n                    tokenOrchestrator,\n                },\n            ], username, tokenOrchestrator);\n        case 'SOFTWARE_TOKEN_MFA':\n            return handleSoftwareTokenMFAChallenge({\n                challengeResponse,\n                clientMetadata,\n                session,\n                username,\n                config,\n            });\n    }\n    // TODO: remove this error message for production apps\n    throw new AuthError({\n        name: AuthErrorCodes.SignInException,\n        message: `An error occurred during the sign in process. \n\t\t${challengeName} challengeName returned by the underlying service was not addressed.`,\n    });\n}\nexport function mapMfaType(mfa) {\n    let mfaType = 'SMS_MFA';\n    if (mfa === 'TOTP')\n        mfaType = 'SOFTWARE_TOKEN_MFA';\n    return mfaType;\n}\nexport function getMFAType(type) {\n    if (type === 'SMS_MFA')\n        return 'SMS';\n    if (type === 'SOFTWARE_TOKEN_MFA')\n        return 'TOTP';\n    // TODO: log warning for unknown MFA type\n}\nexport function getMFATypes(types) {\n    if (!types)\n        return undefined;\n    return types.map(getMFAType).filter(Boolean);\n}\nexport function parseMFATypes(mfa) {\n    if (!mfa)\n        return [];\n    return JSON.parse(mfa);\n}\nexport function isMFATypeEnabled(challengeParams, mfaType) {\n    const { MFAS_CAN_SETUP } = challengeParams;\n    const mfaTypes = getMFATypes(parseMFATypes(MFAS_CAN_SETUP));\n    if (!mfaTypes)\n        return false;\n    return mfaTypes.includes(mfaType);\n}\nexport async function assertUserNotAuthenticated() {\n    let authUser;\n    try {\n        authUser = await getCurrentUser();\n    }\n    catch (error) { }\n    if (authUser && authUser.userId && authUser.username) {\n        throw new AuthError({\n            name: USER_ALREADY_AUTHENTICATED_EXCEPTION,\n            message: 'There is already a signed in user.',\n            recoverySuggestion: 'Call signOut before calling signIn again.',\n        });\n    }\n}\n/**\n * This function is used to kick off the device management flow.\n *\n * If an error is thrown while generating a hash device or calling the `ConfirmDevice`\n * client, then this API will ignore the error and return undefined. Otherwise the authentication\n * flow will not complete and the user won't be able to be signed in.\n *\n * @returns DeviceMetadata | undefined\n */\nexport async function getNewDeviceMetadata({ userPoolId, userPoolEndpoint, newDeviceMetadata, accessToken, }) {\n    if (!newDeviceMetadata)\n        return undefined;\n    const userPoolName = userPoolId.split('_')[1] || '';\n    const authenticationHelper = await getAuthenticationHelper(userPoolName);\n    const deviceKey = newDeviceMetadata?.DeviceKey;\n    const deviceGroupKey = newDeviceMetadata?.DeviceGroupKey;\n    try {\n        await authenticationHelper.generateHashDevice(deviceGroupKey ?? '', deviceKey ?? '');\n    }\n    catch (errGenHash) {\n        // TODO: log error here\n        return undefined;\n    }\n    const deviceSecretVerifierConfig = {\n        Salt: base64Encoder.convert(getBytesFromHex(authenticationHelper.getSaltToHashDevices())),\n        PasswordVerifier: base64Encoder.convert(getBytesFromHex(authenticationHelper.getVerifierDevices())),\n    };\n    const randomPassword = authenticationHelper.getRandomPassword();\n    try {\n        const confirmDevice = createConfirmDeviceClient({\n            endpointResolver: createCognitoUserPoolEndpointResolver({\n                endpointOverride: userPoolEndpoint,\n            }),\n        });\n        await confirmDevice({ region: getRegionFromUserPoolId(userPoolId) }, {\n            AccessToken: accessToken,\n            DeviceName: await getDeviceName(),\n            DeviceKey: newDeviceMetadata?.DeviceKey,\n            DeviceSecretVerifierConfig: deviceSecretVerifierConfig,\n        });\n        return {\n            deviceKey,\n            deviceGroupKey,\n            randomPassword,\n        };\n    }\n    catch (error) {\n        // TODO: log error here\n        return undefined;\n    }\n}\n/**\n * It will retry the function if the error is a `ResourceNotFoundException` and\n * will clean the device keys stored in the storage mechanism.\n *\n */\nexport async function retryOnResourceNotFoundException(func, args, username, tokenOrchestrator) {\n    try {\n        return await func(...args);\n    }\n    catch (error) {\n        if (error instanceof AuthError &&\n            error.name === 'ResourceNotFoundException' &&\n            error.message.includes('Device does not exist.')) {\n            await tokenOrchestrator.clearDeviceMetadata(username);\n            return func(...args);\n        }\n        throw error;\n    }\n}\nexport function setActiveSignInUsername(username) {\n    const { dispatch } = signInStore;\n    dispatch({ type: 'SET_USERNAME', value: username });\n}\nexport function getActiveSignInUsername(username) {\n    const state = signInStore.getState();\n    return state.username ?? username;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig, deDupeAsyncFunction, decodeJWT, } from '@aws-amplify/core/internals/utils';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokensWithRefreshToken } from '../utils/types';\nimport { AuthError } from '../../../errors/AuthError';\nimport { createInitiateAuthClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { getUserContextData } from './userContextData';\nconst refreshAuthTokensFunction = async ({ tokens, authConfig, username, }) => {\n    assertTokenProviderConfig(authConfig?.Cognito);\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig.Cognito;\n    const region = getRegionFromUserPoolId(userPoolId);\n    assertAuthTokensWithRefreshToken(tokens);\n    const refreshTokenString = tokens.refreshToken;\n    const AuthParameters = {\n        REFRESH_TOKEN: refreshTokenString,\n    };\n    if (tokens.deviceMetadata?.deviceKey) {\n        AuthParameters.DEVICE_KEY = tokens.deviceMetadata.deviceKey;\n    }\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const initiateAuth = createInitiateAuthClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { AuthenticationResult } = await initiateAuth({ region }, {\n        ClientId: userPoolClientId,\n        AuthFlow: 'REFRESH_TOKEN_AUTH',\n        AuthParameters,\n        UserContextData,\n    });\n    const accessToken = decodeJWT(AuthenticationResult?.AccessToken ?? '');\n    const idToken = AuthenticationResult?.IdToken\n        ? decodeJWT(AuthenticationResult.IdToken)\n        : undefined;\n    const { iat } = accessToken.payload;\n    // This should never happen. If it does, it's a bug from the service.\n    if (!iat) {\n        throw new AuthError({\n            name: 'iatNotFoundException',\n            message: 'iat not found in access token',\n        });\n    }\n    const clockDrift = iat * 1000 - new Date().getTime();\n    return {\n        accessToken,\n        idToken,\n        clockDrift,\n        refreshToken: refreshTokenString,\n        username,\n    };\n};\nexport const refreshAuthTokens = deDupeAsyncFunction(refreshAuthTokensFunction);\nexport const refreshAuthTokensWithoutDedupe = refreshAuthTokensFunction;\n", "export const AuthTokenStorageKeys = {\n    accessToken: 'accessToken',\n    idToken: 'idToken',\n    oidcProvider: 'oidcProvider',\n    clockDrift: 'clockDrift',\n    refreshToken: 'refreshToken',\n    deviceKey: 'deviceKey',\n    randomPasswordKey: 'randomPasswordKey',\n    deviceGroupKey: 'deviceGroupKey',\n    signInDetails: 'signInDetails',\n    oauthMetadata: 'oauthMetadata',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createAssertionFunction, } from '@aws-amplify/core/internals/utils';\nexport var TokenProviderErrorCode;\n(function (TokenProviderErrorCode) {\n    TokenProviderErrorCode[\"InvalidAuthTokens\"] = \"InvalidAuthTokens\";\n})(TokenProviderErrorCode || (TokenProviderErrorCode = {}));\nconst tokenValidationErrorMap = {\n    [TokenProviderErrorCode.InvalidAuthTokens]: {\n        message: 'Invalid tokens.',\n        recoverySuggestion: 'Make sure the tokens are valid.',\n    },\n};\nexport const assert = createAssertionFunction(tokenValidationErrorMap);\n", "import { assertTokenProviderConfig, decodeJWT, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { AuthTokenStorageKeys, } from './types';\nimport { TokenProviderErrorCode, assert } from './errorHelpers';\nexport class DefaultTokenStore {\n    constructor() {\n        this.name = 'CognitoIdentityServiceProvider'; // To be backwards compatible with V5, no migration needed\n    }\n    getKeyValueStorage() {\n        if (!this.keyValueStorage) {\n            throw new AuthError({\n                name: 'KeyValueStorageNotFoundException',\n                message: 'KeyValueStorage was not found in TokenStore',\n            });\n        }\n        return this.keyValueStorage;\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    setAuthConfig(authConfig) {\n        this.authConfig = authConfig;\n    }\n    async loadTokens() {\n        // TODO(v6): migration logic should be here\n        // Reading V5 tokens old format\n        try {\n            const authKeys = await this.getAuthKeys();\n            const accessTokenString = await this.getKeyValueStorage().getItem(authKeys.accessToken);\n            if (!accessTokenString) {\n                throw new AuthError({\n                    name: 'NoSessionFoundException',\n                    message: 'Auth session was not found. Make sure to call signIn.',\n                });\n            }\n            const accessToken = decodeJWT(accessTokenString);\n            const itString = await this.getKeyValueStorage().getItem(authKeys.idToken);\n            const idToken = itString ? decodeJWT(itString) : undefined;\n            const refreshToken = (await this.getKeyValueStorage().getItem(authKeys.refreshToken)) ??\n                undefined;\n            const clockDriftString = (await this.getKeyValueStorage().getItem(authKeys.clockDrift)) ?? '0';\n            const clockDrift = Number.parseInt(clockDriftString);\n            const signInDetails = await this.getKeyValueStorage().getItem(authKeys.signInDetails);\n            const tokens = {\n                accessToken,\n                idToken,\n                refreshToken,\n                deviceMetadata: (await this.getDeviceMetadata()) ?? undefined,\n                clockDrift,\n                username: await this.getLastAuthUser(),\n            };\n            if (signInDetails) {\n                tokens.signInDetails = JSON.parse(signInDetails);\n            }\n            return tokens;\n        }\n        catch (err) {\n            return null;\n        }\n    }\n    async storeTokens(tokens) {\n        assert(tokens !== undefined, TokenProviderErrorCode.InvalidAuthTokens);\n        await this.clearTokens();\n        const lastAuthUser = tokens.username;\n        await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(), lastAuthUser);\n        const authKeys = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(authKeys.accessToken, tokens.accessToken.toString());\n        if (tokens.idToken) {\n            await this.getKeyValueStorage().setItem(authKeys.idToken, tokens.idToken.toString());\n        }\n        if (tokens.refreshToken) {\n            await this.getKeyValueStorage().setItem(authKeys.refreshToken, tokens.refreshToken);\n        }\n        if (tokens.deviceMetadata) {\n            if (tokens.deviceMetadata.deviceKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceKey, tokens.deviceMetadata.deviceKey);\n            }\n            if (tokens.deviceMetadata.deviceGroupKey) {\n                await this.getKeyValueStorage().setItem(authKeys.deviceGroupKey, tokens.deviceMetadata.deviceGroupKey);\n            }\n            await this.getKeyValueStorage().setItem(authKeys.randomPasswordKey, tokens.deviceMetadata.randomPassword);\n        }\n        if (tokens.signInDetails) {\n            await this.getKeyValueStorage().setItem(authKeys.signInDetails, JSON.stringify(tokens.signInDetails));\n        }\n        await this.getKeyValueStorage().setItem(authKeys.clockDrift, `${tokens.clockDrift}`);\n    }\n    async clearTokens() {\n        const authKeys = await this.getAuthKeys();\n        // Not calling clear because it can remove data that is not managed by AuthTokenStore\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.accessToken),\n            this.getKeyValueStorage().removeItem(authKeys.idToken),\n            this.getKeyValueStorage().removeItem(authKeys.clockDrift),\n            this.getKeyValueStorage().removeItem(authKeys.refreshToken),\n            this.getKeyValueStorage().removeItem(authKeys.signInDetails),\n            this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),\n            this.getKeyValueStorage().removeItem(authKeys.oauthMetadata),\n        ]);\n    }\n    async getDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        const deviceKey = await this.getKeyValueStorage().getItem(authKeys.deviceKey);\n        const deviceGroupKey = await this.getKeyValueStorage().getItem(authKeys.deviceGroupKey);\n        const randomPassword = await this.getKeyValueStorage().getItem(authKeys.randomPasswordKey);\n        return randomPassword && deviceGroupKey && deviceKey\n            ? {\n                deviceKey,\n                deviceGroupKey,\n                randomPassword,\n            }\n            : null;\n    }\n    async clearDeviceMetadata(username) {\n        const authKeys = await this.getAuthKeys(username);\n        await Promise.all([\n            this.getKeyValueStorage().removeItem(authKeys.deviceKey),\n            this.getKeyValueStorage().removeItem(authKeys.deviceGroupKey),\n            this.getKeyValueStorage().removeItem(authKeys.randomPasswordKey),\n        ]);\n    }\n    async getAuthKeys(username) {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const lastAuthUser = username ?? (await this.getLastAuthUser());\n        return createKeysForAuthStorage(this.name, `${this.authConfig.Cognito.userPoolClientId}.${lastAuthUser}`);\n    }\n    getLastAuthUserKey() {\n        assertTokenProviderConfig(this.authConfig?.Cognito);\n        const identifier = this.authConfig.Cognito.userPoolClientId;\n        return `${this.name}.${identifier}.LastAuthUser`;\n    }\n    async getLastAuthUser() {\n        const lastAuthUser = (await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())) ??\n            'username';\n        return lastAuthUser;\n    }\n    async setOAuthMetadata(metadata) {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        await this.getKeyValueStorage().setItem(oauthMetadataKey, JSON.stringify(metadata));\n    }\n    async getOAuthMetadata() {\n        const { oauthMetadata: oauthMetadataKey } = await this.getAuthKeys();\n        const oauthMetadata = await this.getKeyValueStorage().getItem(oauthMetadataKey);\n        return oauthMetadata && JSON.parse(oauthMetadata);\n    }\n}\nexport const createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(AuthTokenStorageKeys)(`${provider}`, identifier);\n};\nexport function getAuthStorageKeys(authKeys) {\n    const keys = Object.values({ ...authKeys });\n    return (prefix, identifier) => keys.reduce((acc, authKey) => ({\n        ...acc,\n        [authKey]: `${prefix}.${identifier}.${authKey}`,\n    }), {});\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore';\nimport { OAuthStorageKeys } from './types';\nconst V5_HOSTED_UI_KEY = 'amplify-signin-with-hostedUI';\nconst name = 'CognitoIdentityServiceProvider';\nexport class DefaultOAuthStore {\n    constructor(keyValueStorage) {\n        this.keyValueStorage = keyValueStorage;\n    }\n    async clearOAuthInflightData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await Promise.all([\n            this.keyValueStorage.removeItem(authKeys.inflightOAuth),\n            this.keyValueStorage.removeItem(authKeys.oauthPKCE),\n            this.keyValueStorage.removeItem(authKeys.oauthState),\n        ]);\n    }\n    async clearOAuthData() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.clearOAuthInflightData();\n        await this.keyValueStorage.removeItem(V5_HOSTED_UI_KEY); // remove in case a customer migrated an App from v5 to v6\n        return this.keyValueStorage.removeItem(authKeys.oauthSignIn);\n    }\n    loadOAuthState() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthState);\n    }\n    storeOAuthState(state) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthState, state);\n    }\n    loadPKCE() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.getItem(authKeys.oauthPKCE);\n    }\n    storePKCE(pkce) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return this.keyValueStorage.setItem(authKeys.oauthPKCE, pkce);\n    }\n    setAuthConfig(authConfigParam) {\n        this.cognitoConfig = authConfigParam;\n    }\n    async loadOAuthInFlight() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        return ((await this.keyValueStorage.getItem(authKeys.inflightOAuth)) === 'true');\n    }\n    async storeOAuthInFlight(inflight) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.inflightOAuth, `${inflight}`);\n    }\n    async loadOAuthSignIn() {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        const isLegacyHostedUISignIn = await this.keyValueStorage.getItem(V5_HOSTED_UI_KEY);\n        const [isOAuthSignIn, preferPrivateSession] = (await this.keyValueStorage.getItem(authKeys.oauthSignIn))?.split(',') ??\n            [];\n        return {\n            isOAuthSignIn: isOAuthSignIn === 'true' || isLegacyHostedUISignIn === 'true',\n            preferPrivateSession: preferPrivateSession === 'true',\n        };\n    }\n    async storeOAuthSignIn(oauthSignIn, preferPrivateSession = false) {\n        assertTokenProviderConfig(this.cognitoConfig);\n        const authKeys = createKeysForAuthStorage(name, this.cognitoConfig.userPoolClientId);\n        await this.keyValueStorage.setItem(authKeys.oauthSignIn, `${oauthSignIn},${preferPrivateSession}`);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(OAuthStorageKeys)(provider, identifier);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage } from '@aws-amplify/core';\nimport { DefaultOAuthStore } from '../signInWithRedirectStore';\nexport const oAuthStore = new DefaultOAuthStore(defaultStorage);\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nconst inflightPromises = [];\nexport const addInflightPromise = (resolver) => {\n    inflightPromises.push(resolver);\n};\nexport const resolveAndClearInflightPromises = () => {\n    while (inflightPromises.length) {\n        inflightPromises.pop()?.();\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub, } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL, assertTokenProviderConfig, isBrowser, isTokenExpired, } from '@aws-amplify/core/internals/utils';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { AuthError } from '../../../errors/AuthError';\nimport { oAuthStore } from '../utils/oauth/oAuthStore';\nimport { addInflightPromise } from '../utils/oauth/inflightPromise';\nexport class TokenOrchestrator {\n    constructor() {\n        this.waitForInflightOAuth = isBrowser()\n            ? async () => {\n                if (!(await oAuthStore.loadOAuthInFlight())) {\n                    return;\n                }\n                if (this.inflightPromise) {\n                    return this.inflightPromise;\n                }\n                // when there is valid oauth config and there is an inflight oauth flow, try\n                // to block async calls that require fetching tokens before the oauth flow completes\n                // e.g. getCurrentUser, fetchAuthSession etc.\n                this.inflightPromise = new Promise((resolve, _reject) => {\n                    addInflightPromise(resolve);\n                });\n                return this.inflightPromise;\n            }\n            : async () => {\n                // no-op for non-browser environments\n            };\n    }\n    setAuthConfig(authConfig) {\n        oAuthStore.setAuthConfig(authConfig.Cognito);\n        this.authConfig = authConfig;\n    }\n    setTokenRefresher(tokenRefresher) {\n        this.tokenRefresher = tokenRefresher;\n    }\n    setAuthTokenStore(tokenStore) {\n        this.tokenStore = tokenStore;\n    }\n    getTokenStore() {\n        if (!this.tokenStore) {\n            throw new AuthError({\n                name: 'EmptyTokenStoreException',\n                message: 'TokenStore not set',\n            });\n        }\n        return this.tokenStore;\n    }\n    getTokenRefresher() {\n        if (!this.tokenRefresher) {\n            throw new AuthError({\n                name: 'EmptyTokenRefresherException',\n                message: 'TokenRefresher not set',\n            });\n        }\n        return this.tokenRefresher;\n    }\n    async getTokens(options) {\n        let tokens;\n        try {\n            assertTokenProviderConfig(this.authConfig?.Cognito);\n        }\n        catch (_err) {\n            // Token provider not configured\n            return null;\n        }\n        await this.waitForInflightOAuth();\n        this.inflightPromise = undefined;\n        tokens = await this.getTokenStore().loadTokens();\n        const username = await this.getTokenStore().getLastAuthUser();\n        if (tokens === null) {\n            return null;\n        }\n        const idTokenExpired = !!tokens?.idToken &&\n            isTokenExpired({\n                expiresAt: (tokens.idToken?.payload?.exp ?? 0) * 1000,\n                clockDrift: tokens.clockDrift ?? 0,\n            });\n        const accessTokenExpired = isTokenExpired({\n            expiresAt: (tokens.accessToken?.payload?.exp ?? 0) * 1000,\n            clockDrift: tokens.clockDrift ?? 0,\n        });\n        if (options?.forceRefresh || idTokenExpired || accessTokenExpired) {\n            tokens = await this.refreshTokens({\n                tokens,\n                username,\n            });\n            if (tokens === null) {\n                return null;\n            }\n        }\n        return {\n            accessToken: tokens?.accessToken,\n            idToken: tokens?.idToken,\n            signInDetails: tokens?.signInDetails,\n        };\n    }\n    async refreshTokens({ tokens, username, }) {\n        try {\n            const { signInDetails } = tokens;\n            const newTokens = await this.getTokenRefresher()({\n                tokens,\n                authConfig: this.authConfig,\n                username,\n            });\n            newTokens.signInDetails = signInDetails;\n            await this.setTokens({ tokens: newTokens });\n            Hub.dispatch('auth', { event: 'tokenRefresh' }, 'Auth', AMPLIFY_SYMBOL);\n            return newTokens;\n        }\n        catch (err) {\n            return this.handleErrors(err);\n        }\n    }\n    handleErrors(err) {\n        assertServiceError(err);\n        if (err.message !== 'Network error') {\n            // TODO(v6): Check errors on client\n            this.clearTokens();\n        }\n        Hub.dispatch('auth', {\n            event: 'tokenRefresh_failure',\n            data: { error: err },\n        }, 'Auth', AMPLIFY_SYMBOL);\n        if (err.name.startsWith('NotAuthorizedException')) {\n            return null;\n        }\n        throw err;\n    }\n    async setTokens({ tokens }) {\n        return this.getTokenStore().storeTokens(tokens);\n    }\n    async clearTokens() {\n        return this.getTokenStore().clearTokens();\n    }\n    getDeviceMetadata(username) {\n        return this.getTokenStore().getDeviceMetadata(username);\n    }\n    clearDeviceMetadata(username) {\n        return this.getTokenStore().clearDeviceMetadata(username);\n    }\n    setOAuthMetadata(metadata) {\n        return this.getTokenStore().setOAuthMetadata(metadata);\n    }\n    getOAuthMetadata() {\n        return this.getTokenStore().getOAuthMetadata();\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage, } from '@aws-amplify/core';\nimport { refreshAuthTokens } from '../utils/refreshAuthTokens';\nimport { DefaultTokenStore } from './TokenStore';\nimport { TokenOrchestrator } from './TokenOrchestrator';\nexport class CognitoUserPoolsTokenProvider {\n    constructor() {\n        this.authTokenStore = new DefaultTokenStore();\n        this.authTokenStore.setKeyValueStorage(defaultStorage);\n        this.tokenOrchestrator = new TokenOrchestrator();\n        this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore);\n        this.tokenOrchestrator.setTokenRefresher(refreshAuthTokens);\n    }\n    getTokens({ forceRefresh } = { forceRefresh: false }) {\n        return this.tokenOrchestrator.getTokens({ forceRefresh });\n    }\n    setKeyValueStorage(keyValueStorage) {\n        this.authTokenStore.setKeyValueStorage(keyValueStorage);\n    }\n    setAuthConfig(authConfig) {\n        this.authTokenStore.setAuthConfig(authConfig);\n        this.tokenOrchestrator.setAuthConfig(authConfig);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { CognitoUserPoolsTokenProvider } from './CognitoUserPoolsTokenProvider';\n/**\n * The default provider for the JWT access token and ID token issued from the configured Cognito user pool. It manages\n * the refresh and storage of the tokens. It stores the tokens in `window.localStorage` if available, and falls back to\n * in-memory storage if not.\n */\nexport const cognitoUserPoolsTokenProvider = new CognitoUserPoolsTokenProvider();\nexport const { tokenOrchestrator } = cognitoUserPoolsTokenProvider;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AmplifyError, decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { tokenOrchestrator } from './tokenProvider';\nexport async function cacheCognitoTokens(AuthenticationResult) {\n    if (AuthenticationResult.AccessToken) {\n        const accessToken = decodeJWT(AuthenticationResult.AccessToken);\n        const accessTokenIssuedAtInMillis = (accessToken.payload.iat || 0) * 1000;\n        const currentTime = new Date().getTime();\n        const clockDrift = accessTokenIssuedAtInMillis > 0\n            ? accessTokenIssuedAtInMillis - currentTime\n            : 0;\n        let idToken;\n        let refreshToken;\n        let deviceMetadata;\n        if (AuthenticationResult.RefreshToken) {\n            refreshToken = AuthenticationResult.RefreshToken;\n        }\n        if (AuthenticationResult.IdToken) {\n            idToken = decodeJWT(AuthenticationResult.IdToken);\n        }\n        if (AuthenticationResult?.NewDeviceMetadata) {\n            deviceMetadata = AuthenticationResult.NewDeviceMetadata;\n        }\n        const tokens = {\n            accessToken,\n            idToken,\n            refreshToken,\n            clockDrift,\n            deviceMetadata,\n            username: AuthenticationResult.username,\n        };\n        if (AuthenticationResult?.signInDetails) {\n            tokens.signInDetails = AuthenticationResult.signInDetails;\n        }\n        await tokenOrchestrator.setTokens({\n            tokens,\n        });\n    }\n    else {\n        // This would be a service error\n        throw new AmplifyError({\n            message: 'Invalid tokens',\n            name: 'InvalidTokens',\n            recoverySuggestion: 'Check Cognito UserPool settings',\n        });\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { getCurrentUser } from '../apis/getCurrentUser';\nimport { UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION, USER_UNAUTHENTICATED_EXCEPTION, } from '../../../errors/constants';\nimport { AuthError } from '../../../errors/AuthError';\nexport const ERROR_MESSAGE = 'Unable to get user session following successful sign-in.';\nexport const dispatchSignedInHubEvent = async () => {\n    try {\n        Hub.dispatch('auth', {\n            event: 'signedIn',\n            data: await getCurrentUser(),\n        }, 'Auth', AMPLIFY_SYMBOL);\n    }\n    catch (error) {\n        if (error.name === USER_UNAUTHENTICATED_EXCEPTION) {\n            throw new AuthError({\n                name: UNEXPECTED_SIGN_IN_INTERRUPTION_EXCEPTION,\n                message: ERROR_MESSAGE,\n                recoverySuggestion: 'This most likely is due to auth tokens not being persisted. If you are using cookie store, please ensure cookies can be correctly set from your server.',\n            });\n        }\n        throw error;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { getActiveSignInUsername, getNewDeviceMetadata, getSignInResult, getSignInResultFromError, handleCustomAuthFlowWithoutSRP, retryOnResourceNotFoundException, } from '../utils/signInHelpers';\nimport { cleanActiveSignInState, setActiveSignInState, } from '../utils/signInStore';\nimport { cacheCognitoTokens } from '../tokenProvider/cacheTokens';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../utils/dispatchSignedInHubEvent';\n/**\n * Signs a user in using a custom authentication flow without password\n *\n * @param input -  The SignInWithCustomAuthInput object\n * @returns AuthSignInResult\n * @throws service: {@link InitiateAuthException } - Cognito service errors thrown during the sign-in process.\n * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password\n *  are not defined.\n * @throws SignInWithCustomAuthOutput - Thrown when the token provider config is invalid.\n */\nexport async function signInWithCustomAuth(input) {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { username, password, options } = input;\n    const signInDetails = {\n        loginId: username,\n        authFlowType: 'CUSTOM_WITHOUT_SRP',\n    };\n    const metadata = options?.clientMetadata;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignInUsername);\n    assertValidationError(!password, AuthValidationErrorCode.CustomAuthSignInPassword);\n    try {\n        const { ChallengeName: retriedChallengeName, ChallengeParameters: retiredChallengeParameters, AuthenticationResult, Session, } = await retryOnResourceNotFoundException(handleCustomAuthFlowWithoutSRP, [username, metadata, authConfig, tokenOrchestrator], username, tokenOrchestrator);\n        const activeUsername = getActiveSignInUsername(username);\n        // sets up local state used during the sign-in process\n        setActiveSignInState({\n            signInSession: Session,\n            username: activeUsername,\n            challengeName: retriedChallengeName,\n            signInDetails,\n        });\n        if (AuthenticationResult) {\n            cleanActiveSignInState();\n            await cacheCognitoTokens({\n                username: activeUsername,\n                ...AuthenticationResult,\n                NewDeviceMetadata: await getNewDeviceMetadata({\n                    userPoolId: authConfig.userPoolId,\n                    userPoolEndpoint: authConfig.userPoolEndpoint,\n                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,\n                    accessToken: AuthenticationResult.AccessToken,\n                }),\n                signInDetails,\n            });\n            await dispatchSignedInHubEvent();\n            return {\n                isSignedIn: true,\n                nextStep: { signInStep: 'DONE' },\n            };\n        }\n        return getSignInResult({\n            challengeName: retriedChallengeName,\n            challengeParameters: retiredChallengeParameters,\n        });\n    }\n    catch (error) {\n        cleanActiveSignInState();\n        assertServiceError(error);\n        const result = getSignInResultFromError(error.name);\n        if (result)\n            return result;\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { getActiveSignInUsername, getNewDeviceMetadata, getSignInResult, getSignInResultFromError, handleCustomSRPAuthFlow, } from '../utils/signInHelpers';\nimport { cleanActiveSignInState, setActiveSignInState, } from '../utils/signInStore';\nimport { cacheCognitoTokens } from '../tokenProvider/cacheTokens';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../utils/dispatchSignedInHubEvent';\n/**\n * Signs a user in using a custom authentication flow with SRP\n *\n * @param input -  The SignInWithCustomSRPAuthInput object\n * @returns SignInWithCustomSRPAuthOutput\n * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException } - Cognito\n * service errors thrown during the sign-in process.\n * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password\n *  are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signInWithCustomSRPAuth(input) {\n    const { username, password, options } = input;\n    const signInDetails = {\n        loginId: username,\n        authFlowType: 'CUSTOM_WITH_SRP',\n    };\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const metadata = options?.clientMetadata;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignInUsername);\n    assertValidationError(!!password, AuthValidationErrorCode.EmptySignInPassword);\n    try {\n        const { ChallengeName: handledChallengeName, ChallengeParameters: handledChallengeParameters, AuthenticationResult, Session, } = await handleCustomSRPAuthFlow(username, password, metadata, authConfig, tokenOrchestrator);\n        const activeUsername = getActiveSignInUsername(username);\n        // sets up local state used during the sign-in process\n        setActiveSignInState({\n            signInSession: Session,\n            username: activeUsername,\n            challengeName: handledChallengeName,\n            signInDetails,\n        });\n        if (AuthenticationResult) {\n            await cacheCognitoTokens({\n                username: activeUsername,\n                ...AuthenticationResult,\n                NewDeviceMetadata: await getNewDeviceMetadata({\n                    userPoolId: authConfig.userPoolId,\n                    userPoolEndpoint: authConfig.userPoolEndpoint,\n                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,\n                    accessToken: AuthenticationResult.AccessToken,\n                }),\n                signInDetails,\n            });\n            cleanActiveSignInState();\n            await dispatchSignedInHubEvent();\n            return {\n                isSignedIn: true,\n                nextStep: { signInStep: 'DONE' },\n            };\n        }\n        return getSignInResult({\n            challengeName: handledChallengeName,\n            challengeParameters: handledChallengeParameters,\n        });\n    }\n    catch (error) {\n        cleanActiveSignInState();\n        assertServiceError(error);\n        const result = getSignInResultFromError(error.name);\n        if (result)\n            return result;\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { getActiveSignInUsername, getNewDeviceMetadata, getSignInResult, getSignInResultFromError, handleUserSRPAuthFlow, } from '../utils/signInHelpers';\nimport { cleanActiveSignInState, setActiveSignInState, } from '../utils/signInStore';\nimport { cacheCognitoTokens } from '../tokenProvider/cacheTokens';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../utils/dispatchSignedInHubEvent';\n/**\n * Signs a user in\n *\n * @param input - The SignInWithSRPInput object\n * @returns SignInWithSRPOutput\n * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException } - Cognito service errors\n * thrown during the sign-in process.\n * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password\n *  are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signInWithSRP(input) {\n    const { username, password } = input;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    const signInDetails = {\n        loginId: username,\n        authFlowType: 'USER_SRP_AUTH',\n    };\n    assertTokenProviderConfig(authConfig);\n    const clientMetaData = input.options?.clientMetadata;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignInUsername);\n    assertValidationError(!!password, AuthValidationErrorCode.EmptySignInPassword);\n    try {\n        const { ChallengeName: handledChallengeName, ChallengeParameters: handledChallengeParameters, AuthenticationResult, Session, } = await handleUserSRPAuthFlow(username, password, clientMetaData, authConfig, tokenOrchestrator);\n        const activeUsername = getActiveSignInUsername(username);\n        // sets up local state used during the sign-in process\n        setActiveSignInState({\n            signInSession: Session,\n            username: activeUsername,\n            challengeName: handledChallengeName,\n            signInDetails,\n        });\n        if (AuthenticationResult) {\n            cleanActiveSignInState();\n            await cacheCognitoTokens({\n                username: activeUsername,\n                ...AuthenticationResult,\n                NewDeviceMetadata: await getNewDeviceMetadata({\n                    userPoolId: authConfig.userPoolId,\n                    userPoolEndpoint: authConfig.userPoolEndpoint,\n                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,\n                    accessToken: AuthenticationResult.AccessToken,\n                }),\n                signInDetails,\n            });\n            await dispatchSignedInHubEvent();\n            return {\n                isSignedIn: true,\n                nextStep: { signInStep: 'DONE' },\n            };\n        }\n        return getSignInResult({\n            challengeName: handledChallengeName,\n            challengeParameters: handledChallengeParameters,\n        });\n    }\n    catch (error) {\n        cleanActiveSignInState();\n        assertServiceError(error);\n        const result = getSignInResultFromError(error.name);\n        if (result)\n            return result;\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { getActiveSignInUsername, getNewDeviceMetadata, getSignInResult, getSignInResultFromError, handleUserPasswordAuthFlow, retryOnResourceNotFoundException, } from '../utils/signInHelpers';\nimport { cleanActiveSignInState, setActiveSignInState, } from '../utils/signInStore';\nimport { cacheCognitoTokens } from '../tokenProvider/cacheTokens';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../utils/dispatchSignedInHubEvent';\n/**\n * Signs a user in using USER_PASSWORD_AUTH AuthFlowType\n *\n * @param input - The SignInWithUserPasswordInput object\n * @returns SignInWithUserPasswordOutput\n * @throws service: {@link InitiateAuthException } - Cognito service error thrown during the sign-in process.\n * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password\n *  are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signInWithUserPassword(input) {\n    const { username, password, options } = input;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    const signInDetails = {\n        loginId: username,\n        authFlowType: 'USER_PASSWORD_AUTH',\n    };\n    assertTokenProviderConfig(authConfig);\n    const metadata = options?.clientMetadata;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignInUsername);\n    assertValidationError(!!password, AuthValidationErrorCode.EmptySignInPassword);\n    try {\n        const { ChallengeName: retiredChallengeName, ChallengeParameters: retriedChallengeParameters, AuthenticationResult, Session, } = await retryOnResourceNotFoundException(handleUserPasswordAuthFlow, [username, password, metadata, authConfig, tokenOrchestrator], username, tokenOrchestrator);\n        const activeUsername = getActiveSignInUsername(username);\n        // sets up local state used during the sign-in process\n        setActiveSignInState({\n            signInSession: Session,\n            username: activeUsername,\n            challengeName: retiredChallengeName,\n            signInDetails,\n        });\n        if (AuthenticationResult) {\n            await cacheCognitoTokens({\n                ...AuthenticationResult,\n                username: activeUsername,\n                NewDeviceMetadata: await getNewDeviceMetadata({\n                    userPoolId: authConfig.userPoolId,\n                    userPoolEndpoint: authConfig.userPoolEndpoint,\n                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,\n                    accessToken: AuthenticationResult.AccessToken,\n                }),\n                signInDetails,\n            });\n            cleanActiveSignInState();\n            await dispatchSignedInHubEvent();\n            return {\n                isSignedIn: true,\n                nextStep: { signInStep: 'DONE' },\n            };\n        }\n        return getSignInResult({\n            challengeName: retiredChallengeName,\n            challengeParameters: retriedChallengeParameters,\n        });\n    }\n    catch (error) {\n        cleanActiveSignInState();\n        assertServiceError(error);\n        const result = getSignInResultFromError(error.name);\n        if (result)\n            return result;\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertUserNotAuthenticated } from '../utils/signInHelpers';\nimport { signInWithCustomAuth } from './signInWithCustomAuth';\nimport { signInWithCustomSRPAuth } from './signInWithCustomSRPAuth';\nimport { signInWithSRP } from './signInWithSRP';\nimport { signInWithUserPassword } from './signInWithUserPassword';\n/**\n * Signs a user in\n *\n * @param input -  The SignInInput object\n * @returns SignInOutput\n * @throws service: {@link InitiateAuthException }, {@link RespondToAuthChallengeException }\n *  - Cognito service errors thrown during the sign-in process.\n * @throws validation: {@link AuthValidationErrorCode  } - Validation errors thrown when either username or password\n *  are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signIn(input) {\n    const authFlowType = input.options?.authFlowType;\n    await assertUserNotAuthenticated();\n    switch (authFlowType) {\n        case 'USER_SRP_AUTH':\n            return signInWithSRP(input);\n        case 'USER_PASSWORD_AUTH':\n            return signInWithUserPassword(input);\n        case 'CUSTOM_WITHOUT_SRP':\n            return signInWithCustomAuth(input);\n        case 'CUSTOM_WITH_SRP':\n            return signInWithCustomSRPAuth(input);\n        default:\n            return signInWithSRP(input);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../errors/AuthError';\nimport { AUTO_SIGN_IN_EXCEPTION } from '../../../errors/constants';\nconst initialAutoSignIn = async () => {\n    throw new AuthError({\n        name: AUTO_SIGN_IN_EXCEPTION,\n        message: 'The autoSignIn flow has not started, or has been cancelled/completed.',\n        recoverySuggestion: 'Please try to use the signIn API or log out before starting a new autoSignIn flow.',\n    });\n};\n/**\n * Signs a user in automatically after finishing the sign-up process.\n *\n * This API will automatically sign a user in if the autoSignIn flow has been completed in the following cases:\n * - User confirmed their account with a verification code sent to their phone or email (default option).\n * - User confirmed their account with a verification link sent to their phone or email. In order to\n * enable this option you need to go to the Amazon Cognito [console](https://aws.amazon.com/pm/cognito),\n * look for your userpool, then go to the `Messaging` tab and enable `link` mode inside the `Verification message` option.\n * Finally you need to define the `signUpVerificationMethod` in your `Auth` config.\n *\n * @example\n * ```typescript\n *  Amplify.configure({\n *    Auth: {\n *     Cognito: {\n *    ...cognitoConfig,\n *    signUpVerificationMethod: \"link\" // the default value is \"code\"\n *   }\n *\t}});\n * ```\n *\n * @throws AutoSignInException - Thrown when the autoSignIn flow has not started, or has been cancelled/completed.\n * @returns The signInOutput.\n *\n * @example\n * ```typescript\n *  // handleSignUp.ts\n * async function handleSignUp(\n *   username:string,\n *   password:string\n * ){\n *   try {\n *     const { nextStep } = await signUp({\n *       username,\n *       password,\n *       options: {\n *         userAttributes:{ email:'email@email.com'},\n *         autoSignIn: true // This enables the auto sign-in flow.\n *       },\n *     });\n *\n *     handleSignUpStep(nextStep);\n *\n *   } catch (error) {\n *     console.log(error);\n *   }\n * }\n *\n * // handleConfirmSignUp.ts\n * async function handleConfirmSignUp(username:string, confirmationCode:string) {\n *   try {\n *     const { nextStep } = await confirmSignUp({\n *       username,\n *       confirmationCode,\n *     });\n *\n *     handleSignUpStep(nextStep);\n *   } catch (error) {\n *     console.log(error);\n *   }\n * }\n *\n * // signUpUtils.ts\n * async function handleSignUpStep( step: SignUpOutput[\"nextStep\"]) {\n * switch (step.signUpStep) {\n *   case \"CONFIRM_SIGN_UP\":\n *\n *    // Redirect end-user to confirm-sign up screen.\n *\n *   case \"COMPLETE_AUTO_SIGN_IN\":\n *\t   const codeDeliveryDetails = step.codeDeliveryDetails;\n *     if (codeDeliveryDetails) {\n *      // Redirect user to confirm-sign-up with link screen.\n *     }\n *     const signInOutput = await autoSignIn();\n *   // handle sign-in steps\n * }\n *\n * ```\n */\n// TODO(Eslint): can this be refactored not using `let` on exported member?\n// eslint-disable-next-line import/no-mutable-exports\nexport let autoSignIn = initialAutoSignIn;\n/**\n * Sets the context of autoSignIn at run time.\n * @internal\n */\nexport function setAutoSignIn(callback) {\n    autoSignIn = callback;\n}\n/**\n * Resets the context\n *\n * @internal\n */\nexport function resetAutoSignIn() {\n    autoSignIn = initialAutoSignIn;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { HubInternal } from '@aws-amplify/core/internals/utils';\nimport { signIn } from '../apis/signIn';\nimport { AuthError } from '../../../errors/AuthError';\nimport { resetAutoSignIn, setAutoSignIn } from '../apis/autoSignIn';\nimport { AUTO_SIGN_IN_EXCEPTION } from '../../../errors/constants';\nconst MAX_AUTOSIGNIN_POLLING_MS = 3 * 60 * 1000;\nexport function handleCodeAutoSignIn(signInInput) {\n    const stopHubListener = HubInternal.listen('auth-internal', async ({ payload }) => {\n        switch (payload.event) {\n            case 'confirmSignUp': {\n                const response = payload.data;\n                if (response?.isSignUpComplete) {\n                    HubInternal.dispatch('auth-internal', {\n                        event: 'autoSignIn',\n                    });\n                    setAutoSignIn(autoSignInWithCode(signInInput));\n                    stopHubListener();\n                }\n            }\n        }\n    });\n    // This will stop the listener if confirmSignUp is not resolved.\n    const timeOutId = setTimeout(() => {\n        stopHubListener();\n        setAutoSignInStarted(false);\n        clearTimeout(timeOutId);\n        resetAutoSignIn();\n    }, MAX_AUTOSIGNIN_POLLING_MS);\n}\nfunction debounce(fun, delay) {\n    let timer;\n    return (args) => {\n        if (!timer) {\n            fun(...args);\n        }\n        clearTimeout(timer);\n        timer = setTimeout(() => {\n            timer = undefined;\n        }, delay);\n    };\n}\nfunction handleAutoSignInWithLink(signInInput, resolve, reject) {\n    const start = Date.now();\n    const autoSignInPollingIntervalId = setInterval(async () => {\n        const elapsedTime = Date.now() - start;\n        const maxTime = MAX_AUTOSIGNIN_POLLING_MS;\n        if (elapsedTime > maxTime) {\n            clearInterval(autoSignInPollingIntervalId);\n            setAutoSignInStarted(false);\n            reject(new AuthError({\n                name: AUTO_SIGN_IN_EXCEPTION,\n                message: 'The account was not confirmed on time.',\n                recoverySuggestion: 'Try to verify your account by clicking the link sent your email or phone and then login manually.',\n            }));\n            resetAutoSignIn();\n        }\n        else {\n            try {\n                const signInOutput = await signIn(signInInput);\n                if (signInOutput.nextStep.signInStep !== 'CONFIRM_SIGN_UP') {\n                    resolve(signInOutput);\n                    clearInterval(autoSignInPollingIntervalId);\n                    setAutoSignInStarted(false);\n                    resetAutoSignIn();\n                }\n            }\n            catch (error) {\n                clearInterval(autoSignInPollingIntervalId);\n                setAutoSignInStarted(false);\n                reject(error);\n                resetAutoSignIn();\n            }\n        }\n    }, 5000);\n}\nconst debouncedAutoSignInWithLink = debounce(handleAutoSignInWithLink, 300);\nconst debouncedAutoSignWithCodeOrUserConfirmed = debounce(handleAutoSignInWithCodeOrUserConfirmed, 300);\nlet autoSignInStarted = false;\nlet usernameUsedForAutoSignIn;\nexport function setUsernameUsedForAutoSignIn(username) {\n    usernameUsedForAutoSignIn = username;\n}\nexport function isAutoSignInUserUsingConfirmSignUp(username) {\n    return usernameUsedForAutoSignIn === username;\n}\nexport function isAutoSignInStarted() {\n    return autoSignInStarted;\n}\nexport function setAutoSignInStarted(value) {\n    if (value === false) {\n        setUsernameUsedForAutoSignIn(undefined);\n    }\n    autoSignInStarted = value;\n}\nexport function isSignUpComplete(output) {\n    return !!output.UserConfirmed;\n}\nexport function autoSignInWhenUserIsConfirmedWithLink(signInInput) {\n    return async () => {\n        return new Promise((resolve, reject) => {\n            debouncedAutoSignInWithLink([signInInput, resolve, reject]);\n        });\n    };\n}\nasync function handleAutoSignInWithCodeOrUserConfirmed(signInInput, resolve, reject) {\n    try {\n        const output = await signIn(signInInput);\n        resolve(output);\n        resetAutoSignIn();\n    }\n    catch (error) {\n        reject(error);\n        resetAutoSignIn();\n    }\n}\nfunction autoSignInWithCode(signInInput) {\n    return async () => {\n        return new Promise((resolve, reject) => {\n            debouncedAutoSignWithCodeOrUserConfirmed([signInInput, resolve, reject]);\n        });\n    };\n}\nexport const autoSignInUserConfirmed = autoSignInWithCode;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nexport const createSignUpClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('SignUp'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { toAttributeType } from '../utils/apiHelpers';\nimport { autoSignInUserConfirmed, autoSignInWhenUserIsConfirmedWithLink, handleCodeAutoSignIn, isAutoSignInStarted, isSignUpComplete, setAutoSignInStarted, setUsernameUsedForAutoSignIn, } from '../utils/signUpHelpers';\nimport { getUserContextData } from '../utils/userContextData';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createSignUpClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { setAutoSignIn } from './autoSignIn';\n/**\n * Creates a user\n *\n * @param input - The SignUpInput object\n * @returns SignUpOutput\n * @throws service: {@link SignUpException } - Cognito service errors thrown during the sign-up process.\n * @throws validation: {@link AuthValidationErrorCode } - Validation errors thrown either username or password\n *  are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signUp(input) {\n    const { username, password, options } = input;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    const signUpVerificationMethod = authConfig?.signUpVerificationMethod ?? 'code';\n    const { clientMetadata, validationData, autoSignIn } = input.options ?? {};\n    assertTokenProviderConfig(authConfig);\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignUpUsername);\n    assertValidationError(!!password, AuthValidationErrorCode.EmptySignUpPassword);\n    const signInServiceOptions = typeof autoSignIn !== 'boolean' ? autoSignIn : undefined;\n    const signInInput = {\n        username,\n        options: signInServiceOptions,\n    };\n    // if the authFlowType is 'CUSTOM_WITHOUT_SRP' then we don't include the password\n    if (signInServiceOptions?.authFlowType !== 'CUSTOM_WITHOUT_SRP') {\n        signInInput.password = password;\n    }\n    if (signInServiceOptions || autoSignIn === true) {\n        setUsernameUsedForAutoSignIn(username);\n        setAutoSignInStarted(true);\n    }\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig;\n    const signUpClient = createSignUpClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const clientOutput = await signUpClient({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SignUp),\n    }, {\n        Username: username,\n        Password: password,\n        UserAttributes: options?.userAttributes && toAttributeType(options?.userAttributes),\n        ClientMetadata: clientMetadata,\n        ValidationData: validationData && toAttributeType(validationData),\n        ClientId: userPoolClientId,\n        UserContextData: getUserContextData({\n            username,\n            userPoolId,\n            userPoolClientId,\n        }),\n    });\n    const { UserSub, CodeDeliveryDetails } = clientOutput;\n    if (isSignUpComplete(clientOutput) && isAutoSignInStarted()) {\n        setAutoSignIn(autoSignInUserConfirmed(signInInput));\n        return {\n            isSignUpComplete: true,\n            nextStep: {\n                signUpStep: 'COMPLETE_AUTO_SIGN_IN',\n            },\n            userId: UserSub,\n        };\n    }\n    else if (isSignUpComplete(clientOutput) && !isAutoSignInStarted()) {\n        return {\n            isSignUpComplete: true,\n            nextStep: {\n                signUpStep: 'DONE',\n            },\n            userId: UserSub,\n        };\n    }\n    else if (!isSignUpComplete(clientOutput) &&\n        isAutoSignInStarted() &&\n        signUpVerificationMethod === 'code') {\n        handleCodeAutoSignIn(signInInput);\n    }\n    else if (!isSignUpComplete(clientOutput) &&\n        isAutoSignInStarted() &&\n        signUpVerificationMethod === 'link') {\n        setAutoSignIn(autoSignInWhenUserIsConfirmedWithLink(signInInput));\n        return {\n            isSignUpComplete: false,\n            nextStep: {\n                signUpStep: 'COMPLETE_AUTO_SIGN_IN',\n                codeDeliveryDetails: {\n                    deliveryMedium: CodeDeliveryDetails?.DeliveryMedium,\n                    destination: CodeDeliveryDetails?.Destination,\n                    attributeName: CodeDeliveryDetails?.AttributeName,\n                },\n            },\n            userId: UserSub,\n        };\n    }\n    return {\n        isSignUpComplete: false,\n        nextStep: {\n            signUpStep: 'CONFIRM_SIGN_UP',\n            codeDeliveryDetails: {\n                deliveryMedium: CodeDeliveryDetails?.DeliveryMedium,\n                destination: CodeDeliveryDetails?.Destination,\n                attributeName: CodeDeliveryDetails?.AttributeName,\n            },\n        },\n        userId: UserSub,\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createForgotPasswordClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ForgotPassword'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { getUserContextData } from '../utils/userContextData';\nimport { createForgotPasswordClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Resets a user's password.\n *\n * @param input -  The ResetPasswordInput object.\n * @returns ResetPasswordOutput\n * @throws -{@link ForgotPasswordException }\n * Thrown due to an invalid confirmation code or password.\n * @throws -{@link AuthValidationErrorCode }\n * Thrown due to an empty username.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n **/\nexport async function resetPassword(input) {\n    const { username } = input;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptyResetPasswordUsername);\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;\n    const clientMetadata = input.options?.clientMetadata;\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const forgotPassword = createForgotPasswordClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const res = await forgotPassword({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ResetPassword),\n    }, {\n        Username: username,\n        ClientMetadata: clientMetadata,\n        ClientId: userPoolClientId,\n        UserContextData,\n    });\n    const codeDeliveryDetails = res.CodeDeliveryDetails;\n    return {\n        isPasswordReset: false,\n        nextStep: {\n            resetPasswordStep: 'CONFIRM_RESET_PASSWORD_WITH_CODE',\n            codeDeliveryDetails: {\n                deliveryMedium: codeDeliveryDetails?.DeliveryMedium,\n                destination: codeDeliveryDetails?.Destination,\n                attributeName: codeDeliveryDetails?.AttributeName,\n            },\n        },\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createConfirmForgotPasswordClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ConfirmForgotPassword'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { getUserContextData } from '../utils/userContextData';\nimport { createConfirmForgotPasswordClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\n/**\n * Confirms the new password and verification code to reset the password.\n *\n * @param input -  The ConfirmResetPasswordInput object.\n * @throws -{@link ConfirmForgotPasswordException }\n * Thrown due to an invalid confirmation code or password.\n * @throws -{@link AuthValidationErrorCode }\n * Thrown due to an empty confirmation code, password or username.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function confirmResetPassword(input) {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;\n    const { username, newPassword } = input;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptyConfirmResetPasswordUsername);\n    assertValidationError(!!newPassword, AuthValidationErrorCode.EmptyConfirmResetPasswordNewPassword);\n    const code = input.confirmationCode;\n    assertValidationError(!!code, AuthValidationErrorCode.EmptyConfirmResetPasswordConfirmationCode);\n    const metadata = input.options?.clientMetadata;\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const confirmForgotPassword = createConfirmForgotPasswordClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    await confirmForgotPassword({\n        region: getRegionFromUserPoolId(authConfig.userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmResetPassword),\n    }, {\n        Username: username,\n        ConfirmationCode: code,\n        Password: newPassword,\n        ClientMetadata: metadata,\n        ClientId: authConfig.userPoolClientId,\n        UserContextData,\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createResendConfirmationCodeClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ResendConfirmationCode'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { getUserContextData } from '../utils/userContextData';\nimport { createResendConfirmationCodeClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Resend the confirmation code while signing up\n *\n * @param input -  The ResendSignUpCodeInput object\n * @returns ResendSignUpCodeOutput\n * @throws service: {@link ResendConfirmationException } - Cognito service errors thrown when resending the code.\n * @throws validation: {@link AuthValidationErrorCode } - Validation errors thrown either username are not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function resendSignUpCode(input) {\n    const { username } = input;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptySignUpUsername);\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolClientId, userPoolId, userPoolEndpoint } = authConfig;\n    const clientMetadata = input.options?.clientMetadata;\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const resendConfirmationCode = createResendConfirmationCodeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { CodeDeliveryDetails } = await resendConfirmationCode({\n        region: getRegionFromUserPoolId(authConfig.userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ResendSignUpCode),\n    }, {\n        Username: username,\n        ClientMetadata: clientMetadata,\n        ClientId: authConfig.userPoolClientId,\n        UserContextData,\n    });\n    const { DeliveryMedium, AttributeName, Destination } = {\n        ...CodeDeliveryDetails,\n    };\n    return {\n        destination: Destination,\n        deliveryMedium: DeliveryMedium,\n        attributeName: AttributeName\n            ? AttributeName\n            : undefined,\n    };\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nexport const createConfirmSignUpClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ConfirmSignUp'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, HubInternal, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { isAutoSignInStarted, isAutoSignInUserUsingConfirmSignUp, setAutoSignInStarted, } from '../utils/signUpHelpers';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { getUserContextData } from '../utils/userContextData';\nimport { createConfirmSignUpClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Confirms a new user account.\n *\n * @param input -  The ConfirmSignUpInput object.\n * @returns ConfirmSignUpOutput\n * @throws -{@link ConfirmSignUpException }\n * Thrown due to an invalid confirmation code.\n * @throws -{@link AuthValidationErrorCode }\n * Thrown due to an empty confirmation code\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function confirmSignUp(input) {\n    const { username, confirmationCode, options } = input;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolId, userPoolClientId, userPoolEndpoint } = authConfig;\n    const clientMetadata = options?.clientMetadata;\n    assertValidationError(!!username, AuthValidationErrorCode.EmptyConfirmSignUpUsername);\n    assertValidationError(!!confirmationCode, AuthValidationErrorCode.EmptyConfirmSignUpCode);\n    const UserContextData = getUserContextData({\n        username,\n        userPoolId,\n        userPoolClientId,\n    });\n    const confirmSignUpClient = createConfirmSignUpClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    await confirmSignUpClient({\n        region: getRegionFromUserPoolId(authConfig.userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmSignUp),\n    }, {\n        Username: username,\n        ConfirmationCode: confirmationCode,\n        ClientMetadata: clientMetadata,\n        ForceAliasCreation: options?.forceAliasCreation,\n        ClientId: authConfig.userPoolClientId,\n        UserContextData,\n    });\n    return new Promise((resolve, reject) => {\n        try {\n            const signUpOut = {\n                isSignUpComplete: true,\n                nextStep: {\n                    signUpStep: 'DONE',\n                },\n            };\n            if (!isAutoSignInStarted() ||\n                !isAutoSignInUserUsingConfirmSignUp(username)) {\n                resolve(signUpOut);\n                return;\n            }\n            const stopListener = HubInternal.listen('auth-internal', ({ payload }) => {\n                switch (payload.event) {\n                    case 'autoSignIn':\n                        resolve({\n                            isSignUpComplete: true,\n                            nextStep: {\n                                signUpStep: 'COMPLETE_AUTO_SIGN_IN',\n                            },\n                        });\n                        setAutoSignInStarted(false);\n                        stopListener();\n                }\n            });\n            HubInternal.dispatch('auth-internal', {\n                event: 'confirmSignUp',\n                data: signUpOut,\n            });\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { assertTokenProviderConfig } from '@aws-amplify/core/internals/utils';\nimport { cleanActiveSignInState, setActiveSignInState, signInStore, } from '../utils/signInStore';\nimport { AuthError } from '../../../errors/AuthError';\nimport { getNewDeviceMetadata, getSignInResult, getSignInResultFromError, handleChallengeName, } from '../utils/signInHelpers';\nimport { assertServiceError } from '../../../errors/utils/assertServiceError';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { AuthErrorCodes } from '../../../common/AuthErrorStrings';\nimport { cacheCognitoTokens } from '../tokenProvider/cacheTokens';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { dispatchSignedInHubEvent } from '../utils/dispatchSignedInHubEvent';\n/**\n * Continues or completes the sign in process when required by the initial call to `signIn`.\n *\n * @param input -  The ConfirmSignInInput object\n * @returns ConfirmSignInOutput\n * @throws  -{@link VerifySoftwareTokenException }:\n * Thrown due to an invalid MFA token.\n * @throws  -{@link RespondToAuthChallengeException }:\n * Thrown due to an invalid auth challenge response.\n * @throws  -{@link AssociateSoftwareTokenException}:\n * Thrown due to a service error during the MFA setup process.\n * @throws  -{@link AuthValidationErrorCode }:\n * Thrown when `challengeResponse` is not defined.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function confirmSignIn(input) {\n    const { challengeResponse, options } = input;\n    const { username, challengeName, signInSession, signInDetails } = signInStore.getState();\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const clientMetaData = options?.clientMetadata;\n    assertValidationError(!!challengeResponse, AuthValidationErrorCode.EmptyChallengeResponse);\n    if (!username || !challengeName || !signInSession)\n        // TODO: remove this error message for production apps\n        throw new AuthError({\n            name: AuthErrorCodes.SignInException,\n            message: `\n\t\t\tAn error occurred during the sign in process. \n\t\t\t\n\t\t\tThis most likely occurred due to:\n\t\t\t1. signIn was not called before confirmSignIn.\n\t\t\t2. signIn threw an exception.\n\t\t\t3. page was refreshed during the sign in flow.\n\t\t\t`,\n            recoverySuggestion: 'Make sure a successful call to signIn is made before calling confirmSignIn' +\n                'and that the page is not refreshed until the sign in process is done.',\n        });\n    try {\n        const { Session, ChallengeName: handledChallengeName, AuthenticationResult, ChallengeParameters: handledChallengeParameters, } = await handleChallengeName(username, challengeName, signInSession, challengeResponse, authConfig, tokenOrchestrator, clientMetaData, options);\n        // sets up local state used during the sign-in process\n        setActiveSignInState({\n            signInSession: Session,\n            username,\n            challengeName: handledChallengeName,\n            signInDetails,\n        });\n        if (AuthenticationResult) {\n            cleanActiveSignInState();\n            await cacheCognitoTokens({\n                username,\n                ...AuthenticationResult,\n                NewDeviceMetadata: await getNewDeviceMetadata({\n                    userPoolId: authConfig.userPoolId,\n                    userPoolEndpoint: authConfig.userPoolEndpoint,\n                    newDeviceMetadata: AuthenticationResult.NewDeviceMetadata,\n                    accessToken: AuthenticationResult.AccessToken,\n                }),\n                signInDetails,\n            });\n            await dispatchSignedInHubEvent();\n            return {\n                isSignedIn: true,\n                nextStep: { signInStep: 'DONE' },\n            };\n        }\n        return getSignInResult({\n            challengeName: handledChallengeName,\n            challengeParameters: handledChallengeParameters,\n        });\n    }\n    catch (error) {\n        assertServiceError(error);\n        const result = getSignInResultFromError(error.name);\n        if (result)\n            return result;\n        throw error;\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createGetUserClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('GetUser'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createChangePasswordClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('ChangePassword'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, fetchAuthSession } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokens } from '../utils/types';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createChangePasswordClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Updates user's password while authenticated.\n *\n * @param input - The UpdatePasswordInput object.\n * @throws - {@link ChangePasswordException} - Cognito service errors thrown when updating a password.\n * @throws - {@link AuthValidationErrorCode} - Validation errors thrown when oldPassword or newPassword are empty.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function updatePassword(input) {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolEndpoint, userPoolId } = authConfig;\n    const { oldPassword, newPassword } = input;\n    assertValidationError(!!oldPassword, AuthValidationErrorCode.EmptyUpdatePassword);\n    assertValidationError(!!newPassword, AuthValidationErrorCode.EmptyUpdatePassword);\n    const { tokens } = await fetchAuthSession({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const changePassword = createChangePasswordClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    await changePassword({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.UpdatePassword),\n    }, {\n        AccessToken: tokens.accessToken.toString(),\n        PreviousPassword: oldPassword,\n        ProposedPassword: newPassword,\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createVerifyUserAttributeClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('VerifyUserAttribute'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, fetchAuthSession } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthValidationErrorCode } from '../../../errors/types/validation';\nimport { assertValidationError } from '../../../errors/utils/assertValidationError';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokens } from '../utils/types';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createVerifyUserAttributeClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Confirms a user attribute with the confirmation code.\n *\n * @param input -  The ConfirmUserAttributeInput object\n * @throws  -{@link AuthValidationErrorCode } -\n * Thrown when `confirmationCode` is not defined.\n * @throws  -{@link VerifyUserAttributeException } - Thrown due to an invalid confirmation code or attribute.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function confirmUserAttribute(input) {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolEndpoint, userPoolId } = authConfig;\n    const { confirmationCode, userAttributeKey } = input;\n    assertValidationError(!!confirmationCode, AuthValidationErrorCode.EmptyConfirmUserAttributeCode);\n    const { tokens } = await fetchAuthSession({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const verifyUserAttribute = createVerifyUserAttributeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    await verifyUserAttribute({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.ConfirmUserAttribute),\n    }, {\n        AccessToken: tokens.accessToken.toString(),\n        AttributeName: userAttributeKey,\n        Code: confirmationCode,\n    });\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n// TODO: delete this module when the Auth class is removed.\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { AuthErrorStrings } from './common/AuthErrorStrings';\nconst logger = new ConsoleLogger('AuthError');\nexport class AuthError extends Error {\n    constructor(type) {\n        const { message, log } = authErrorMessages[type];\n        super(message);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = AuthError;\n        Object.setPrototypeOf(this, AuthError.prototype);\n        this.name = 'AuthError';\n        this.log = log || message;\n        logger.error(this.log);\n    }\n}\nexport class NoUserPoolError extends AuthError {\n    constructor(type) {\n        super(type);\n        // Hack for making the custom error class work when transpiled to es5\n        // TODO: Delete the following 2 lines after we change the build target to >= es2015\n        this.constructor = NoUserPoolError;\n        Object.setPrototypeOf(this, NoUserPoolError.prototype);\n        this.name = 'NoUserPoolError';\n    }\n}\nexport const authErrorMessages = {\n    oauthSignInError: {\n        message: AuthErrorStrings.OAUTH_ERROR,\n        log: 'Make sure Cognito Hosted UI has been configured correctly',\n    },\n    noConfig: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n        log: `\n            Error: Amplify has not been configured correctly.\n            This error is typically caused by one of the following scenarios:\n\n            1. Make sure you're passing the awsconfig object to Amplify.configure() in your app's entry point\n                See https://aws-amplify.github.io/docs/js/authentication#configure-your-app for more information\n            \n            2. There might be multiple conflicting versions of amplify packages in your node_modules.\n\t\t\t\tRefer to our docs site for help upgrading Amplify packages (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js)\n        `,\n    },\n    missingAuthConfig: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n        log: `\n            Error: Amplify has not been configured correctly. \n            The configuration object is missing required auth properties.\n            This error is typically caused by one of the following scenarios:\n\n            1. Did you run \\`amplify push\\` after adding auth via \\`amplify add auth\\`?\n                See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup for more information\n\n            2. This could also be caused by multiple conflicting versions of amplify packages, see (https://docs.amplify.aws/lib/troubleshooting/upgrading/q/platform/js) for help upgrading Amplify packages.\n        `,\n    },\n    emptyUsername: {\n        message: AuthErrorStrings.EMPTY_USERNAME,\n    },\n    // TODO: should include a list of valid sign-in types\n    invalidUsername: {\n        message: AuthErrorStrings.INVALID_USERNAME,\n    },\n    emptyPassword: {\n        message: AuthErrorStrings.EMPTY_PASSWORD,\n    },\n    emptyCode: {\n        message: AuthErrorStrings.EMPTY_CODE,\n    },\n    signUpError: {\n        message: AuthErrorStrings.SIGN_UP_ERROR,\n        log: 'The first parameter should either be non-null string or object',\n    },\n    noMFA: {\n        message: AuthErrorStrings.NO_MFA,\n    },\n    invalidMFA: {\n        message: AuthErrorStrings.INVALID_MFA,\n    },\n    emptyChallengeResponse: {\n        message: AuthErrorStrings.EMPTY_CHALLENGE,\n    },\n    noUserSession: {\n        message: AuthErrorStrings.NO_USER_SESSION,\n    },\n    deviceConfig: {\n        message: AuthErrorStrings.DEVICE_CONFIG,\n    },\n    networkError: {\n        message: AuthErrorStrings.NETWORK_ERROR,\n    },\n    autoSignInError: {\n        message: AuthErrorStrings.AUTOSIGNIN_ERROR,\n    },\n    default: {\n        message: AuthErrorStrings.DEFAULT_MSG,\n    },\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { authErrorMessages } from '../../../../Errors';\nimport { AuthErrorCodes } from '../../../../common/AuthErrorStrings';\nimport { AuthError } from '../../../../errors/AuthError';\nexport const createOAuthError = (message, recoverySuggestion) => new AuthError({\n    message: message ?? 'An error has occurred during the oauth process.',\n    name: AuthErrorCodes.OAuthSignInError,\n    recoverySuggestion: recoverySuggestion ?? authErrorMessages.oauthSignInError.log,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport var AuthErrorTypes;\n(function (AuthErrorTypes) {\n    AuthErrorTypes[\"NoConfig\"] = \"noConfig\";\n    AuthErrorTypes[\"MissingAuthConfig\"] = \"missingAuthConfig\";\n    AuthErrorTypes[\"EmptyUsername\"] = \"emptyUsername\";\n    AuthErrorTypes[\"InvalidUsername\"] = \"invalidUsername\";\n    AuthErrorTypes[\"EmptyPassword\"] = \"emptyPassword\";\n    AuthErrorTypes[\"EmptyCode\"] = \"emptyCode\";\n    AuthErrorTypes[\"SignUpError\"] = \"signUpError\";\n    AuthErrorTypes[\"NoMFA\"] = \"noMFA\";\n    AuthErrorTypes[\"InvalidMFA\"] = \"invalidMFA\";\n    AuthErrorTypes[\"EmptyChallengeResponse\"] = \"emptyChallengeResponse\";\n    AuthErrorTypes[\"NoUserSession\"] = \"noUserSession\";\n    AuthErrorTypes[\"Default\"] = \"default\";\n    AuthErrorTypes[\"DeviceConfig\"] = \"deviceConfig\";\n    AuthErrorTypes[\"NetworkError\"] = \"networkError\";\n    AuthErrorTypes[\"AutoSignInError\"] = \"autoSignInError\";\n    AuthErrorTypes[\"OAuthSignInError\"] = \"oauthSignInError\";\n})(AuthErrorTypes || (AuthErrorTypes = {}));\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthError } from '../../../../errors/AuthError';\nimport { AuthErrorTypes } from '../../../../types/Auth';\nimport { oAuthStore } from './oAuthStore';\nexport const flowCancelledMessage = '`signInWithRedirect` has been canceled.';\nexport const validationFailedMessage = 'An error occurred while validating the state.';\nexport const validationRecoverySuggestion = 'Try to initiate an OAuth flow from Amplify';\nexport const validateState = async (state) => {\n    const savedState = await oAuthStore.loadOAuthState();\n    // This is because savedState only exists if the flow was initiated by Amplify\n    const validatedState = state === savedState ? savedState : undefined;\n    if (!validatedState) {\n        throw new AuthError({\n            name: AuthErrorTypes.OAuthSignInError,\n            message: state === null ? flowCancelledMessage : validationFailedMessage,\n            recoverySuggestion: state === null ? undefined : validationRecoverySuggestion,\n        });\n    }\n    return validatedState;\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AMPLIFY_SYMBOL, AmplifyUrl, USER_AGENT_HEADER, urlSafeDecode, } from '@aws-amplify/core/internals/utils';\nimport { Hub, decodeJWT } from '@aws-amplify/core';\nimport { cacheCognitoTokens } from '../../tokenProvider/cacheTokens';\nimport { dispatchSignedInHubEvent } from '../dispatchSignedInHubEvent';\nimport { tokenOrchestrator } from '../../tokenProvider';\nimport { createOAuthError } from './createOAuthError';\nimport { resolveAndClearInflightPromises } from './inflightPromise';\nimport { validateState } from './validateState';\nimport { oAuthStore } from './oAuthStore';\nexport const completeOAuthFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, responseType, domain, preferPrivateSession, }) => {\n    const urlParams = new AmplifyUrl(currentUrl);\n    const error = urlParams.searchParams.get('error');\n    const errorMessage = urlParams.searchParams.get('error_description');\n    if (error) {\n        throw createOAuthError(errorMessage ?? error);\n    }\n    if (responseType === 'code') {\n        return handleCodeFlow({\n            currentUrl,\n            userAgentValue,\n            clientId,\n            redirectUri,\n            domain,\n            preferPrivateSession,\n        });\n    }\n    return handleImplicitFlow({\n        currentUrl,\n        redirectUri,\n        preferPrivateSession,\n    });\n};\nconst handleCodeFlow = async ({ currentUrl, userAgentValue, clientId, redirectUri, domain, preferPrivateSession, }) => {\n    /* Convert URL into an object with parameters as keys\n{ redirect_uri: 'http://localhost:3000/', response_type: 'code', ...} */\n    const url = new AmplifyUrl(currentUrl);\n    const code = url.searchParams.get('code');\n    const state = url.searchParams.get('state');\n    // if `code` or `state` is not presented in the redirect url, most likely\n    // that the end user cancelled the inflight oauth flow by:\n    // 1. clicking the back button of browser\n    // 2. closing the provider hosted UI page and coming back to the app\n    if (!code || !state) {\n        throw createOAuthError('User cancelled OAuth flow.');\n    }\n    // may throw error is being caught in attemptCompleteOAuthFlow.ts\n    const validatedState = await validateState(state);\n    const oAuthTokenEndpoint = 'https://' + domain + '/oauth2/token';\n    // TODO(v6): check hub events\n    // dispatchAuthEvent(\n    // \t'codeFlow',\n    // \t{},\n    // \t`Retrieving tokens from ${oAuthTokenEndpoint}`\n    // );\n    const codeVerifier = await oAuthStore.loadPKCE();\n    const oAuthTokenBody = {\n        grant_type: 'authorization_code',\n        code,\n        client_id: clientId,\n        redirect_uri: redirectUri,\n        ...(codeVerifier ? { code_verifier: codeVerifier } : {}),\n    };\n    const body = Object.entries(oAuthTokenBody)\n        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n        .join('&');\n    const { access_token, refresh_token: refreshToken, id_token, error, error_message: errorMessage, token_type, expires_in, } = await (await fetch(oAuthTokenEndpoint, {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            [USER_AGENT_HEADER]: userAgentValue,\n        },\n        body,\n    })).json();\n    if (error) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError(errorMessage ?? error);\n    }\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        RefreshToken: refreshToken,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst handleImplicitFlow = async ({ currentUrl, redirectUri, preferPrivateSession, }) => {\n    // hash is `null` if `#` doesn't exist on URL\n    const url = new AmplifyUrl(currentUrl);\n    const { id_token, access_token, state, token_type, expires_in, error_description, error, } = (url.hash ?? '#')\n        .substring(1) // Remove # from returned code\n        .split('&')\n        .map(pairings => pairings.split('='))\n        .reduce((accum, [k, v]) => ({ ...accum, [k]: v }), {\n        id_token: undefined,\n        access_token: undefined,\n        state: undefined,\n        token_type: undefined,\n        expires_in: undefined,\n        error_description: undefined,\n        error: undefined,\n    });\n    if (error) {\n        throw createOAuthError(error_description ?? error);\n    }\n    if (!access_token) {\n        // error is being caught in attemptCompleteOAuthFlow.ts\n        throw createOAuthError('No access token returned from OAuth flow.');\n    }\n    const validatedState = await validateState(state);\n    const username = (access_token && decodeJWT(access_token).payload.username) ?? 'username';\n    await cacheCognitoTokens({\n        username,\n        AccessToken: access_token,\n        IdToken: id_token,\n        TokenType: token_type,\n        ExpiresIn: expires_in,\n    });\n    return completeFlow({\n        redirectUri,\n        state: validatedState,\n        preferPrivateSession,\n    });\n};\nconst completeFlow = async ({ redirectUri, state, preferPrivateSession, }) => {\n    await tokenOrchestrator.setOAuthMetadata({\n        oauthSignIn: true,\n    });\n    await oAuthStore.clearOAuthData();\n    await oAuthStore.storeOAuthSignIn(true, preferPrivateSession);\n    // this should be called before any call that involves `fetchAuthSession`\n    // e.g. `getCurrentUser()` below, so it allows every inflight async calls to\n    //  `fetchAuthSession` can be resolved\n    resolveAndClearInflightPromises();\n    if (isCustomState(state)) {\n        Hub.dispatch('auth', {\n            event: 'customOAuthState',\n            data: urlSafeDecode(getCustomState(state)),\n        }, 'Auth', AMPLIFY_SYMBOL);\n    }\n    Hub.dispatch('auth', { event: 'signInWithRedirect' }, 'Auth', AMPLIFY_SYMBOL);\n    await dispatchSignedInHubEvent();\n    clearHistory(redirectUri);\n};\nconst isCustomState = (state) => {\n    return /-/.test(state);\n};\nconst getCustomState = (state) => {\n    return state.split('-').splice(1).join('-');\n};\nconst clearHistory = (redirectUri) => {\n    if (typeof window !== 'undefined' && typeof window.history !== 'undefined') {\n        window.history.replaceState(window.history.state, '', redirectUri);\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { invalidOriginException, invalidPreferredRedirectUrlException, invalidRedirectException, } from '../../../../errors/constants';\n/** @internal */\nexport function getRedirectUrl(redirects, preferredRedirectUrl) {\n    if (preferredRedirectUrl) {\n        const redirectUrl = redirects?.find(redirect => redirect === preferredRedirectUrl);\n        if (!redirectUrl) {\n            throw invalidPreferredRedirectUrlException;\n        }\n        return redirectUrl;\n    }\n    else {\n        const redirectUrlFromTheSameOrigin = redirects?.find(isSameOriginAndPathName) ??\n            redirects?.find(isTheSameDomain);\n        const redirectUrlFromDifferentOrigin = redirects?.find(isHttps) ?? redirects?.find(isHttp);\n        if (redirectUrlFromTheSameOrigin) {\n            return redirectUrlFromTheSameOrigin;\n        }\n        else if (redirectUrlFromDifferentOrigin) {\n            throw invalidOriginException;\n        }\n        throw invalidRedirectException;\n    }\n}\n// origin + pathname => https://example.com/app\nconst isSameOriginAndPathName = (redirect) => redirect.startsWith(\n// eslint-disable-next-line no-constant-binary-expression\nString(window.location.origin + window.location.pathname ?? '/'));\n// domain => outlook.live.com, github.com\nconst isTheSameDomain = (redirect) => redirect.includes(String(window.location.hostname));\nconst isHttp = (redirect) => redirect.startsWith('http://');\nconst isHttps = (redirect) => redirect.startsWith('https://');\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { oAuthStore } from './oAuthStore';\nimport { resolveAndClearInflightPromises } from './inflightPromise';\nexport const handleFailure = async (error) => {\n    resolveAndClearInflightPromises();\n    await oAuthStore.clearOAuthInflightData();\n    Hub.dispatch('auth', { event: 'signInWithRedirect_failure', data: { error } }, 'Auth', AMPLIFY_SYMBOL);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthAction, assertOAuthConfig, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { getAuthUserAgentValue } from '../../../../utils';\nimport { oAuthStore } from './oAuthStore';\nimport { completeOAuthFlow } from './completeOAuthFlow';\nimport { getRedirectUrl } from './getRedirectUrl';\nimport { handleFailure } from './handleFailure';\nexport const attemptCompleteOAuthFlow = async (authConfig) => {\n    try {\n        assertTokenProviderConfig(authConfig);\n        assertOAuthConfig(authConfig);\n        oAuthStore.setAuthConfig(authConfig);\n    }\n    catch (_) {\n        // no-op\n        // This should not happen as Amplify singleton checks the oauth config key\n        // unless the oauth config object doesn't contain required properties\n        return;\n    }\n    // No inflight OAuth\n    if (!(await oAuthStore.loadOAuthInFlight())) {\n        return;\n    }\n    try {\n        const currentUrl = window.location.href;\n        const { loginWith, userPoolClientId } = authConfig;\n        const { domain, redirectSignIn, responseType } = loginWith.oauth;\n        const redirectUri = getRedirectUrl(redirectSignIn);\n        await completeOAuthFlow({\n            currentUrl,\n            clientId: userPoolClientId,\n            domain,\n            redirectUri,\n            responseType,\n            userAgentValue: getAuthUserAgentValue(AuthAction.SignInWithRedirect),\n        });\n    }\n    catch (err) {\n        await handleFailure(err);\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { ADD_OAUTH_LISTENER, isBrowser, } from '@aws-amplify/core/internals/utils';\nimport { attemptCompleteOAuthFlow } from './attemptCompleteOAuthFlow';\n// attach the side effect for handling the completion of an inflight oauth flow\n// this side effect works only on Web\nisBrowser() &&\n    (() => {\n        // add the listener to the singleton for triggering\n        Amplify[ADD_OAUTH_LISTENER](attemptCompleteOAuthFlow);\n    })();\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const cognitoHostedUIIdentityProviderMap = {\n    Google: 'Google',\n    Facebook: 'Facebook',\n    Amazon: 'LoginWithAmazon',\n    Apple: 'SignInWithApple',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const openAuthSession = async (url) => {\n    if (!window?.location) {\n        return;\n    }\n    // enforce HTTPS\n    window.location.href = url.replace('http://', 'https://');\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Sha256 } from '@aws-crypto/sha256-js';\nimport { base64Encoder, getCrypto } from '@aws-amplify/core/internals/utils';\nconst CODE_VERIFIER_CHARSET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n/**\n *\n * @param length Desired length of the code verifier.\n *\n * **NOTE:** According to the [RFC 7636](https://datatracker.ietf.org/doc/html/rfc7636#section-4.1)\n * A code verifier must be with a length >= 43 and <= 128.\n *\n * @returns An object that contains the generated `codeVerifier` and a method\n * `toCodeChallenge` to generate the code challenge from the `codeVerifier`\n * following the spec of [RFC 7636](https://datatracker.ietf.org/doc/html/rfc7636#section-4.2).\n */\nexport const generateCodeVerifier = (length) => {\n    const randomBytes = new Uint8Array(length);\n    getCrypto().getRandomValues(randomBytes);\n    let value = '';\n    let codeChallenge;\n    for (const byte of randomBytes) {\n        value += CODE_VERIFIER_CHARSET.charAt(byte % CODE_VERIFIER_CHARSET.length);\n    }\n    return {\n        value,\n        method: 'S256',\n        toCodeChallenge() {\n            if (codeChallenge) {\n                return codeChallenge;\n            }\n            codeChallenge = generateCodeChallenge(value);\n            return codeChallenge;\n        },\n    };\n};\nfunction generateCodeChallenge(codeVerifier) {\n    const awsCryptoHash = new Sha256();\n    awsCryptoHash.update(codeVerifier);\n    const codeChallenge = removePaddingChar(base64Encoder.convert(awsCryptoHash.digestSync(), { urlSafe: true }));\n    return codeChallenge;\n}\nfunction removePaddingChar(base64Encoded) {\n    return base64Encoded.replace(/=/g, '');\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { generateRandomString } from '@aws-amplify/core/internals/utils';\nexport const generateState = () => {\n    return generateRandomString(32);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { createOAuthError } from './createOAuthError';\nimport { handleFailure } from './handleFailure';\nexport const listenForOAuthFlowCancellation = (store) => {\n    async function handleCancelOAuthFlow(event) {\n        const isBfcache = event.persisted;\n        if (isBfcache && (await store.loadOAuthInFlight())) {\n            const error = createOAuthError('User cancelled OAuth flow.');\n            await handleFailure(error);\n        }\n        window.removeEventListener('pageshow', handleCancelOAuthFlow);\n    }\n    window.addEventListener('pageshow', handleCancelOAuthFlow);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { AuthAction, assertOAuthConfig, assertTokenProviderConfig, isBrowser, urlSafeEncode, } from '@aws-amplify/core/internals/utils';\nimport '../utils/oauth/enableOAuthListener';\nimport { cognitoHostedUIIdentityProviderMap } from '../types/models';\nimport { getAuthUserAgentValue, openAuthSession } from '../../../utils';\nimport { assertUserNotAuthenticated } from '../utils/signInHelpers';\nimport { completeOAuthFlow, generateCodeVerifier, generateState, getRedirectUrl, handleFailure, oAuthStore, } from '../utils/oauth';\nimport { createOAuthError } from '../utils/oauth/createOAuthError';\nimport { listenForOAuthFlowCancellation } from '../utils/oauth/cancelOAuthFlow';\n/**\n * Signs in a user with OAuth. Redirects the application to an Identity Provider.\n *\n * @param input - The SignInWithRedirectInput object, if empty it will redirect to Cognito HostedUI\n *\n * @throws AuthTokenConfigException - Thrown when the user pool config is invalid.\n * @throws OAuthNotConfigureException - Thrown when the oauth config is invalid.\n */\nexport async function signInWithRedirect(input) {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    assertOAuthConfig(authConfig);\n    oAuthStore.setAuthConfig(authConfig);\n    await assertUserNotAuthenticated();\n    let provider = 'COGNITO'; // Default\n    if (typeof input?.provider === 'string') {\n        provider = cognitoHostedUIIdentityProviderMap[input.provider];\n    }\n    else if (input?.provider?.custom) {\n        provider = input.provider.custom;\n    }\n    return oauthSignIn({\n        oauthConfig: authConfig.loginWith.oauth,\n        clientId: authConfig.userPoolClientId,\n        provider,\n        customState: input?.customState,\n        preferPrivateSession: input?.options?.preferPrivateSession,\n    });\n}\nconst oauthSignIn = async ({ oauthConfig, provider, clientId, customState, preferPrivateSession, }) => {\n    const { domain, redirectSignIn, responseType, scopes } = oauthConfig;\n    const randomState = generateState();\n    /* encodeURIComponent is not URL safe, use urlSafeEncode instead. Cognito\n    single-encodes/decodes url on first sign in and double-encodes/decodes url\n    when user already signed in. Using encodeURIComponent, Base32, Base64 add\n    characters % or = which on further encoding becomes unsafe. '=' create issue\n    for parsing query params.\n    Refer: https://github.com/aws-amplify/amplify-js/issues/5218 */\n    const state = customState\n        ? `${randomState}-${urlSafeEncode(customState)}`\n        : randomState;\n    const { value, method, toCodeChallenge } = generateCodeVerifier(128);\n    const redirectUri = getRedirectUrl(oauthConfig.redirectSignIn);\n    if (isBrowser())\n        oAuthStore.storeOAuthInFlight(true);\n    oAuthStore.storeOAuthState(state);\n    oAuthStore.storePKCE(value);\n    const queryString = Object.entries({\n        redirect_uri: redirectUri,\n        response_type: responseType,\n        client_id: clientId,\n        identity_provider: provider,\n        scope: scopes.join(' '),\n        state,\n        ...(responseType === 'code' && {\n            code_challenge: toCodeChallenge(),\n            code_challenge_method: method,\n        }),\n    })\n        .map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`)\n        .join('&');\n    // TODO(v6): use URL object instead\n    const oAuthUrl = `https://${domain}/oauth2/authorize?${queryString}`;\n    // this will only take effect in the following scenarios:\n    // 1. the user cancels the OAuth flow on web via back button, and\n    // 2. when bfcache is enabled\n    listenForOAuthFlowCancellation(oAuthStore);\n    // the following is effective only in react-native as openAuthSession resolves only in react-native\n    const { type, error, url } = (await openAuthSession(oAuthUrl, redirectSignIn, preferPrivateSession)) ??\n        {};\n    try {\n        if (type === 'error') {\n            throw createOAuthError(String(error));\n        }\n        if (type === 'success' && url) {\n            await completeOAuthFlow({\n                currentUrl: url,\n                clientId,\n                domain,\n                redirectUri,\n                responseType,\n                userAgentValue: getAuthUserAgentValue(AuthAction.SignInWithRedirect),\n                preferPrivateSession,\n            });\n        }\n    }\n    catch (err) {\n        await handleFailure(err);\n        // rethrow the error so it can be caught by `await signInWithRedirect()` in react-native\n        throw err;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { AuthAction, assertTokenProviderConfig, fetchAuthSession, } from '@aws-amplify/core/internals/utils';\nimport { getRegionFromUserPoolId } from '../../../../foundation/parsers';\nimport { assertAuthTokens } from '../../utils/types';\nimport { toAuthUserAttribute } from '../../utils/apiHelpers';\nimport { getAuthUserAgentValue } from '../../../../utils';\nimport { createGetUserClient } from '../../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../../factories';\nexport const fetchUserAttributes = async (amplify) => {\n    const authConfig = amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolEndpoint, userPoolId } = authConfig;\n    const { tokens } = await fetchAuthSession(amplify, {\n        forceRefresh: false,\n    });\n    assertAuthTokens(tokens);\n    const getUser = createGetUserClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { UserAttributes } = await getUser({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.FetchUserAttributes),\n    }, {\n        AccessToken: tokens.accessToken.toString(),\n    });\n    return toAuthUserAttribute(UserAttributes);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify } from '@aws-amplify/core';\nimport { fetchUserAttributes as fetchUserAttributesInternal } from './internal/fetchUserAttributes';\n/**\n * Fetches the current user attributes while authenticated.\n *\n * @throws - {@link GetUserException} - Cognito service errors thrown when the service is not able to get the user.\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport const fetchUserAttributes = () => {\n    return fetchUserAttributesInternal(Amplify);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Hub, clearCredentials } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL } from '@aws-amplify/core/internals/utils';\nimport { tokenOrchestrator } from '../../tokenProvider';\nexport const completeOAuthSignOut = async (store) => {\n    await store.clearOAuthData();\n    tokenOrchestrator.clearTokens();\n    await clearCredentials();\n    Hub.dispatch('auth', { event: 'signedOut' }, 'Auth', AMPLIFY_SYMBOL);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { assertOAuthConfig } from '@aws-amplify/core/internals/utils';\nimport { openAuthSession } from '../../../../utils';\nimport { getRedirectUrl } from './getRedirectUrl';\nexport const oAuthSignOutRedirect = async (authConfig, preferPrivateSession = false, redirectUrl) => {\n    assertOAuthConfig(authConfig);\n    const { loginWith, userPoolClientId } = authConfig;\n    const { domain, redirectSignOut } = loginWith.oauth;\n    const signoutUri = getRedirectUrl(redirectSignOut, redirectUrl);\n    const oAuthLogoutEndpoint = `https://${domain}/logout?${Object.entries({\n        client_id: userPoolClientId,\n        logout_uri: encodeURIComponent(signoutUri),\n    })\n        .map(([k, v]) => `${k}=${v}`)\n        .join('&')}`;\n    return openAuthSession(oAuthLogoutEndpoint, redirectSignOut, preferPrivateSession);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { completeOAuthSignOut } from './completeOAuthSignOut';\nimport { oAuthSignOutRedirect } from './oAuthSignOutRedirect';\nexport const handleOAuthSignOut = async (cognitoConfig, store, tokenOrchestrator, redirectUrl) => {\n    const { isOAuthSignIn } = await store.loadOAuthSignIn();\n    const oauthMetadata = await tokenOrchestrator.getOAuthMetadata();\n    // Clear everything before attempting to visted logout endpoint since the current application\n    // state could be wiped away on redirect\n    await completeOAuthSignOut(store);\n    // The isOAuthSignIn flag is propagated by the oAuthToken store which manages oauth keys in local storage only.\n    // These keys are used to determine if a user is in an inflight or signedIn oauth states.\n    // However, this behavior represents an issue when 2 apps share the same set of tokens in Cookie storage because the app that didn't\n    // start the OAuth will not have access to the oauth keys.\n    // A heuristic solution is to add oauth metadata to the tokenOrchestrator which will have access to the underlying\n    // storage mechanism that is used by Amplify.\n    if (isOAuthSignIn || oauthMetadata?.oauthSignIn) {\n        // On web, this will always end up being a void action\n        return oAuthSignOutRedirect(cognitoConfig, false, redirectUrl);\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createRevokeTokenClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('RevokeToken'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createGlobalSignOutClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('GlobalSignOut'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, ConsoleLogger, Hub, clearCredentials, defaultStorage, } from '@aws-amplify/core';\nimport { AMPLIFY_SYMBOL, AuthAction, assertOAuthConfig, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokens, assertAuthTokensWithRefreshToken, } from '../utils/types';\nimport { handleOAuthSignOut } from '../utils/oauth';\nimport { DefaultOAuthStore } from '../utils/signInWithRedirectStore';\nimport { AuthError } from '../../../errors/AuthError';\nimport { OAUTH_SIGNOUT_EXCEPTION } from '../../../errors/constants';\nimport { createGlobalSignOutClient, createRevokeTokenClient, } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nconst logger = new ConsoleLogger('Auth');\n/**\n * Signs a user out\n *\n * @param input - The SignOutInput object\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function signOut(input) {\n    const cognitoConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(cognitoConfig);\n    if (input?.global) {\n        await globalSignOut(cognitoConfig);\n    }\n    else {\n        await clientSignOut(cognitoConfig);\n    }\n    let hasOAuthConfig;\n    try {\n        assertOAuthConfig(cognitoConfig);\n        hasOAuthConfig = true;\n    }\n    catch (err) {\n        hasOAuthConfig = false;\n    }\n    if (hasOAuthConfig) {\n        const oAuthStore = new DefaultOAuthStore(defaultStorage);\n        oAuthStore.setAuthConfig(cognitoConfig);\n        const { type } = (await handleOAuthSignOut(cognitoConfig, oAuthStore, tokenOrchestrator, input?.oauth?.redirectUrl)) ?? {};\n        if (type === 'error') {\n            throw new AuthError({\n                name: OAUTH_SIGNOUT_EXCEPTION,\n                message: `An error occurred when attempting to log out from OAuth provider.`,\n            });\n        }\n    }\n    else {\n        // complete sign out\n        tokenOrchestrator.clearTokens();\n        await clearCredentials();\n        Hub.dispatch('auth', { event: 'signedOut' }, 'Auth', AMPLIFY_SYMBOL);\n    }\n}\nasync function clientSignOut(cognitoConfig) {\n    try {\n        const { userPoolEndpoint, userPoolId, userPoolClientId } = cognitoConfig;\n        const authTokens = await tokenOrchestrator.getTokenStore().loadTokens();\n        assertAuthTokensWithRefreshToken(authTokens);\n        if (isSessionRevocable(authTokens.accessToken)) {\n            const revokeToken = createRevokeTokenClient({\n                endpointResolver: createCognitoUserPoolEndpointResolver({\n                    endpointOverride: userPoolEndpoint,\n                }),\n            });\n            await revokeToken({\n                region: getRegionFromUserPoolId(userPoolId),\n                userAgentValue: getAuthUserAgentValue(AuthAction.SignOut),\n            }, {\n                ClientId: userPoolClientId,\n                Token: authTokens.refreshToken,\n            });\n        }\n    }\n    catch (err) {\n        // this shouldn't throw\n        logger.debug('Client signOut error caught but will proceed with token removal');\n    }\n}\nasync function globalSignOut(cognitoConfig) {\n    try {\n        const { userPoolEndpoint, userPoolId } = cognitoConfig;\n        const authTokens = await tokenOrchestrator.getTokenStore().loadTokens();\n        assertAuthTokens(authTokens);\n        const globalSignOutClient = createGlobalSignOutClient({\n            endpointResolver: createCognitoUserPoolEndpointResolver({\n                endpointOverride: userPoolEndpoint,\n            }),\n        });\n        await globalSignOutClient({\n            region: getRegionFromUserPoolId(userPoolId),\n            userAgentValue: getAuthUserAgentValue(AuthAction.SignOut),\n        }, {\n            AccessToken: authTokens.accessToken.toString(),\n        });\n    }\n    catch (err) {\n        // it should not throw\n        logger.debug('Global signOut error caught but will proceed with token removal');\n    }\n}\nconst isSessionRevocable = (token) => !!token?.payload?.origin_jti;\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createUserPoolDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createGetUserAttributeVerificationCodeClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('GetUserAttributeVerificationCode'), createUserPoolDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, fetchAuthSession } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { assertAuthTokens } from '../utils/types';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createGetUserAttributeVerificationCodeClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\n/**\n * Resends user's confirmation code when updating attributes while authenticated.\n *\n * @param input - The SendUserAttributeVerificationCodeInput object\n * @returns SendUserAttributeVerificationCodeOutput\n * @throws - {@link GetUserAttributeVerificationException}\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport const sendUserAttributeVerificationCode = async (input) => {\n    const { userAttributeKey, options } = input;\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    const clientMetadata = options?.clientMetadata;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolEndpoint, userPoolId } = authConfig;\n    const { tokens } = await fetchAuthSession({ forceRefresh: false });\n    assertAuthTokens(tokens);\n    const getUserAttributeVerificationCode = createGetUserAttributeVerificationCodeClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    const { CodeDeliveryDetails } = await getUserAttributeVerificationCode({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.SendUserAttributeVerificationCode),\n    }, {\n        AccessToken: tokens.accessToken.toString(),\n        ClientMetadata: clientMetadata,\n        AttributeName: userAttributeKey,\n    });\n    const { DeliveryMedium, AttributeName, Destination } = {\n        ...CodeDeliveryDetails,\n    };\n    return {\n        destination: Destination,\n        deliveryMedium: DeliveryMedium,\n        attributeName: AttributeName,\n    };\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { parseJsonError, } from '@aws-amplify/core/internals/aws-client-utils';\nimport { assertServiceError } from '../../../../../../errors/utils/assertServiceError';\nimport { AuthError } from '../../../../../../errors/AuthError';\nexport const createEmptyResponseDeserializer = () => async (response) => {\n    if (response.statusCode >= 300) {\n        const error = await parseJsonError(response);\n        assertServiceError(error);\n        throw new AuthError({ name: error.name, message: error.message });\n    }\n    else {\n        return undefined;\n    }\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { composeServiceApi } from '@aws-amplify/core/internals/aws-client-utils/composers';\nimport { cognitoUserPoolTransferHandler } from './shared/handler';\nimport { createEmptyResponseDeserializer, createUserPoolSerializer, } from './shared/serde';\nimport { DEFAULT_SERVICE_CLIENT_API_CONFIG } from './constants';\nexport const createDeleteUserClient = (config) => composeServiceApi(cognitoUserPoolTransferHandler, createUserPoolSerializer('DeleteUser'), createEmptyResponseDeserializer(), {\n    ...DEFAULT_SERVICE_CLIENT_API_CONFIG,\n    ...config,\n});\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, fetchAuthSession } from '@aws-amplify/core';\nimport { AuthAction, assertTokenProviderConfig, } from '@aws-amplify/core/internals/utils';\nimport { getRegionFromUserPoolId } from '../../../foundation/parsers';\nimport { assertAuthTokens } from '../utils/types';\nimport { tokenOrchestrator } from '../tokenProvider';\nimport { getAuthUserAgentValue } from '../../../utils';\nimport { createDeleteUserClient } from '../../../foundation/factories/serviceClients/cognitoIdentityProvider';\nimport { createCognitoUserPoolEndpointResolver } from '../factories';\nimport { signOut } from './signOut';\n/**\n * Deletes a user from the user pool while authenticated.\n *\n * @throws - {@link DeleteUserException}\n * @throws AuthTokenConfigException - Thrown when the token provider config is invalid.\n */\nexport async function deleteUser() {\n    const authConfig = Amplify.getConfig().Auth?.Cognito;\n    assertTokenProviderConfig(authConfig);\n    const { userPoolEndpoint, userPoolId } = authConfig;\n    const { tokens } = await fetchAuthSession();\n    assertAuthTokens(tokens);\n    const serviceDeleteUser = createDeleteUserClient({\n        endpointResolver: createCognitoUserPoolEndpointResolver({\n            endpointOverride: userPoolEndpoint,\n        }),\n    });\n    await serviceDeleteUser({\n        region: getRegionFromUserPoolId(userPoolId),\n        userAgentValue: getAuthUserAgentValue(AuthAction.DeleteUser),\n    }, {\n        AccessToken: tokens.accessToken.toString(),\n    });\n    await tokenOrchestrator.clearDeviceMetadata();\n    await signOut();\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nexport const IdentityIdStorageKeys = {\n    identityId: 'identityId',\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig } from '@aws-amplify/core/internals/utils';\nimport { getAuthStorageKeys } from '../tokenProvider/TokenStore';\nimport { IdentityIdStorageKeys } from './types';\nconst logger = new ConsoleLogger('DefaultIdentityIdStore');\nexport class DefaultIdentityIdStore {\n    setAuthConfig(authConfigParam) {\n        assertIdentityPoolIdConfig(authConfigParam.Cognito);\n        this.authConfig = authConfigParam;\n        this._authKeys = createKeysForAuthStorage('Cognito', authConfigParam.Cognito.identityPoolId);\n    }\n    constructor(keyValueStorage) {\n        this._authKeys = {};\n        this._hasGuestIdentityId = false;\n        this.keyValueStorage = keyValueStorage;\n    }\n    async loadIdentityId() {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        try {\n            if (this._primaryIdentityId) {\n                return {\n                    id: this._primaryIdentityId,\n                    type: 'primary',\n                };\n            }\n            else {\n                const storedIdentityId = await this.keyValueStorage.getItem(this._authKeys.identityId);\n                if (storedIdentityId) {\n                    this._hasGuestIdentityId = true;\n                    return {\n                        id: storedIdentityId,\n                        type: 'guest',\n                    };\n                }\n                return null;\n            }\n        }\n        catch (err) {\n            logger.log('Error getting stored IdentityId.', err);\n            return null;\n        }\n    }\n    async storeIdentityId(identity) {\n        assertIdentityPoolIdConfig(this.authConfig?.Cognito);\n        if (identity.type === 'guest') {\n            this.keyValueStorage.setItem(this._authKeys.identityId, identity.id);\n            // Clear in-memory storage of primary identityId\n            this._primaryIdentityId = undefined;\n            this._hasGuestIdentityId = true;\n        }\n        else {\n            this._primaryIdentityId = identity.id;\n            // Clear locally stored guest id\n            if (this._hasGuestIdentityId) {\n                this.keyValueStorage.removeItem(this._authKeys.identityId);\n                this._hasGuestIdentityId = false;\n            }\n        }\n    }\n    async clearIdentityId() {\n        this._primaryIdentityId = undefined;\n        await this.keyValueStorage.removeItem(this._authKeys.identityId);\n    }\n}\nconst createKeysForAuthStorage = (provider, identifier) => {\n    return getAuthStorageKeys(IdentityIdStorageKeys)(`com.amplify.${provider}`, identifier);\n};\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { decodeJWT } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nexport function formLoginsMap(idToken) {\n    const issuer = decodeJWT(idToken).payload.iss;\n    const res = {};\n    if (!issuer) {\n        throw new AuthError({\n            name: 'InvalidIdTokenException',\n            message: 'Invalid Idtoken.',\n        });\n    }\n    const domainName = issuer.replace(/(^\\w+:|^)\\/\\//, '');\n    res[domainName] = idToken;\n    return res;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, getId } from '@aws-amplify/core';\nimport { AuthError } from '../../../errors/AuthError';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers';\nimport { formLoginsMap } from './utils';\nconst logger = new ConsoleLogger('CognitoIdentityIdProvider');\n/**\n * Provides a Cognito identityId\n *\n * @param tokens - The AuthTokens received after SignIn\n * @returns string\n * @throws configuration exceptions: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service exceptions: {@link GetIdException }\n */\nexport async function cognitoIdentityIdProvider({ tokens, authConfig, identityIdStore, }) {\n    identityIdStore.setAuthConfig({ Cognito: authConfig });\n    // will return null only if there is no identityId cached or if there is an error retrieving it\n    let identityId = await identityIdStore.loadIdentityId();\n    // Tokens are available so return primary identityId\n    if (tokens) {\n        // If there is existing primary identityId in-memory return that\n        if (identityId && identityId.type === 'primary') {\n            return identityId.id;\n        }\n        else {\n            const logins = tokens.idToken\n                ? formLoginsMap(tokens.idToken.toString())\n                : {};\n            const generatedIdentityId = await generateIdentityId(logins, authConfig);\n            if (identityId && identityId.id === generatedIdentityId) {\n                logger.debug(`The guest identity ${identityId.id} has become the primary identity.`);\n            }\n            identityId = {\n                id: generatedIdentityId,\n                type: 'primary',\n            };\n        }\n    }\n    else {\n        // If there is existing guest identityId cached return that\n        if (identityId && identityId.type === 'guest') {\n            return identityId.id;\n        }\n        else {\n            identityId = {\n                id: await generateIdentityId({}, authConfig),\n                type: 'guest',\n            };\n        }\n    }\n    // Store in-memory or local storage depending on guest or primary identityId\n    identityIdStore.storeIdentityId(identityId);\n    return identityId.id;\n}\nasync function generateIdentityId(logins, authConfig) {\n    const identityPoolId = authConfig?.identityPoolId;\n    const region = getRegionFromIdentityPoolId(identityPoolId);\n    // IdentityId is absent so get it using IdentityPoolId with Cognito's GetId API\n    const idResult = \n    // for a first-time user, this will return a brand new identity\n    // for a returning user, this will retrieve the previous identity assocaited with the logins\n    (await getId({\n        region,\n    }, {\n        IdentityPoolId: identityPoolId,\n        Logins: logins,\n    })).IdentityId;\n    if (!idResult) {\n        throw new AuthError({\n            name: 'GetIdResponseException',\n            message: 'Received undefined response from getId operation',\n            recoverySuggestion: 'Make sure to pass a valid identityPoolId in the configuration.',\n        });\n    }\n    return idResult;\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { ConsoleLogger, getCredentialsForIdentity, } from '@aws-amplify/core';\nimport { assertIdentityPoolIdConfig, } from '@aws-amplify/core/internals/utils';\nimport { AuthError } from '../../../errors/AuthError';\nimport { getRegionFromIdentityPoolId } from '../../../foundation/parsers';\nimport { assertIdTokenInAuthTokens } from '../utils/types';\nimport { cognitoIdentityIdProvider } from './IdentityIdProvider';\nimport { formLoginsMap } from './utils';\nconst logger = new ConsoleLogger('CognitoCredentialsProvider');\nconst CREDENTIALS_TTL = 50 * 60 * 1000; // 50 min, can be modified on config if required in the future\nexport class CognitoAWSCredentialsAndIdentityIdProvider {\n    constructor(identityIdStore) {\n        this._nextCredentialsRefresh = 0;\n        this._identityIdStore = identityIdStore;\n    }\n    async clearCredentialsAndIdentityId() {\n        logger.debug('Clearing out credentials and identityId');\n        this._credentialsAndIdentityId = undefined;\n        await this._identityIdStore.clearIdentityId();\n    }\n    async clearCredentials() {\n        logger.debug('Clearing out in-memory credentials');\n        this._credentialsAndIdentityId = undefined;\n    }\n    async getCredentialsAndIdentityId(getCredentialsOptions) {\n        const isAuthenticated = getCredentialsOptions.authenticated;\n        const { tokens } = getCredentialsOptions;\n        const { authConfig } = getCredentialsOptions;\n        try {\n            assertIdentityPoolIdConfig(authConfig?.Cognito);\n        }\n        catch {\n            // No identity pool configured, skipping\n            return;\n        }\n        if (!isAuthenticated && !authConfig.Cognito.allowGuestAccess) {\n            // TODO(V6): return partial result like Native platforms\n            return;\n        }\n        const { forceRefresh } = getCredentialsOptions;\n        const tokenHasChanged = this.hasTokenChanged(tokens);\n        const identityId = await cognitoIdentityIdProvider({\n            tokens,\n            authConfig: authConfig.Cognito,\n            identityIdStore: this._identityIdStore,\n        });\n        // Clear cached credentials when forceRefresh is true OR the cache token has changed\n        if (forceRefresh || tokenHasChanged) {\n            this.clearCredentials();\n        }\n        if (!isAuthenticated) {\n            return this.getGuestCredentials(identityId, authConfig.Cognito);\n        }\n        else {\n            assertIdTokenInAuthTokens(tokens);\n            return this.credsForOIDCTokens(authConfig.Cognito, tokens, identityId);\n        }\n    }\n    async getGuestCredentials(identityId, authConfig) {\n        // Return existing in-memory cached credentials only if it exists, is not past it's lifetime and is unauthenticated credentials\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === false) {\n            logger.info('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any authenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        // use identityId to obtain guest credentials\n        // save credentials in-memory\n        // No logins params should be passed for guest creds:\n        // https://docs.aws.amazon.com/cognitoidentity/latest/APIReference/API_GetCredentialsForIdentity.html\n        const clientResult = await getCredentialsForIdentity({ region }, {\n            IdentityId: identityId,\n        });\n        if (clientResult.Credentials &&\n            clientResult.Credentials.AccessKeyId &&\n            clientResult.Credentials.SecretKey) {\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            const identityIdRes = clientResult.IdentityId;\n            if (identityIdRes) {\n                res.identityId = identityIdRes;\n                this._identityIdStore.storeIdentityId({\n                    id: identityIdRes,\n                    type: 'guest',\n                });\n            }\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: false,\n            };\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsNotFoundException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    async credsForOIDCTokens(authConfig, authTokens, identityId) {\n        if (this._credentialsAndIdentityId &&\n            !this.isPastTTL() &&\n            this._credentialsAndIdentityId.isAuthenticatedCreds === true) {\n            logger.debug('returning stored credentials as they neither past TTL nor expired.');\n            return this._credentialsAndIdentityId;\n        }\n        // Clear to discard if any unauthenticated credentials are set and start with a clean slate\n        this.clearCredentials();\n        const logins = authTokens.idToken\n            ? formLoginsMap(authTokens.idToken.toString())\n            : {};\n        const region = getRegionFromIdentityPoolId(authConfig.identityPoolId);\n        const clientResult = await getCredentialsForIdentity({ region }, {\n            IdentityId: identityId,\n            Logins: logins,\n        });\n        if (clientResult.Credentials &&\n            clientResult.Credentials.AccessKeyId &&\n            clientResult.Credentials.SecretKey) {\n            const res = {\n                credentials: {\n                    accessKeyId: clientResult.Credentials.AccessKeyId,\n                    secretAccessKey: clientResult.Credentials.SecretKey,\n                    sessionToken: clientResult.Credentials.SessionToken,\n                    expiration: clientResult.Credentials.Expiration,\n                },\n                identityId,\n            };\n            // Store the credentials in-memory along with the expiration\n            this._credentialsAndIdentityId = {\n                ...res,\n                isAuthenticatedCreds: true,\n                associatedIdToken: authTokens.idToken?.toString(),\n            };\n            this._nextCredentialsRefresh = new Date().getTime() + CREDENTIALS_TTL;\n            const identityIdRes = clientResult.IdentityId;\n            if (identityIdRes) {\n                res.identityId = identityIdRes;\n                this._identityIdStore.storeIdentityId({\n                    id: identityIdRes,\n                    type: 'primary',\n                });\n            }\n            return res;\n        }\n        else {\n            throw new AuthError({\n                name: 'CredentialsException',\n                message: `Cognito did not respond with either Credentials, AccessKeyId or SecretKey.`,\n            });\n        }\n    }\n    isPastTTL() {\n        return this._nextCredentialsRefresh === undefined\n            ? true\n            : this._nextCredentialsRefresh <= Date.now();\n    }\n    hasTokenChanged(tokens) {\n        return (!!tokens &&\n            !!this._credentialsAndIdentityId?.associatedIdToken &&\n            tokens.idToken?.toString() !==\n                this._credentialsAndIdentityId.associatedIdToken);\n    }\n}\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { defaultStorage } from '@aws-amplify/core';\nimport { DefaultIdentityIdStore } from './IdentityIdStore';\nimport { CognitoAWSCredentialsAndIdentityIdProvider } from './credentialsProvider';\n/**\n * Cognito specific implmentation of the CredentialsProvider interface\n * that manages setting and getting of AWS Credentials.\n *\n * @throws configuration expections: `InvalidIdentityPoolIdException`\n *  - Auth errors that may arise from misconfiguration.\n * @throws service expections: {@link GetCredentialsForIdentityException}, {@link GetIdException}\n *\n */\nexport const cognitoCredentialsProvider = new CognitoAWSCredentialsAndIdentityIdProvider(new DefaultIdentityIdStore(defaultStorage));\nexport { CognitoAWSCredentialsAndIdentityIdProvider, DefaultIdentityIdStore };\n", "// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { Amplify, CookieStorage, defaultStorage, } from '@aws-amplify/core';\nimport { parseAmplifyConfig, } from '@aws-amplify/core/internals/utils';\nimport { cognitoCredentialsProvider, cognitoUserPoolsTokenProvider, } from './auth/cognito';\nexport const DefaultAmplify = {\n    /**\n     * Configures Amplify with the {@link resourceConfig} and {@link libraryOptions}.\n     *\n     * @param resourceConfig The {@link ResourcesConfig} object that is typically imported from the\n     * `amplifyconfiguration.json` file. It can also be an object literal created inline when calling `Amplify.configure`.\n     * @param libraryOptions The {@link LibraryOptions} additional options for the library.\n     *\n     * @example\n     * import config from './amplifyconfiguration.json';\n     *\n     * Amplify.configure(config);\n     */\n    configure(resourceConfig, libraryOptions) {\n        const resolvedResourceConfig = parseAmplifyConfig(resourceConfig);\n        // If no Auth config is provided, no special handling will be required, configure as is.\n        // Otherwise, we can assume an Auth config is provided from here on.\n        if (!resolvedResourceConfig.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If Auth options are provided, always just configure as is.\n        // Otherwise, we can assume no Auth libraryOptions were provided from here on.\n        if (libraryOptions?.Auth) {\n            Amplify.configure(resolvedResourceConfig, libraryOptions);\n            return;\n        }\n        // If no Auth libraryOptions were previously configured, then always add default providers.\n        if (!Amplify.libraryOptions.Auth) {\n            cognitoUserPoolsTokenProvider.setAuthConfig(resolvedResourceConfig.Auth);\n            cognitoUserPoolsTokenProvider.setKeyValueStorage(\n            // TODO: allow configure with a public interface\n            libraryOptions?.ssr\n                ? new CookieStorage({ sameSite: 'lax' })\n                : defaultStorage);\n            Amplify.configure(resolvedResourceConfig, {\n                ...libraryOptions,\n                Auth: {\n                    tokenProvider: cognitoUserPoolsTokenProvider,\n                    credentialsProvider: cognitoCredentialsProvider,\n                },\n            });\n            return;\n        }\n        // At this point, Auth libraryOptions would have been previously configured and no overriding\n        // Auth options were given, so we should preserve the currently configured Auth libraryOptions.\n        if (libraryOptions) {\n            // If ssr is provided through libraryOptions, we should respect the intentional reconfiguration.\n            if (libraryOptions.ssr !== undefined) {\n                cognitoUserPoolsTokenProvider.setKeyValueStorage(\n                // TODO: allow configure with a public interface\n                libraryOptions.ssr\n                    ? new CookieStorage({ sameSite: 'lax' })\n                    : defaultStorage);\n            }\n            Amplify.configure(resolvedResourceConfig, {\n                Auth: Amplify.libraryOptions.Auth,\n                ...libraryOptions,\n            });\n            return;\n        }\n        // Finally, if there were no libraryOptions given at all, we should simply not touch the currently\n        // configured libraryOptions.\n        Amplify.configure(resolvedResourceConfig);\n    },\n    /**\n     * Returns the {@link ResourcesConfig} object passed in as the `resourceConfig` parameter when calling\n     * `Amplify.configure`.\n     *\n     * @returns An {@link ResourcesConfig} object.\n     */\n    getConfig() {\n        return Amplify.getConfig();\n    },\n};\n"],
  "mappings": "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",
  "names": ["AuthValidationErrorCode", "AuthErrorStrings", "AuthErrorCodes", "name", "AssociateSoftwareTokenException", "ChangePasswordException", "ConfirmDeviceException", "ConfirmForgotPasswordException", "ConfirmSignUpException", "DeleteUserAttributesException", "DeleteUserException", "ForgetDeviceException", "ForgotPasswordException", "GetUserException", "GetIdException", "GetCredentialsForIdentityException", "GetUserAttributeVerificationException", "GlobalSignOutException", "InitiateAuthException", "ResendConfirmationException", "RespondToAuthChallengeException", "SetUserMFAPreferenceException", "SignUpException", "UpdateUserAttributesException", "VerifySoftwareTokenException", "VerifyUserAttributeException", "UpdateDeviceStatusException", "ListDevicesException", "getCurrentUser", "getCurrentUserInternal", "tokenOrchestrator", "getCurrentUser", "TokenProviderErrorCode", "createKeysForAuthStorage", "oauthSignIn", "getCurrentUser", "autoSignIn", "fetchAuthSession", "fetchAuthSession", "AuthErrorTypes", "fetchUserAttributes", "fetchUserAttributesInternal", "tokenOrchestrator", "logger", "oAuthStore", "fetchAuthSession", "fetchAuthSession", "logger", "createKeysForAuthStorage", "logger", "logger", "isAuthenticated"]
}
