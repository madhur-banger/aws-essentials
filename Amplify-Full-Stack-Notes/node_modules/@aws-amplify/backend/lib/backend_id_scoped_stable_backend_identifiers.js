import { createHash } from 'crypto';
const HASH_LENGTH = 20;
/**
 * Gets a stable hash value derived from BackendIdentifier
 */
export class BackendIdScopedStableBackendIdentifiers {
    backendId;
    hash;
    /**
     * Creates a StableBackendHashGetter instance.
     */
    constructor(backendId) {
        this.backendId = backendId;
        this.hash = this.hashFromBackendId();
    }
    getStableBackendHash = () => this.hash;
    hashFromBackendId = () => createHash('sha512')
        .update(this.backendId.type)
        .update(this.backendId.namespace)
        .update(this.backendId.name)
        .digest('hex')
        .slice(0, HASH_LENGTH);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZF9pZF9zY29wZWRfc3RhYmxlX2JhY2tlbmRfaWRlbnRpZmllcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvYmFja2VuZF9pZF9zY29wZWRfc3RhYmxlX2JhY2tlbmRfaWRlbnRpZmllcnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBSUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUVwQyxNQUFNLFdBQVcsR0FBRyxFQUFFLENBQUM7QUFFdkI7O0dBRUc7QUFDSCxNQUFNLE9BQU8sdUNBQXVDO0lBUXJCO0lBTHJCLElBQUksQ0FBUztJQUVyQjs7T0FFRztJQUNILFlBQTZCLFNBQTRCO1FBQTVCLGNBQVMsR0FBVCxTQUFTLENBQW1CO1FBQ3ZELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVELG9CQUFvQixHQUFHLEdBQVcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFFdkMsaUJBQWlCLEdBQUcsR0FBVyxFQUFFLENBQ3ZDLFVBQVUsQ0FBQyxRQUFRLENBQUM7U0FDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1NBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztTQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUM7U0FDM0IsTUFBTSxDQUFDLEtBQUssQ0FBQztTQUNiLEtBQUssQ0FBQyxDQUFDLEVBQUUsV0FBVyxDQUFDLENBQUM7Q0FDNUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBCYWNrZW5kSWRlbnRpZmllcixcbiAgU3RhYmxlQmFja2VuZElkZW50aWZpZXJzLFxufSBmcm9tICdAYXdzLWFtcGxpZnkvcGx1Z2luLXR5cGVzJztcbmltcG9ydCB7IGNyZWF0ZUhhc2ggfSBmcm9tICdjcnlwdG8nO1xuXG5jb25zdCBIQVNIX0xFTkdUSCA9IDIwO1xuXG4vKipcbiAqIEdldHMgYSBzdGFibGUgaGFzaCB2YWx1ZSBkZXJpdmVkIGZyb20gQmFja2VuZElkZW50aWZpZXJcbiAqL1xuZXhwb3J0IGNsYXNzIEJhY2tlbmRJZFNjb3BlZFN0YWJsZUJhY2tlbmRJZGVudGlmaWVyc1xuICBpbXBsZW1lbnRzIFN0YWJsZUJhY2tlbmRJZGVudGlmaWVyc1xue1xuICBwcml2YXRlIGhhc2g6IHN0cmluZztcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIFN0YWJsZUJhY2tlbmRIYXNoR2V0dGVyIGluc3RhbmNlLlxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBiYWNrZW5kSWQ6IEJhY2tlbmRJZGVudGlmaWVyKSB7XG4gICAgdGhpcy5oYXNoID0gdGhpcy5oYXNoRnJvbUJhY2tlbmRJZCgpO1xuICB9XG5cbiAgZ2V0U3RhYmxlQmFja2VuZEhhc2ggPSAoKTogc3RyaW5nID0+IHRoaXMuaGFzaDtcblxuICBwcml2YXRlIGhhc2hGcm9tQmFja2VuZElkID0gKCk6IHN0cmluZyA9PlxuICAgIGNyZWF0ZUhhc2goJ3NoYTUxMicpXG4gICAgICAudXBkYXRlKHRoaXMuYmFja2VuZElkLnR5cGUpXG4gICAgICAudXBkYXRlKHRoaXMuYmFja2VuZElkLm5hbWVzcGFjZSlcbiAgICAgIC51cGRhdGUodGhpcy5iYWNrZW5kSWQubmFtZSlcbiAgICAgIC5kaWdlc3QoJ2hleCcpXG4gICAgICAuc2xpY2UoMCwgSEFTSF9MRU5HVEgpO1xufVxuIl19