import { getClientConfigFileName, getClientConfigPath, } from '@aws-amplify/client-config';
import fsp from 'fs/promises';
/**
 * Life cycle handler for client config files written to file system
 */
export class ClientConfigLifecycleHandler {
    clientConfigGeneratorAdapter;
    version;
    outDir;
    format;
    /**
     * Instantiate a new life cycle handler which proxy requests to ClientConfigGeneratorAdapter
     */
    constructor(clientConfigGeneratorAdapter, version, outDir, format) {
        this.clientConfigGeneratorAdapter = clientConfigGeneratorAdapter;
        this.version = version;
        this.outDir = outDir;
        this.format = format;
    }
    generateClientConfigFile = async (backendIdentifier) => {
        await this.clientConfigGeneratorAdapter.generateClientConfigToFile(backendIdentifier, this.version, this.outDir, this.format);
    };
    deleteClientConfigFile = async () => {
        const fileName = getClientConfigFileName(this.version);
        const path = await getClientConfigPath(fileName, this.outDir, this.format);
        await fsp.rm(path);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50X2NvbmZpZ19saWZlY3ljbGVfaGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jbGllbnQtY29uZmlnL2NsaWVudF9jb25maWdfbGlmZWN5Y2xlX2hhbmRsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUdMLHVCQUF1QixFQUN2QixtQkFBbUIsR0FDcEIsTUFBTSw0QkFBNEIsQ0FBQztBQUdwQyxPQUFPLEdBQUcsTUFBTSxhQUFhLENBQUM7QUFFOUI7O0dBRUc7QUFDSCxNQUFNLE9BQU8sNEJBQTRCO0lBSzdCO0lBQ1M7SUFDQTtJQUNBO0lBUG5COztPQUVHO0lBQ0gsWUFDVSw0QkFBMEQsRUFDakQsT0FBNEIsRUFDNUIsTUFBZSxFQUNmLE1BQTJCO1FBSHBDLGlDQUE0QixHQUE1Qiw0QkFBNEIsQ0FBOEI7UUFDakQsWUFBTyxHQUFQLE9BQU8sQ0FBcUI7UUFDNUIsV0FBTSxHQUFOLE1BQU0sQ0FBUztRQUNmLFdBQU0sR0FBTixNQUFNLENBQXFCO0lBQzNDLENBQUM7SUFFSix3QkFBd0IsR0FBRyxLQUFLLEVBQzlCLGlCQUE0QyxFQUM1QyxFQUFFO1FBQ0YsTUFBTSxJQUFJLENBQUMsNEJBQTRCLENBQUMsMEJBQTBCLENBQ2hFLGlCQUFpQixFQUNqQixJQUFJLENBQUMsT0FBTyxFQUNaLElBQUksQ0FBQyxNQUFNLEVBQ1gsSUFBSSxDQUFDLE1BQU0sQ0FDWixDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUYsc0JBQXNCLEdBQUcsS0FBSyxJQUFJLEVBQUU7UUFDbEMsTUFBTSxRQUFRLEdBQUcsdUJBQXVCLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sSUFBSSxHQUFHLE1BQU0sbUJBQW1CLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNFLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNyQixDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENsaWVudENvbmZpZ0Zvcm1hdCxcbiAgQ2xpZW50Q29uZmlnVmVyc2lvbixcbiAgZ2V0Q2xpZW50Q29uZmlnRmlsZU5hbWUsXG4gIGdldENsaWVudENvbmZpZ1BhdGgsXG59IGZyb20gJ0Bhd3MtYW1wbGlmeS9jbGllbnQtY29uZmlnJztcbmltcG9ydCB7IENsaWVudENvbmZpZ0dlbmVyYXRvckFkYXB0ZXIgfSBmcm9tICcuL2NsaWVudF9jb25maWdfZ2VuZXJhdG9yX2FkYXB0ZXIuanMnO1xuaW1wb3J0IHsgRGVwbG95ZWRCYWNrZW5kSWRlbnRpZmllciB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9kZXBsb3llZC1iYWNrZW5kLWNsaWVudCc7XG5pbXBvcnQgZnNwIGZyb20gJ2ZzL3Byb21pc2VzJztcblxuLyoqXG4gKiBMaWZlIGN5Y2xlIGhhbmRsZXIgZm9yIGNsaWVudCBjb25maWcgZmlsZXMgd3JpdHRlbiB0byBmaWxlIHN5c3RlbVxuICovXG5leHBvcnQgY2xhc3MgQ2xpZW50Q29uZmlnTGlmZWN5Y2xlSGFuZGxlciB7XG4gIC8qKlxuICAgKiBJbnN0YW50aWF0ZSBhIG5ldyBsaWZlIGN5Y2xlIGhhbmRsZXIgd2hpY2ggcHJveHkgcmVxdWVzdHMgdG8gQ2xpZW50Q29uZmlnR2VuZXJhdG9yQWRhcHRlclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBjbGllbnRDb25maWdHZW5lcmF0b3JBZGFwdGVyOiBDbGllbnRDb25maWdHZW5lcmF0b3JBZGFwdGVyLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgdmVyc2lvbjogQ2xpZW50Q29uZmlnVmVyc2lvbixcbiAgICBwcml2YXRlIHJlYWRvbmx5IG91dERpcj86IHN0cmluZyxcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZvcm1hdD86IENsaWVudENvbmZpZ0Zvcm1hdFxuICApIHt9XG5cbiAgZ2VuZXJhdGVDbGllbnRDb25maWdGaWxlID0gYXN5bmMgKFxuICAgIGJhY2tlbmRJZGVudGlmaWVyOiBEZXBsb3llZEJhY2tlbmRJZGVudGlmaWVyXG4gICkgPT4ge1xuICAgIGF3YWl0IHRoaXMuY2xpZW50Q29uZmlnR2VuZXJhdG9yQWRhcHRlci5nZW5lcmF0ZUNsaWVudENvbmZpZ1RvRmlsZShcbiAgICAgIGJhY2tlbmRJZGVudGlmaWVyLFxuICAgICAgdGhpcy52ZXJzaW9uLFxuICAgICAgdGhpcy5vdXREaXIsXG4gICAgICB0aGlzLmZvcm1hdFxuICAgICk7XG4gIH07XG5cbiAgZGVsZXRlQ2xpZW50Q29uZmlnRmlsZSA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBmaWxlTmFtZSA9IGdldENsaWVudENvbmZpZ0ZpbGVOYW1lKHRoaXMudmVyc2lvbik7XG4gICAgY29uc3QgcGF0aCA9IGF3YWl0IGdldENsaWVudENvbmZpZ1BhdGgoZmlsZU5hbWUsIHRoaXMub3V0RGlyLCB0aGlzLmZvcm1hdCk7XG4gICAgYXdhaXQgZnNwLnJtKHBhdGgpO1xuICB9O1xufVxuIl19