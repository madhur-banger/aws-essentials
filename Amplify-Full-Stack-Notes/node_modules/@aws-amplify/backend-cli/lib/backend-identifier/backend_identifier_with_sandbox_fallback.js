/**
 * Resolves the backend id when branch or stack is passed as an arg, otherwise returns a sandbox backend identifier
 */
export class BackendIdentifierResolverWithFallback {
    defaultResolver;
    fallbackResolver;
    /**
     * Accepts the sandbox id resolver as a parameter
     */
    constructor(defaultResolver, fallbackResolver) {
        this.defaultResolver = defaultResolver;
        this.fallbackResolver = fallbackResolver;
    }
    /**
     * resolves to deployed backend id, falling back to the sandbox id if stack or appId and branch inputs are not provided
     */
    resolveDeployedBackendIdentifier = async (args) => {
        if (args.stack || args.appId || args.branch) {
            return this.defaultResolver.resolveDeployedBackendIdentifier(args);
        }
        return this.fallbackResolver.resolve();
    };
    /**
     * Resolves deployed backend id to backend id, falling back to the sandbox id if stack or appId and branch inputs are not provided
     */
    resolveBackendIdentifier = async (args) => {
        if (args.stack || args.appId || args.branch) {
            return this.defaultResolver.resolveBackendIdentifier(args);
        }
        return this.fallbackResolver.resolve();
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZF9pZGVudGlmaWVyX3dpdGhfc2FuZGJveF9mYWxsYmFjay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9iYWNrZW5kLWlkZW50aWZpZXIvYmFja2VuZF9pZGVudGlmaWVyX3dpdGhfc2FuZGJveF9mYWxsYmFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFNQTs7R0FFRztBQUNILE1BQU0sT0FBTyxxQ0FBcUM7SUFPdEM7SUFDQTtJQUxWOztPQUVHO0lBQ0gsWUFDVSxlQUEwQyxFQUMxQyxnQkFBMEM7UUFEMUMsb0JBQWUsR0FBZixlQUFlLENBQTJCO1FBQzFDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBMEI7SUFDakQsQ0FBQztJQUNKOztPQUVHO0lBQ0gsZ0NBQWdDLEdBQUcsS0FBSyxFQUN0QyxJQUFpQyxFQUNqQyxFQUFFO1FBQ0YsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMzQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsZ0NBQWdDLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDcEU7UUFFRCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFDRjs7T0FFRztJQUNILHdCQUF3QixHQUFHLEtBQUssRUFBRSxJQUFpQyxFQUFFLEVBQUU7UUFDckUsSUFBSSxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMzQyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsd0JBQXdCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDNUQ7UUFFRCxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUN6QyxDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNhbmRib3hCYWNrZW5kSWRSZXNvbHZlciB9IGZyb20gJy4uL2NvbW1hbmRzL3NhbmRib3gvc2FuZGJveF9pZF9yZXNvbHZlci5qcyc7XG5pbXBvcnQge1xuICBCYWNrZW5kSWRlbnRpZmllclBhcmFtZXRlcnMsXG4gIEJhY2tlbmRJZGVudGlmaWVyUmVzb2x2ZXIsXG59IGZyb20gJy4vYmFja2VuZF9pZGVudGlmaWVyX3Jlc29sdmVyLmpzJztcblxuLyoqXG4gKiBSZXNvbHZlcyB0aGUgYmFja2VuZCBpZCB3aGVuIGJyYW5jaCBvciBzdGFjayBpcyBwYXNzZWQgYXMgYW4gYXJnLCBvdGhlcndpc2UgcmV0dXJucyBhIHNhbmRib3ggYmFja2VuZCBpZGVudGlmaWVyXG4gKi9cbmV4cG9ydCBjbGFzcyBCYWNrZW5kSWRlbnRpZmllclJlc29sdmVyV2l0aEZhbGxiYWNrXG4gIGltcGxlbWVudHMgQmFja2VuZElkZW50aWZpZXJSZXNvbHZlclxue1xuICAvKipcbiAgICogQWNjZXB0cyB0aGUgc2FuZGJveCBpZCByZXNvbHZlciBhcyBhIHBhcmFtZXRlclxuICAgKi9cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBkZWZhdWx0UmVzb2x2ZXI6IEJhY2tlbmRJZGVudGlmaWVyUmVzb2x2ZXIsXG4gICAgcHJpdmF0ZSBmYWxsYmFja1Jlc29sdmVyOiBTYW5kYm94QmFja2VuZElkUmVzb2x2ZXJcbiAgKSB7fVxuICAvKipcbiAgICogcmVzb2x2ZXMgdG8gZGVwbG95ZWQgYmFja2VuZCBpZCwgZmFsbGluZyBiYWNrIHRvIHRoZSBzYW5kYm94IGlkIGlmIHN0YWNrIG9yIGFwcElkIGFuZCBicmFuY2ggaW5wdXRzIGFyZSBub3QgcHJvdmlkZWRcbiAgICovXG4gIHJlc29sdmVEZXBsb3llZEJhY2tlbmRJZGVudGlmaWVyID0gYXN5bmMgKFxuICAgIGFyZ3M6IEJhY2tlbmRJZGVudGlmaWVyUGFyYW1ldGVyc1xuICApID0+IHtcbiAgICBpZiAoYXJncy5zdGFjayB8fCBhcmdzLmFwcElkIHx8IGFyZ3MuYnJhbmNoKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWZhdWx0UmVzb2x2ZXIucmVzb2x2ZURlcGxveWVkQmFja2VuZElkZW50aWZpZXIoYXJncyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmFsbGJhY2tSZXNvbHZlci5yZXNvbHZlKCk7XG4gIH07XG4gIC8qKlxuICAgKiBSZXNvbHZlcyBkZXBsb3llZCBiYWNrZW5kIGlkIHRvIGJhY2tlbmQgaWQsIGZhbGxpbmcgYmFjayB0byB0aGUgc2FuZGJveCBpZCBpZiBzdGFjayBvciBhcHBJZCBhbmQgYnJhbmNoIGlucHV0cyBhcmUgbm90IHByb3ZpZGVkXG4gICAqL1xuICByZXNvbHZlQmFja2VuZElkZW50aWZpZXIgPSBhc3luYyAoYXJnczogQmFja2VuZElkZW50aWZpZXJQYXJhbWV0ZXJzKSA9PiB7XG4gICAgaWYgKGFyZ3Muc3RhY2sgfHwgYXJncy5hcHBJZCB8fCBhcmdzLmJyYW5jaCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFJlc29sdmVyLnJlc29sdmVCYWNrZW5kSWRlbnRpZmllcihhcmdzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mYWxsYmFja1Jlc29sdmVyLnJlc29sdmUoKTtcbiAgfTtcbn1cbiJdfQ==