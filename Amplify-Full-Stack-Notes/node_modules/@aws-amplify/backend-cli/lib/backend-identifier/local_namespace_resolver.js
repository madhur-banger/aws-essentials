import { AmplifyUserError, } from '@aws-amplify/platform-core';
import { EOL } from 'os';
/**
 * Reads the local app name from package.json#name in the current directory
 */
export class LocalNamespaceResolver {
    packageJsonReader;
    /**
     * packageJsonReader is assigned to an instance member for testing.
     * resolve is bound to this so that it can be passed as a function reference
     */
    constructor(packageJsonReader) {
        this.packageJsonReader = packageJsonReader;
    }
    /**
     * Returns the value of package.json#name from the current working directory
     */
    resolve = async () => {
        const name = this.packageJsonReader.readFromCwd().name;
        if (name)
            return name;
        throw new AmplifyUserError('InvalidPackageJsonError', {
            message: 'Cannot load name from the package.json',
            resolution: `Ensure you are running ampx commands in root of your project (i.e. in the parent of the 'amplify' directory).${EOL}Also ensure that your root package.json file has a "name" field.`,
        });
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9jYWxfbmFtZXNwYWNlX3Jlc29sdmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2JhY2tlbmQtaWRlbnRpZmllci9sb2NhbF9uYW1lc3BhY2VfcmVzb2x2ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLGdCQUFnQixHQUVqQixNQUFNLDRCQUE0QixDQUFDO0FBQ3BDLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxJQUFJLENBQUM7QUFNekI7O0dBRUc7QUFDSCxNQUFNLE9BQU8sc0JBQXNCO0lBS0o7SUFKN0I7OztPQUdHO0lBQ0gsWUFBNkIsaUJBQW9DO1FBQXBDLHNCQUFpQixHQUFqQixpQkFBaUIsQ0FBbUI7SUFBRyxDQUFDO0lBRXJFOztPQUVHO0lBQ0gsT0FBTyxHQUFHLEtBQUssSUFBSSxFQUFFO1FBQ25CLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxJQUFJLENBQUM7UUFDdkQsSUFBSSxJQUFJO1lBQUUsT0FBTyxJQUFJLENBQUM7UUFDdEIsTUFBTSxJQUFJLGdCQUFnQixDQUFDLHlCQUF5QixFQUFFO1lBQ3BELE9BQU8sRUFBRSx3Q0FBd0M7WUFDakQsVUFBVSxFQUFFLGdIQUFnSCxHQUFHLGtFQUFrRTtTQUNsTSxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFtcGxpZnlVc2VyRXJyb3IsXG4gIFBhY2thZ2VKc29uUmVhZGVyLFxufSBmcm9tICdAYXdzLWFtcGxpZnkvcGxhdGZvcm0tY29yZSc7XG5pbXBvcnQgeyBFT0wgfSBmcm9tICdvcyc7XG5cbmV4cG9ydCB0eXBlIE5hbWVzcGFjZVJlc29sdmVyID0ge1xuICByZXNvbHZlOiAoKSA9PiBQcm9taXNlPHN0cmluZz47XG59O1xuXG4vKipcbiAqIFJlYWRzIHRoZSBsb2NhbCBhcHAgbmFtZSBmcm9tIHBhY2thZ2UuanNvbiNuYW1lIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeVxuICovXG5leHBvcnQgY2xhc3MgTG9jYWxOYW1lc3BhY2VSZXNvbHZlciBpbXBsZW1lbnRzIE5hbWVzcGFjZVJlc29sdmVyIHtcbiAgLyoqXG4gICAqIHBhY2thZ2VKc29uUmVhZGVyIGlzIGFzc2lnbmVkIHRvIGFuIGluc3RhbmNlIG1lbWJlciBmb3IgdGVzdGluZy5cbiAgICogcmVzb2x2ZSBpcyBib3VuZCB0byB0aGlzIHNvIHRoYXQgaXQgY2FuIGJlIHBhc3NlZCBhcyBhIGZ1bmN0aW9uIHJlZmVyZW5jZVxuICAgKi9cbiAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBwYWNrYWdlSnNvblJlYWRlcjogUGFja2FnZUpzb25SZWFkZXIpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHBhY2thZ2UuanNvbiNuYW1lIGZyb20gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnlcbiAgICovXG4gIHJlc29sdmUgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgbmFtZSA9IHRoaXMucGFja2FnZUpzb25SZWFkZXIucmVhZEZyb21Dd2QoKS5uYW1lO1xuICAgIGlmIChuYW1lKSByZXR1cm4gbmFtZTtcbiAgICB0aHJvdyBuZXcgQW1wbGlmeVVzZXJFcnJvcignSW52YWxpZFBhY2thZ2VKc29uRXJyb3InLCB7XG4gICAgICBtZXNzYWdlOiAnQ2Fubm90IGxvYWQgbmFtZSBmcm9tIHRoZSBwYWNrYWdlLmpzb24nLFxuICAgICAgcmVzb2x1dGlvbjogYEVuc3VyZSB5b3UgYXJlIHJ1bm5pbmcgYW1weCBjb21tYW5kcyBpbiByb290IG9mIHlvdXIgcHJvamVjdCAoaS5lLiBpbiB0aGUgcGFyZW50IG9mIHRoZSAnYW1wbGlmeScgZGlyZWN0b3J5KS4ke0VPTH1BbHNvIGVuc3VyZSB0aGF0IHlvdXIgcm9vdCBwYWNrYWdlLmpzb24gZmlsZSBoYXMgYSBcIm5hbWVcIiBmaWVsZC5gLFxuICAgIH0pO1xuICB9O1xufVxuIl19