"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getUrl = void 0;
const node_url_1 = __importDefault(require("node:url"));
const constants_js_1 = require("./constants.js");
let cachedUrl;
const prodUrl = `https://api.cli.amplify.aws/${constants_js_1.latestApiVersion}/metrics`;
/**
 *  Usage data tracking service URL
 */
const getUrl = () => {
    if (!cachedUrl) {
        cachedUrl = getParsedUrl();
    }
    return cachedUrl;
};
exports.getUrl = getUrl;
const getParsedUrl = () => {
    return node_url_1.default.parse(process.env.AMPLIFY_BACKEND_USAGE_TRACKING_ENDPOINT || prodUrl);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0X3VzYWdlX2RhdGFfdXJsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3VzYWdlLWRhdGEvZ2V0X3VzYWdlX2RhdGFfdXJsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLHdEQUFtRDtBQUNuRCxpREFBa0Q7QUFFbEQsSUFBSSxTQUE2QixDQUFDO0FBRWxDLE1BQU0sT0FBTyxHQUFHLCtCQUErQiwrQkFBZ0IsVUFBVSxDQUFDO0FBRTFFOztHQUVHO0FBQ0ksTUFBTSxNQUFNLEdBQUcsR0FBdUIsRUFBRTtJQUM3QyxJQUFJLENBQUMsU0FBUyxFQUFFO1FBQ2QsU0FBUyxHQUFHLFlBQVksRUFBRSxDQUFDO0tBQzVCO0lBRUQsT0FBTyxTQUFTLENBQUM7QUFDbkIsQ0FBQyxDQUFDO0FBTlcsUUFBQSxNQUFNLFVBTWpCO0FBRUYsTUFBTSxZQUFZLEdBQUcsR0FBdUIsRUFBRTtJQUM1QyxPQUFPLGtCQUFHLENBQUMsS0FBSyxDQUNkLE9BQU8sQ0FBQyxHQUFHLENBQUMsdUNBQXVDLElBQUksT0FBTyxDQUMvRCxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHVybCwgeyBVcmxXaXRoU3RyaW5nUXVlcnkgfSBmcm9tICdub2RlOnVybCc7XG5pbXBvcnQgeyBsYXRlc3RBcGlWZXJzaW9uIH0gZnJvbSAnLi9jb25zdGFudHMuanMnO1xuXG5sZXQgY2FjaGVkVXJsOiBVcmxXaXRoU3RyaW5nUXVlcnk7XG5cbmNvbnN0IHByb2RVcmwgPSBgaHR0cHM6Ly9hcGkuY2xpLmFtcGxpZnkuYXdzLyR7bGF0ZXN0QXBpVmVyc2lvbn0vbWV0cmljc2A7XG5cbi8qKlxuICogIFVzYWdlIGRhdGEgdHJhY2tpbmcgc2VydmljZSBVUkxcbiAqL1xuZXhwb3J0IGNvbnN0IGdldFVybCA9ICgpOiBVcmxXaXRoU3RyaW5nUXVlcnkgPT4ge1xuICBpZiAoIWNhY2hlZFVybCkge1xuICAgIGNhY2hlZFVybCA9IGdldFBhcnNlZFVybCgpO1xuICB9XG5cbiAgcmV0dXJuIGNhY2hlZFVybDtcbn07XG5cbmNvbnN0IGdldFBhcnNlZFVybCA9ICgpOiBVcmxXaXRoU3RyaW5nUXVlcnkgPT4ge1xuICByZXR1cm4gdXJsLnBhcnNlKFxuICAgIHByb2Nlc3MuZW52LkFNUExJRllfQkFDS0VORF9VU0FHRV9UUkFDS0lOR19FTkRQT0lOVCB8fCBwcm9kVXJsXG4gICk7XG59O1xuIl19