import { S3Client } from '@aws-sdk/client-s3';
import { transformIntrospectionSchema } from './transform_appsync_introspection_schema.js';
import { LocalGraphqlFormGenerator } from './local_codegen_graphql_form_generator.js';
import { S3StringObjectFetcher } from './s3_string_object_fetcher.js';
import { CodegenGraphqlFormGeneratorResult } from './codegen_graphql_form_generation_result.js';
/**
 * Creates a form generator given a config
 */
export const createLocalGraphqlFormGenerator = (generationParams) => {
    const client = new S3Client();
    const schemaFetcher = new S3StringObjectFetcher(client);
    const genericDataSchemaFetcher = async () => {
        const schema = await schemaFetcher.fetch(generationParams.introspectionSchemaUrl);
        return transformIntrospectionSchema(schema);
    };
    return new LocalGraphqlFormGenerator(genericDataSchemaFetcher, {
        graphqlDir: generationParams.graphqlModelDirectoryPath,
    }, (fileMap) => new CodegenGraphqlFormGeneratorResult(fileMap));
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlX2Zvcm1fZ2VuZXJhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL2NyZWF0ZV9mb3JtX2dlbmVyYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUMsT0FBTyxFQUFFLDRCQUE0QixFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFFM0YsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDdEYsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sK0JBQStCLENBQUM7QUFDdEUsT0FBTyxFQUFFLGlDQUFpQyxFQUFFLE1BQU0sNkNBQTZDLENBQUM7QUFPaEc7O0dBRUc7QUFDSCxNQUFNLENBQUMsTUFBTSwrQkFBK0IsR0FBRyxDQUM3QyxnQkFBaUQsRUFDM0IsRUFBRTtJQUN4QixNQUFNLE1BQU0sR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0lBQzlCLE1BQU0sYUFBYSxHQUFHLElBQUkscUJBQXFCLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEQsTUFBTSx3QkFBd0IsR0FBRyxLQUFLLElBQUksRUFBRTtRQUMxQyxNQUFNLE1BQU0sR0FBRyxNQUFNLGFBQWEsQ0FBQyxLQUFLLENBQ3RDLGdCQUFnQixDQUFDLHNCQUFzQixDQUN4QyxDQUFDO1FBQ0YsT0FBTyw0QkFBNEIsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5QyxDQUFDLENBQUM7SUFDRixPQUFPLElBQUkseUJBQXlCLENBQ2xDLHdCQUF3QixFQUN4QjtRQUNFLFVBQVUsRUFBRSxnQkFBZ0IsQ0FBQyx5QkFBeUI7S0FDdkQsRUFDRCxDQUFDLE9BQStCLEVBQUUsRUFBRSxDQUNsQyxJQUFJLGlDQUFpQyxDQUFDLE9BQU8sQ0FBQyxDQUNqRCxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUzNDbGllbnQgfSBmcm9tICdAYXdzLXNkay9jbGllbnQtczMnO1xuaW1wb3J0IHsgdHJhbnNmb3JtSW50cm9zcGVjdGlvblNjaGVtYSB9IGZyb20gJy4vdHJhbnNmb3JtX2FwcHN5bmNfaW50cm9zcGVjdGlvbl9zY2hlbWEuanMnO1xuaW1wb3J0IHsgR3JhcGhxbEZvcm1HZW5lcmF0b3IgfSBmcm9tICcuL2dyYXBocWxfZm9ybV9nZW5lcmF0b3IuanMnO1xuaW1wb3J0IHsgTG9jYWxHcmFwaHFsRm9ybUdlbmVyYXRvciB9IGZyb20gJy4vbG9jYWxfY29kZWdlbl9ncmFwaHFsX2Zvcm1fZ2VuZXJhdG9yLmpzJztcbmltcG9ydCB7IFMzU3RyaW5nT2JqZWN0RmV0Y2hlciB9IGZyb20gJy4vczNfc3RyaW5nX29iamVjdF9mZXRjaGVyLmpzJztcbmltcG9ydCB7IENvZGVnZW5HcmFwaHFsRm9ybUdlbmVyYXRvclJlc3VsdCB9IGZyb20gJy4vY29kZWdlbl9ncmFwaHFsX2Zvcm1fZ2VuZXJhdGlvbl9yZXN1bHQuanMnO1xuXG5leHBvcnQgdHlwZSBMb2NhbEdyYXBocWxGb3JtR2VuZXJhdG9yUGFyYW1zID0ge1xuICBpbnRyb3NwZWN0aW9uU2NoZW1hVXJsOiBzdHJpbmc7XG4gIGdyYXBocWxNb2RlbERpcmVjdG9yeVBhdGg6IHN0cmluZztcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZvcm0gZ2VuZXJhdG9yIGdpdmVuIGEgY29uZmlnXG4gKi9cbmV4cG9ydCBjb25zdCBjcmVhdGVMb2NhbEdyYXBocWxGb3JtR2VuZXJhdG9yID0gKFxuICBnZW5lcmF0aW9uUGFyYW1zOiBMb2NhbEdyYXBocWxGb3JtR2VuZXJhdG9yUGFyYW1zXG4pOiBHcmFwaHFsRm9ybUdlbmVyYXRvciA9PiB7XG4gIGNvbnN0IGNsaWVudCA9IG5ldyBTM0NsaWVudCgpO1xuICBjb25zdCBzY2hlbWFGZXRjaGVyID0gbmV3IFMzU3RyaW5nT2JqZWN0RmV0Y2hlcihjbGllbnQpO1xuICBjb25zdCBnZW5lcmljRGF0YVNjaGVtYUZldGNoZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgc2NoZW1hID0gYXdhaXQgc2NoZW1hRmV0Y2hlci5mZXRjaChcbiAgICAgIGdlbmVyYXRpb25QYXJhbXMuaW50cm9zcGVjdGlvblNjaGVtYVVybFxuICAgICk7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUludHJvc3BlY3Rpb25TY2hlbWEoc2NoZW1hKTtcbiAgfTtcbiAgcmV0dXJuIG5ldyBMb2NhbEdyYXBocWxGb3JtR2VuZXJhdG9yKFxuICAgIGdlbmVyaWNEYXRhU2NoZW1hRmV0Y2hlcixcbiAgICB7XG4gICAgICBncmFwaHFsRGlyOiBnZW5lcmF0aW9uUGFyYW1zLmdyYXBocWxNb2RlbERpcmVjdG9yeVBhdGgsXG4gICAgfSxcbiAgICAoZmlsZU1hcDogUmVjb3JkPHN0cmluZywgc3RyaW5nPikgPT5cbiAgICAgIG5ldyBDb2RlZ2VuR3JhcGhxbEZvcm1HZW5lcmF0b3JSZXN1bHQoZmlsZU1hcClcbiAgKTtcbn07XG4iXX0=