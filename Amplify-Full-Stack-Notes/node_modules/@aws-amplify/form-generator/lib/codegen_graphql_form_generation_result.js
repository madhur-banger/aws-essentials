import path from 'path';
import fs from 'fs/promises';
/**
 * Encapsulates a result from a call to the codegen form generation service
 */
export class CodegenGraphqlFormGeneratorResult {
    fileNameComponentMap;
    /**
     * Creates a CodegenGraphqlFormGeneratorResponse
     */
    constructor(fileNameComponentMap) {
        this.fileNameComponentMap = fileNameComponentMap;
    }
    /**
     * writes the components to a given directory
     */
    writeToDirectory = async (directoryPath) => {
        const filesWritten = [];
        try {
            await fs.stat(directoryPath);
        }
        catch (e) {
            await fs.mkdir(directoryPath);
        }
        for (const [fileName, content] of Object.entries(this.fileNameComponentMap)) {
            if (content) {
                const filePath = path.join(directoryPath, fileName);
                const fd = await fs.open(filePath, 'w+');
                try {
                    await fd.writeFile(content);
                    filesWritten.push(path.relative(process.cwd(), filePath));
                }
                finally {
                    await fd.close();
                }
            }
        }
        return { filesWritten };
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29kZWdlbl9ncmFwaHFsX2Zvcm1fZ2VuZXJhdGlvbl9yZXN1bHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY29kZWdlbl9ncmFwaHFsX2Zvcm1fZ2VuZXJhdGlvbl9yZXN1bHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxJQUFJLE1BQU0sTUFBTSxDQUFDO0FBQ3hCLE9BQU8sRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUc3Qjs7R0FFRztBQUNILE1BQU0sT0FBTyxpQ0FBaUM7SUFNZjtJQUg3Qjs7T0FFRztJQUNILFlBQTZCLG9CQUE0QztRQUE1Qyx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXdCO0lBQUcsQ0FBQztJQUM3RTs7T0FFRztJQUNILGdCQUFnQixHQUFHLEtBQUssRUFBRSxhQUFxQixFQUFFLEVBQUU7UUFDakQsTUFBTSxZQUFZLEdBQWEsRUFBRSxDQUFDO1FBRWxDLElBQUk7WUFDRixNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7U0FDOUI7UUFBQyxPQUFPLENBQUMsRUFBRTtZQUNWLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztTQUMvQjtRQUNELEtBQUssTUFBTSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUM5QyxJQUFJLENBQUMsb0JBQW9CLENBQzFCLEVBQUU7WUFDRCxJQUFJLE9BQU8sRUFBRTtnQkFDWCxNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQztnQkFDcEQsTUFBTSxFQUFFLEdBQUcsTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztnQkFDekMsSUFBSTtvQkFDRixNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQzVCLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztpQkFDM0Q7d0JBQVM7b0JBQ1IsTUFBTSxFQUFFLENBQUMsS0FBSyxFQUFFLENBQUM7aUJBQ2xCO2FBQ0Y7U0FDRjtRQUVELE9BQU8sRUFBRSxZQUFZLEVBQUUsQ0FBQztJQUMxQixDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuaW1wb3J0IGZzIGZyb20gJ2ZzL3Byb21pc2VzJztcbmltcG9ydCB7IEdyYXBocWxHZW5lcmF0aW9uUmVzdWx0IH0gZnJvbSAnLi9ncmFwaHFsX2Zvcm1fZ2VuZXJhdG9yLmpzJztcblxuLyoqXG4gKiBFbmNhcHN1bGF0ZXMgYSByZXN1bHQgZnJvbSBhIGNhbGwgdG8gdGhlIGNvZGVnZW4gZm9ybSBnZW5lcmF0aW9uIHNlcnZpY2VcbiAqL1xuZXhwb3J0IGNsYXNzIENvZGVnZW5HcmFwaHFsRm9ybUdlbmVyYXRvclJlc3VsdFxuICBpbXBsZW1lbnRzIEdyYXBocWxHZW5lcmF0aW9uUmVzdWx0XG57XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgQ29kZWdlbkdyYXBocWxGb3JtR2VuZXJhdG9yUmVzcG9uc2VcbiAgICovXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgZmlsZU5hbWVDb21wb25lbnRNYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4pIHt9XG4gIC8qKlxuICAgKiB3cml0ZXMgdGhlIGNvbXBvbmVudHMgdG8gYSBnaXZlbiBkaXJlY3RvcnlcbiAgICovXG4gIHdyaXRlVG9EaXJlY3RvcnkgPSBhc3luYyAoZGlyZWN0b3J5UGF0aDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgZmlsZXNXcml0dGVuOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGZzLnN0YXQoZGlyZWN0b3J5UGF0aCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgYXdhaXQgZnMubWtkaXIoZGlyZWN0b3J5UGF0aCk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgW2ZpbGVOYW1lLCBjb250ZW50XSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIHRoaXMuZmlsZU5hbWVDb21wb25lbnRNYXBcbiAgICApKSB7XG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihkaXJlY3RvcnlQYXRoLCBmaWxlTmFtZSk7XG4gICAgICAgIGNvbnN0IGZkID0gYXdhaXQgZnMub3BlbihmaWxlUGF0aCwgJ3crJyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgZmQud3JpdGVGaWxlKGNvbnRlbnQpO1xuICAgICAgICAgIGZpbGVzV3JpdHRlbi5wdXNoKHBhdGgucmVsYXRpdmUocHJvY2Vzcy5jd2QoKSwgZmlsZVBhdGgpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBhd2FpdCBmZC5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgZmlsZXNXcml0dGVuIH07XG4gIH07XG59XG4iXX0=