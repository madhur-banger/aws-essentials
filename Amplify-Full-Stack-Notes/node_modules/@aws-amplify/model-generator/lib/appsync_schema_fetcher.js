import { GetIntrospectionSchemaCommand, } from '@aws-sdk/client-appsync';
/**
 * Fetches the introspection schema for a given api id
 */
export class AppSyncIntrospectionSchemaFetcher {
    appSyncClient;
    /**
     * Instantiates the schema fetcher with an appsync client
     */
    constructor(appSyncClient) {
        this.appSyncClient = appSyncClient;
    }
    fetch = async (apiId) => {
        const result = await this.appSyncClient.send(new GetIntrospectionSchemaCommand({
            apiId: apiId,
            format: 'SDL',
        }));
        const decoder = new TextDecoder();
        return decoder.decode(result.schema);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwc3luY19zY2hlbWFfZmV0Y2hlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9hcHBzeW5jX3NjaGVtYV9mZXRjaGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCw2QkFBNkIsR0FDOUIsTUFBTSx5QkFBeUIsQ0FBQztBQUVqQzs7R0FFRztBQUNILE1BQU0sT0FBTyxpQ0FBaUM7SUFJeEI7SUFIcEI7O09BRUc7SUFDSCxZQUFvQixhQUE0QjtRQUE1QixrQkFBYSxHQUFiLGFBQWEsQ0FBZTtJQUFHLENBQUM7SUFFcEQsS0FBSyxHQUFHLEtBQUssRUFBRSxLQUFhLEVBQUUsRUFBRTtRQUM5QixNQUFNLE1BQU0sR0FBRyxNQUFNLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUMxQyxJQUFJLDZCQUE2QixDQUFDO1lBQ2hDLEtBQUssRUFBRSxLQUFLO1lBQ1osTUFBTSxFQUFFLEtBQUs7U0FDZCxDQUFDLENBQ0gsQ0FBQztRQUNGLE1BQU0sT0FBTyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFFbEMsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUN2QyxDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFwcFN5bmNDbGllbnQsXG4gIEdldEludHJvc3BlY3Rpb25TY2hlbWFDb21tYW5kLFxufSBmcm9tICdAYXdzLXNkay9jbGllbnQtYXBwc3luYyc7XG5cbi8qKlxuICogRmV0Y2hlcyB0aGUgaW50cm9zcGVjdGlvbiBzY2hlbWEgZm9yIGEgZ2l2ZW4gYXBpIGlkXG4gKi9cbmV4cG9ydCBjbGFzcyBBcHBTeW5jSW50cm9zcGVjdGlvblNjaGVtYUZldGNoZXIge1xuICAvKipcbiAgICogSW5zdGFudGlhdGVzIHRoZSBzY2hlbWEgZmV0Y2hlciB3aXRoIGFuIGFwcHN5bmMgY2xpZW50XG4gICAqL1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcFN5bmNDbGllbnQ6IEFwcFN5bmNDbGllbnQpIHt9XG5cbiAgZmV0Y2ggPSBhc3luYyAoYXBpSWQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuYXBwU3luY0NsaWVudC5zZW5kKFxuICAgICAgbmV3IEdldEludHJvc3BlY3Rpb25TY2hlbWFDb21tYW5kKHtcbiAgICAgICAgYXBpSWQ6IGFwaUlkLFxuICAgICAgICBmb3JtYXQ6ICdTREwnLFxuICAgICAgfSlcbiAgICApO1xuICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcblxuICAgIHJldHVybiBkZWNvZGVyLmRlY29kZShyZXN1bHQuc2NoZW1hKTtcbiAgfTtcbn1cbiJdfQ==