import { generateStatements } from '@aws-amplify/graphql-generator';
/**
 * Generates GraphQL documents for a given AppSync API
 */
export class AppSyncGraphqlDocumentGenerator {
    fetchSchema;
    resultBuilder;
    /**
     * Configures the AppSyncGraphqlDocumentGenerator
     */
    constructor(fetchSchema, resultBuilder) {
        this.fetchSchema = fetchSchema;
        this.resultBuilder = resultBuilder;
    }
    generateModels = async ({ targetFormat, maxDepth, typenameIntrospection, relativeTypesPath, }) => {
        const schema = await this.fetchSchema();
        if (!schema) {
            // eslint-disable-next-line amplify-backend-rules/prefer-amplify-errors
            throw new Error('Invalid schema');
        }
        const generatedStatements = generateStatements({
            schema,
            target: targetFormat,
            maxDepth,
            typenameIntrospection,
            relativeTypesPath,
        });
        return this.resultBuilder(generatedStatements);
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ3JhcGhxbF9kb2N1bWVudF9nZW5lcmF0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvZ3JhcGhxbF9kb2N1bWVudF9nZW5lcmF0b3IudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFPcEU7O0dBRUc7QUFDSCxNQUFNLE9BQU8sK0JBQStCO0lBT2hDO0lBQ0E7SUFMVjs7T0FFRztJQUNILFlBQ1UsV0FBa0MsRUFDbEMsYUFBb0U7UUFEcEUsZ0JBQVcsR0FBWCxXQUFXLENBQXVCO1FBQ2xDLGtCQUFhLEdBQWIsYUFBYSxDQUF1RDtJQUMzRSxDQUFDO0lBQ0osY0FBYyxHQUFHLEtBQUssRUFBRSxFQUN0QixZQUFZLEVBQ1osUUFBUSxFQUNSLHFCQUFxQixFQUNyQixpQkFBaUIsR0FDWSxFQUFFLEVBQUU7UUFDakMsTUFBTSxNQUFNLEdBQUcsTUFBTSxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFeEMsSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUNYLHVFQUF1RTtZQUN2RSxNQUFNLElBQUksS0FBSyxDQUFDLGdCQUFnQixDQUFDLENBQUM7U0FDbkM7UUFFRCxNQUFNLG1CQUFtQixHQUFHLGtCQUFrQixDQUFDO1lBQzdDLE1BQU07WUFDTixNQUFNLEVBQUUsWUFBWTtZQUNwQixRQUFRO1lBQ1IscUJBQXFCO1lBQ3JCLGlCQUFpQjtTQUNsQixDQUFDLENBQUM7UUFFSCxPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUNqRCxDQUFDLENBQUM7Q0FDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdlbmVyYXRlU3RhdGVtZW50cyB9IGZyb20gJ0Bhd3MtYW1wbGlmeS9ncmFwaHFsLWdlbmVyYXRvcic7XG5pbXBvcnQge1xuICBEb2N1bWVudEdlbmVyYXRpb25QYXJhbWV0ZXJzLFxuICBHZW5lcmF0aW9uUmVzdWx0LFxuICBHcmFwaHFsRG9jdW1lbnRHZW5lcmF0b3IsXG59IGZyb20gJy4vbW9kZWxfZ2VuZXJhdG9yLmpzJztcblxuLyoqXG4gKiBHZW5lcmF0ZXMgR3JhcGhRTCBkb2N1bWVudHMgZm9yIGEgZ2l2ZW4gQXBwU3luYyBBUElcbiAqL1xuZXhwb3J0IGNsYXNzIEFwcFN5bmNHcmFwaHFsRG9jdW1lbnRHZW5lcmF0b3JcbiAgaW1wbGVtZW50cyBHcmFwaHFsRG9jdW1lbnRHZW5lcmF0b3JcbntcbiAgLyoqXG4gICAqIENvbmZpZ3VyZXMgdGhlIEFwcFN5bmNHcmFwaHFsRG9jdW1lbnRHZW5lcmF0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZmV0Y2hTY2hlbWE6ICgpID0+IFByb21pc2U8c3RyaW5nPixcbiAgICBwcml2YXRlIHJlc3VsdEJ1aWxkZXI6IChmaWxlTWFwOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KSA9PiBHZW5lcmF0aW9uUmVzdWx0XG4gICkge31cbiAgZ2VuZXJhdGVNb2RlbHMgPSBhc3luYyAoe1xuICAgIHRhcmdldEZvcm1hdCxcbiAgICBtYXhEZXB0aCxcbiAgICB0eXBlbmFtZUludHJvc3BlY3Rpb24sXG4gICAgcmVsYXRpdmVUeXBlc1BhdGgsXG4gIH06IERvY3VtZW50R2VuZXJhdGlvblBhcmFtZXRlcnMpID0+IHtcbiAgICBjb25zdCBzY2hlbWEgPSBhd2FpdCB0aGlzLmZldGNoU2NoZW1hKCk7XG5cbiAgICBpZiAoIXNjaGVtYSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGFtcGxpZnktYmFja2VuZC1ydWxlcy9wcmVmZXItYW1wbGlmeS1lcnJvcnNcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzY2hlbWEnKTtcbiAgICB9XG5cbiAgICBjb25zdCBnZW5lcmF0ZWRTdGF0ZW1lbnRzID0gZ2VuZXJhdGVTdGF0ZW1lbnRzKHtcbiAgICAgIHNjaGVtYSxcbiAgICAgIHRhcmdldDogdGFyZ2V0Rm9ybWF0LFxuICAgICAgbWF4RGVwdGgsXG4gICAgICB0eXBlbmFtZUludHJvc3BlY3Rpb24sXG4gICAgICByZWxhdGl2ZVR5cGVzUGF0aCxcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnJlc3VsdEJ1aWxkZXIoZ2VuZXJhdGVkU3RhdGVtZW50cyk7XG4gIH07XG59XG4iXX0=